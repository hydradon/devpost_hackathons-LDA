<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li class="text-center">
                        <a data-lightbox="765115" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/765/115/datas/original.png">
                            <img alt="FiddlerCore &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/765/115/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h1>
                    FiddlerCore
                </h1>
                <p>
                    Fiddler is an AR + AI Choose Your Own Adventure Game. Use Object Detection and create AR experiences!
                </p>
                <p>
                    <img alt="Demo" data-canonical-url="https://github.com/pshah123/FiddlerCore/raw/v0.1/img/demo.gif" src="https://res.cloudinary.com/devpost/image/fetch/s--H2X1jUPT--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://github.com/pshah123/FiddlerCore/raw/v0.1/img/demo.gif">
                </p>
                <h2>
                    Purpose
                </h2>
                <p>
                    While AR has been around for some time it still lacks its "killer app." While it has boundless potential for becoming a platform to encourage better lifestyles, augmenting our lives, and connecting to others in new ways, it has yet to be used in full efficiency.
                </p>
                <p>
                    Fiddler aims to solve that by creating an engine and proof of concept for a Choose Your Own Adventure game run with a combination of artificial intelligence and augmented reality. By combining these two technologies, we hope to encourage healthier lifestyles both physically and mentally.
                </p>
                <h2>
                    AI
                </h2>
                <p>
                    One of the major drawbacks with AR is lack of interactibility. Intuitively users want to touch, feel, and move things around, but this is hard without complex depth sensors. Current standards in AR interaction have been widely criticized and lack intuitive feel. To immprove the user experience, we drew on a basic human interaction--seeing.
                </p>
                <p>
                    Since seeing is believing, we have users look at objects and see those objects through their camera lens. Using Object Detection (Inception v4 with
                    <a href="https://github.com/pshah123/MAX-Object-Detector-Proxy" rel="nofollow">
                        a proxy through IBM's MAX Object Detector Proxy
                    </a>
                    ) we are able to detect what they are looking at and allow interactions to occur at this level.
                </p>
                <p>
                    We then created an engine around detections powered by a reducer to reduce certain classes to a superclass (as Inception contains thousands of labels). From there, we created a custom, extensible Choose Your Own Adventure engine.
                </p>
                <h2>
                    Fiddler Engine
                </h2>
                <p>
                    The Fiddler Engine consists mostly of a GameManager to control the scene. This is because in AR, we cannot create large levels as in most Unity games, and instead must rely on procedural generation as much as possible.
                </p>
                <p>
                    The Fiddler Engine uses Augmented Reality through Google's ARCore to accomplish a variety of tasks:
                </p>
                <ul>
                    <li>
                        <p>
                            placing "save posts" which advance the game and signal the end of an interaction (the "handshake")
                        </p>
                    </li>
                    <li>
                        <p>
                            augmenting faces to achieve the initial face filter-esque effect (depends on ARCore 1.7.0 for Augmented Faces)
                        </p>
                    </li>
                </ul>
                <p>
                    <img alt="face demo" data-canonical-url="https://github.com/pshah123/FiddlerCore/raw/v0.1/img/face.gif" src="https://res.cloudinary.com/devpost/image/fetch/s--6R2-7Pze--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://github.com/pshah123/FiddlerCore/raw/v0.1/img/face.gif">
                </p>
                <ul>
                    <li>
                        delivering a camera feed (we have methods to process both the YUV-420-888 color space that can be read into byte channels from
                        <code>
                            Frame.AcquireCameraImageBytes()
                        </code>
                        and to capture full RGB images using the screencapture API)
                    </li>
                </ul>
                <p>
                    These AR pieces are used in "Tracking" mode. The Engine also has two other modes, the "Cutscene" and "Detecting" modes.
                </p>
                <p>
                    In the "Cutscene" mode, almost everything else is disabled and dialog becomes readily available. It is used as a sort of interim mode to allow for game-level interactions.
                </p>
                <p>
                    In the "Detecting" mode, the AR objects are cleared to allow for user interaction. Upon a user interaction, the detected image is fed back into our branch engine and the game then progresses.
                </p>
                <h1>
                    Branching
                </h1>
                <p>
                    While we initially thought of representing the game as a Decision Tree using a Node-based graph, we quickly found several limitations; primarily, there was no standardized way to implement the choice system in CYOA.
                </p>
                <p>
                    To allow for this we developed our engine around "branches" which each consist of two Serializable structs:
                </p>
                <pre class="language-c-sharp"><code>[Serializable]
public struct Choice {
public string detection;
public Branch branch;
}

[Serializable]
public struct Branch {
public GameObject NPC;
public Choice[] choices;
public string[] dialog;
public string[] redoDialog;
}
</code></pre>
                <p>
                    The "Choice" struct represents a dictionary-style pair of detection and branch. The detected classes are filtered at a threshold of 40% and then matches against detection strings; if a Choice's detection string matches, the accompanying branch is selected in the progression.
                </p>
                <p>
                    The "Branch" struct represents a recursive structure that allows for the actual CYOA aspect to be added. Each Branch consists of:
                </p>
                <ul>
                    <li>
                        <p>
                            an NPC, which is spawned next to the save post and should provide a cutscene through the
                            <code>
                                playCutscene
                            </code>
                            method
                        </p>
                    </li>
                    <li>
                        <p>
                            a series of choices that the user can make from there
                        </p>
                    </li>
                    <li>
                        <p>
                            some dialog to play during the cutscene
                        </p>
                    </li>
                    <li>
                        <p>
                            a "redo" dialog that is played if no choices are matched by the user's next action
                        </p>
                    </li>
                </ul>
                <h1>
                    Known Limitations and Difficulties
                </h1>
                <p>
                    To allow maximum usability, we serialized both classes. If used internally they would be completely effective, however since they are serialized for use in the Inspector as part of the Engine they are limited by Unity's Serialization depth (7 cycles).
                </p>
                <p>
                    In addition, the interactions are limited by the choice-cutscene pattern above. While this is common in the CYOA genre, the Engine should be improved in the future to allow for microinteractions.
                </p>
                <p>
                    We struggled for quite a bit of time to use the YUV color space emitted by ARCore and ultimately decided it was not of a resolution we could trust Inception to detect easily at. To combat this we used the ScreenCapture API instead.
                </p>
                <p>
                    We also struggled with the Augmented Faces option, as this is core to interactive experience. We ended up customizing the demonstration scene to allow it to be used easily for our purposes. In addition, we encountered a bug with getting the newly released Augmented Faces API to work on all phones, and both opened and resolved an issue on the ARCore GitHub repository:
                    <a href="https://github.com/google-ar/arcore-unity-sdk/issues/504" rel="nofollow">
                        ARCore unable to track anything on OnePlus 5T
                    </a>
                    .
                </p>
                <p>
                    Lastly, the actual remote interaction between Unity, the proxy, and the model was confusing as it is difficult to debug UnityWebRequest through a phone, proxy, and microservice that are all more or less blackboxed. This was more guess and check and we feel that if we were to revisit this project, we would approach the server calls in a different way to prevent running into blackbox issues with Unity.
                </p>
                <p>
                    We also found that the build is quite intensive and strongly recommend using a GPU enabled machine. We estimate that a GeForce 1060 with 6GB of VRAM should be able to complete the build in under 30 seconds.
                </p>
                <h1>
                    Demo
                </h1>
                <p>
                    The provided demo project consists of 2 scenes. The plot involves a nefarious antagonist, the "Fiddler," who has stolen the protagonist's identity! The protagonist must go on a journey, led by a fragment of themselves, to (quite literally) find themselves.
                </p>
                <p>
                    The protagonist encounters characters along the way who give clues and choices for the protagonist, who is penalized with increasingly worse clues for choosing incorrectly.
                </p>
                <p>
                    As a proof of concept we illustrate the usability of this mechanic to encourage:
                </p>
                <ul>
                    <li>
                        <p>
                            a healthier lifestyle through a gamified diet
                        </p>
                    </li>
                    <li>
                        <p>
                            leaving home and travelling, slowly breaking out of their shell, encouraged by their curiosity and willingness to progress the game
                        </p>
                    </li>
                    <li>
                        <p>
                            which then builds up to higher grade social interaction, keeping up with friends and making new ones, and ultimately encouraging large-scale social interaction
                        </p>
                    </li>
                </ul>
                <p>
                    Through this manner we can gamify
                    <em>
                        life
                    </em>
                    itself by allowing them to see their lives through AR lens, and encourage both physically and mentally healthier lifestyles.
                </p>
                <h1>
                    Credits
                </h1>
                <p>
                    We used the Low Poly v2 pack by AxeyWorks for our 3d models with some edits.
                </p>
                <p>
                    The AR library powering this project is ARCore 1.7.0 by GoogleAR.
                </p>
                <p>
                    The Object Detection model, Inception v4, comes trained from the TensorFlow Model Zoo. The IBM MAX Object Detector was used to API-fy this to reduce friction points as MAX is containerized.
                </p>
                <p>
                    The container is run through a proxy maintained by us, which can be found
                    <a href="https://github.com/pshah123/MAX-Object-Detector-Proxy" rel="nofollow">
                        here
                    </a>
                    .
                </p>
                <p>
                    This project was hacked together at
                    <a href="www.hacknyu.org" rel="nofollow">
                        HackNYU 2019
                    </a>
                    .
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag">
                            ar
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            arcore
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/augmented-reality">
                                augmented-reality
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/c--2">
                                c#
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/javascript">
                                javascript
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/npm">
                                npm
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            object-detection
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            objective-c++
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            shaderlab
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            tensorflow
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/pshah123/FiddlerCore" rel="nofollow" target="_blank" title="https://github.com/pshah123/FiddlerCore">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/pshah123/FiddlerCore/releases" rel="nofollow" target="_blank" title="https://github.com/pshah123/FiddlerCore/releases">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/pshah123/MAX-Object-Detector-Proxy" rel="nofollow" target="_blank" title="https://github.com/pshah123/MAX-Object-Detector-Proxy">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
