<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li class="text-center">
                        <a data-lightbox="870650" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/870/650/datas/original.png">
                            <img alt="WBTC&lt;&gt;BTC Atomic Swap Telegram Bot &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/870/650/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="875081" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/875/081/datas/original.png">
                            <img alt="WBTC&lt;&gt;BTC Atomic Swap Telegram Bot &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/875/081/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="875100" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/875/100/datas/original.png">
                            <img alt="WBTC&lt;&gt;BTC Atomic Swap Telegram Bot &ndash; screenshot 3" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/875/100/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Inspiration
                </h2>
                <p>
                    There currently is no easy way to exchange your BTCs for WBTC or vice versa. Atomic Swaps are tried and true method for trustless swaps between different parties.
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    Telegram bot for seamless WBTC &lt;&gt; BTC conversion. In this case, the counter party and market maker is always the bot.
                </p>
                <p>
                    Bots are special
                    <a href="https://telegram.org" rel="nofollow">
                        Telegram
                    </a>
                    accounts designed to handle messages automatically. Users can interact with bots by sending them command messages in private or group chats.
                </p>
                <h2>
                    How I built it
                </h2>
                <p>
                    Uses the
                    <a href="https://github.com/telegraf/telegraf" rel="nofollow">
                        Telegraf
                    </a>
                    Telegram bot framework, bitcoinjs-lib, web3, and BitGo v2 API.
                </p>
                <h3>
                    What are Atomic Swaps?
                </h3>
                <p>
                    An atomic swap enables the exchange of one cryptoasset for another cryptoasset without the need of centralized intermediaries. Atomic swaps can take place between two different blockchains as well. The swap is atomic, as it completes successfully or not at all. Both parties must acknowledge the receipt of funds within a given timeframe using a cryptographic hash function.
                </p>
                <h3>
                    How does Atomic Swaps work?
                </h3>
                <p>
                    Hash Time Locked Contracts (HTLC) is the mechanism that enables atomic swaps.
                </p>
                <p>
                    1) Alice and Bob agree to swap 1 A-coin from blockchain-A with 1 B-coin from blockchain B respectively.
                </p>
                <p>
                    2) Alice generates a large random number, called the preimage
                    <em>
                        m
                    </em>
                    .
                </p>
                <p>
                    3) Alice creates an HTLC on blockchain-A, locked with the hashed preimage
                    <em>
                        h
                    </em>
                    , with the following conditions:
                </p>
                <pre class="language-nolang"><code>Pay 1 A-coin to Bob's public key if m for hash(m) is known and signed by Bob.
Pay 1 A-coin to her own public key, redeemable only after 24-hours, signed by herself .
</code></pre>
                <p>
                    4) Alice broadcasts the contract to blockchain-A and shares the transaction to Bob.
                </p>
                <p>
                    5) After Bob verifies the transaction, he creates an HTLC on blockchain-B, locked with
                    <em>
                        h
                    </em>
                    as referenced from the transaction Alice broadcasted (Bob does not know m), wih the following conditions:
                </p>
                <pre class="language-nolang"><code>Pay 1 B-coin to Alice's public key if m for hash(m) is known and signed by Bob.
Pay 1 B-coin to his own public key, redeemable only after 12-hours, signed by himself.
</code></pre>
                <p>
                    6) Bob broadcasts the contract to blockchain-B and shares the transaction to Alice.
                </p>
                <p>
                    7) Alice submits a transaction in blockchain-B to redeem the 1 B-coin from the contract in blockchain-B using
                    <em>
                        m
                    </em>
                    .
                </p>
                <p>
                    8) The transaction reveals
                    <em>
                        m
                    </em>
                    , and Bob uses
                    <em>
                        m
                    </em>
                    to submit a transaction in blockchain-A to redeem the 1 A-coin.
                </p>
                <p>
                    9) Should Alice fail to redeem the 1 B-coin within 12-hours, Bob can claim back his 1 B-coin from the contract in blockchain-B.
                </p>
                <p>
                    10) Should Bob fail to redeem the 1 A-coin within 24 hours, Alice can claim back her 1-A coin from the contract in blockchain-A.
                </p>
                <h3>
                    How does WBTC&lt;&gt;BTC Atomic Swaps work with this bot?
                </h3>
                <p>
                    1) The bot acts as the maker and counterparty. It holds liquidity for both BTC and WBTC.
                </p>
                <p>
                    2) A user queries the available BTC/WBTC liquidity available. He can initiate an atomic swap with the amount capped at the available liquidity for either BTC or WBTC.
                </p>
                <p>
                    3) The atomic swap starts with the bot generating the preimage and creating the HTLC on either Bitcoin or Ethereum, depending on the destination cryptoasset of the swap for the user.
                </p>
                <p>
                    4) The bot locks the required amount minus fees on the HTLC.
                </p>
                <p>
                    5) The bot shares the transaction and hashed preimage for the user to verify.
                </p>
                <p>
                    6) Once verified, the user creates the HTLC in the corresponding blockchain, locked with the hashed preimage shared in the previous step.
                </p>
                <p>
                    7) The user shares the transaction hash for the bot to verify.
                </p>
                <p>
                    8) Once verified, the bot redeems the cryptoasset from the user's HTLC using the preimage. Once redeemed, the bot notifies the user as well of the preimage.
                </p>
                <p>
                    9) The bot expects the user to redeem the cryptoasset himself. So in the bot's perspective, the atomic swap flow has completed.
                </p>
                <h3>
                    What are Hash Time Locked Contracts (HTLC)?
                </h3>
                <p>
                    HTLCs are essentially escrow contracts that enable conditional payments. HTLC is a time-bound smart contract between parties that involves the generation of a cryptographic hash function, which can be verified between them. HTLCs form the foundation for atomic swaps - a user and the counterparty create these HTLC escrows on their respective chains, and the funds that are deposited into the two escrows of the swap are properly locked and released. This dual escrow mechanism reduces the need to trust the counterparty for proper execution of the trade. The bot leverages the HTLC standards
                    <a href="https://github.com/bitcoin/bips/blob/master/bip-0199.mediawiki" rel="nofollow">
                        BIP-199
                    </a>
                    and
                    <a href="https://github.com/ethereum/EIPs/pull/1630" rel="nofollow">
                        ERC-1630
                    </a>
                    .
                </p>
                <h3>
                    How long do Atomic Swaps take?
                </h3>
                <p>
                    Atomic Swaps are currently executed on-chain, thus the process will move at the speed of the slowest chain.
                </p>
                <h3>
                    Is there any fees imposed on the WBTC&lt;&gt;BTC Atomic Swap?
                </h3>
                <p>
                    There is a
                    <em>
                        0.5% fee
                    </em>
                    imposed to the user.
                </p>
                <h3>
                    What is the time lock condition for redemption?
                </h3>
                <p>
                    12 hours for the bot.
24 hours for the user.
                </p>
                <h2>
                    What's next for WBTC&lt;&gt;BTC Atomic Swap Telegram Bot
                </h2>
                <p>
                    To bring the bot to a production ready build.
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/bitcoin">
                                bitcoin
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            bitcoinjs
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            ethereum
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/javascript">
                                javascript
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/node-js">
                                node.js
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/solidity">
                                solidity
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            telegraf
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            web3
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/andynonimus/wbtc-btc-atomic-swap" rel="nofollow" target="_blank" title="https://github.com/andynonimus/wbtc-btc-atomic-swap">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
