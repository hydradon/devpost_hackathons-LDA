<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li>
                        <div class="flex-video">
                            <iframe allowfullscreen="allowfullscreen" allowscriptaccess="always" class="video-embed" frameborder="0" height="371" mode="transparent" src="https://www.youtube.com/embed/xXyvZU8GZHk?enablejsapi=1&amp;hl=en_US&amp;rel=0&amp;start=&amp;version=3&amp;wmode=transparent" type="text/html" webkitallowfullscreen="true" width="660" wmode="transparent">
                            </iframe>
                        </div>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="911433" data-title="wni show screen" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/911/433/datas/original.png">
                            <img alt="We Not I (wni) &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/911/433/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                wni show screen
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Inspiration
                </h2>
                <p>
                    <em>
                        Following is an incident which happened before this hack existed: I was taking a machine learning course in school and for one of our project had to train 100 random forests for a training data set. We had 5 people in our team, all with okayish computers. We couldn't find any easy way to setup a distributed jupyter notebook, that could train 20 random forests on each of our PCs and eventually aggregate all of them on one root PC. We ended up wasting 5x time by training everything on a single PC. Setting up an AWS cluster would turn out to be too hassle-some with the nearing deadline and we were discouraged by the not so user-friendly process of sending/receiving data from one node of the cluster to another.
                    </em>
                </p>
                <p>
                    <strong>
                        We wanted a cheap, easy to setup distributed computing solution over the internet for our 5 PCs which had an easy to use API to send and receive data between those 5 PCs
                    </strong>
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    <strong>
                        A python based CLI application, that enables users over the internet to share their computing power to run other people's and their own python codes.
                    </strong>
                </p>
                <p>
                    We use a built-in virtual currency by the name,
                    <em>
                        wni-money
                    </em>
                    to control demand and supply of computing power.
                </p>
                <p>
                    1) Register a new user using the command:
                </p>
                <p>
                    <code>
                        wni register --user sid
                    </code>
                </p>
                <ul>
                    <li>
                        Created a new user with username
                        <code>
                            sid
                        </code>
                    </li>
                    <li>
                        Initially a new account is given free
                        <code>
                            1000
                        </code>
                        <em>
                            wni-money
                        </em>
                    </li>
                </ul>
                <p>
                    2) Let's take an example, that a user wants to find the all the perfect numbers, i.e those numbers whose sum of factors is equal to the number itself in the range [1, 9999] using 3 other PCs
                </p>
                <p>
                    3) I.e the user (user name =
                    <code>
                        sid
                    </code>
                    ) wants to run a specific code (
                    <code>
                        perfect_numbers.py
                    </code>
                    ) on a specific number of PCs (N = 3), they can do so by writing the following command:
                </p>
                <p>
                    <code>
                        wni request PerfectNumbers perfect_numbers.py 3 -user sid -rate 2 -seconds 30
                    </code>
                </p>
                <p>
                    Generically:
                    <code>
                        wni request ROOM_ID CODE_FILE NUMBER_OF_PCS -user USER_ID -rate RATE -seconds SECONDS
                    </code>
                </p>
                <ul>
                    <li>
                        Created a room by the name
                        <code>
                            PerfectNumbers
                        </code>
                    </li>
                    <li>
                        Here
                        <code>
                            RATE
                        </code>
                        refers to the amount of
                        <em>
                            wni-money
                        </em>
                        you are willing to spend per second per PC that lends you computing power.
                    </li>
                    <li>
                        Here
                        <code>
                            SECONDS
                        </code>
                        refers to the amount of seconds for which you will be computing on each PC (including yours), i.e ideally
                        <code>
                            perfect_numbers.py
                        </code>
                        should finish its execution within 30 seconds on all the PCs
                    </li>
                    <li>
                        The total money spent by this request
                        <code>
                            = rate * seconds * number_of_pcs_borrowed = 2 * 30 * 3 = 180
                        </code>
                    </li>
                </ul>
                <p>
                    4) The user would have also needed to write the code to solve the problem (in
                    <code>
                        perfect_numbers.py
                    </code>
                    ) using our provided function-calls:
                </p>
                <ul>
                    <li>
                        <code>
                            send_data(node_id, data)
                        </code>
                        sends
                        <code>
                            data
                        </code>
                        from current node to
                        <code>
                            node_id
                        </code>
                        , here
                        <code>
                            data
                        </code>
                        can be any type of variable that is convertible in binary
                    </li>
                    <li>
                        <code>
                            received_data = receive_data(node_id)
                        </code>
                        receives
                        <code>
                            data
                        </code>
                        from
                        <code>
                            node_id
                        </code>
                    </li>
                    <li>
                        Both of these functions are synchronous in nature and if multiple messages are sent from a given node to another given node, then those multiple messages will follow FIFO (first-in first-out) ordering.
                    </li>
                    <li>
                        In the code
                        <code>
                            MY_ID
                        </code>
                        will denote the current users own id which can range from 0 to N (where N = 3, for 1a example)
                    </li>
                    <li>
                        <code>
                            MY_ID
                        </code>
                        is set to 0 for the root node, that is the one which calls the
                        <code>
                            wni request
                        </code>
                    </li>
                </ul>
                <p>
                    perfect_numbers.py:
                </p>
                <pre class="language-python"><code># Prints the list of those numbers that are perfect
# (i.e the sum of whose proper factors is equal to the numer itself)
# in the range [1, 9999], using 3 other PCs (for demo: All 3 are running as independent droplets on DigitalOcean)
N = 9999
P = 3
print("MY_ID", MY_ID)
def is_perfect(x): # a boolean function to check if a number is perfect or not
sum = 0
for i in range(1, x):
if((x % i) == 0):
sum = sum + i
return (sum == x)

if MY_ID == 0: # root code of sending ranges
for i in range(0, P):
l = (N // P) * i + 1
r = (N // P) * (i + 1)
send_data(i + 1, (l, r)) # send the tuple (l, r) to node i + 1.
ans = []
for i in range(0, P):
p = receive_data(i + 1) # receive lists from all the 3 slaves
ans = ans + p # concatenate them
print("List of perfect numbers in range [1, 9999]:", ans)
else: # slaves code which do the computation
(l, r) = receive_data(0) # receives the tuple from node 0.
ans = []
for i in range(l, r + 1):
if is_perfect(i):
ans.append(i)
print("List of perfect numbers found in range [", l, ", ", r, "]:", ans)
send_data(0, ans) # send list to node 0
</code></pre>
                <p>
                    To look for more sample codes on how a user will use the
                    <code>
                        send_data
                    </code>
                    and
                    <code>
                        receive_data
                    </code>
                    see
                    <a href="https://github.com/sidhant007/WNI/tree/master/samples" rel="nofollow">
                        this
                    </a>
                </p>
                <p>
                    5) Another user (user name =
                    <code>
                        alice
                    </code>
                    ) can potentially run a show command on their PC, to see how much
                    <em>
                        wni-money
                    </em>
                    they have and the detail of all the active requests/rooms:
                </p>
                <pre class="language-nolang"><code>wni show -user alice
</code></pre>
                <p>
                    Generically:
                    <code>
                        wni show -user USER_ID
                    </code>
                </p>
                <p>
                    <img alt="wni show command output image" data-canonical-url="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/911/433/datas/original.png" src="https://res.cloudinary.com/devpost/image/fetch/s--7UtwxDKq--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/911/433/datas/original.png">
                </p>
                <p>
                    6) Then  some users (actually 3) can join this room (
                    <code>
                        PerfectNumbers
                    </code>
                    ) using the following command:
                </p>
                <pre class="language-nolang"><code>wni join PerfectNumbers -user alice
</code></pre>
                <p>
                    Generically:
                    <code>
                        wni join ROOM_ID -user USER_ID
                    </code>
                </p>
                <p>
                    Once all 3 users connect, the code
                    <code>
                        perfect_numbers.py
                    </code>
                    is run on all the PCs and all the 3 users earn
                    <code>
                        (rate * seconds) = 2 * 30 = 60
                    </code>
                    amount of
                    <em>
                        wni-money
                    </em>
                    each.
                </p>
                <p>
                    <a href="https://youtu.be/xXyvZU8GZHk" rel="nofollow">
                        Demo Video
                    </a>
                </p>
                <h2>
                    How I built it
                </h2>
                <ul>
                    <li>
                        <p>
                            The server is written in Python3 and setup on a digitalocean server. 
(The --dev mode of the application assumes the serve is running on localhost)
                        </p>
                    </li>
                    <li>
                        <p>
                            The client side CLI application is also written in Python3 (uses Click library to create the command line interface)
                        </p>
                    </li>
                    <li>
                        <p>
                            Both communicate using Sockets.IO an abstraction over GET/POST requests on HTTP, which provide the benefits of socket style network calls
                        </p>
                    </li>
                </ul>
                <h2>
                    Challenges I ran into
                </h2>
                <ul>
                    <li>
                        Running a python code from another python code, and being able to stop it at will
                    </li>
                    <li>
                        Handling some tricky cases. Example: When one of the joined slave user exits before the allocated time runs out, then this slave user should pay all the money instead of the root (since this slave messed up the computation of root)
                    </li>
                </ul>
                <h2>
                    Accomplishments that I'm proud of
                </h2>
                <ul>
                    <li>
                        The application works :)
                    </li>
                    <li>
                        Soloed a 24-hr hackathon first time + Better time management than my previous attempts
                    </li>
                </ul>
                <h2>
                    What I learned
                </h2>
                <ul>
                    <li>
                        Making heavily inter-twined network calls requires intricacy in not getting stuck in mutually recursive calls AND remembering not to miss any calls (+ hard to debug)
                    </li>
                    <li>
                        Learnt
                        <code>
                            setuptools
                        </code>
                        ,
                        <code>
                            pickle
                        </code>
                        ,
                        <code>
                            click
                        </code>
                        and
                        <code>
                            socket.io
                        </code>
                        libraries in Python3
                    </li>
                    <li>
                        Learnt basics of how to spin up and use a droplet/VM on DigitalOcean
                    </li>
                </ul>
                <h2>
                    What's next for We Not I (wni)
                </h2>
                <ul>
                    <li>
                        <p>
                            Use a 2N Software Engineering approach, so as to make the distributed computing more trustable, where for each node, actually 2 PCs do the work. Incase any one of PCs of that pair fails, the root will still remain unaffected.
                        </p>
                    </li>
                    <li>
                        <p>
                            Make the
                            <code>
                                send_data(...,...)
                            </code>
                            and
                            <code>
                                receive_data(...)
                            </code>
                            functions, asynchronous and/or add support to do send broadcast to all the other nodes from a given node
                        </p>
                    </li>
                    <li>
                        <p>
                            Fix security concerns:
                        </p>
                        <ul>
                            <li>
                                A proper (user, password) system instead of just (user) (Done partially, because of lack of time)
                            </li>
                            <li>
                                Allow only a restricted subset of Python to be run on other people's machines, otherwise the root user can potentially make malicious system calls (Not done, since currently a prototype)
                            </li>
                        </ul>
                    </li>
                </ul>
                <p>
                    Credits: "We Not I" is also the motto of a computing club (Exun Clan) at a High School (DPS RK PURAM)
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/digitalocean">
                                digitalocean
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/python">
                                python
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/socket-io">
                                socket.io
                            </a>
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/sidhant007/WNI/tree/master/wni" rel="nofollow" target="_blank" title="https://github.com/sidhant007/WNI/tree/master/wni">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
