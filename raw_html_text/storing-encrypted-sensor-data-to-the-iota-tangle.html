<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li class="text-center">
                        <a data-lightbox="587758" data-title="Flow" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/587/758/datas/original.png">
                            <img alt="Storing encrypted sensor data to the IOTA Tangle. &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/587/758/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Flow
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="587761" data-title="Serverside" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/587/761/datas/original.png">
                            <img alt="Storing encrypted sensor data to the IOTA Tangle. &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/587/761/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Serverside
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="587762" data-title="Clientiside" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/587/762/datas/original.png">
                            <img alt="Storing encrypted sensor data to the IOTA Tangle. &ndash; screenshot 3" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/587/762/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Clientiside
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="587764" data-title="IOTA Search" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/587/764/datas/original.png">
                            <img alt="Storing encrypted sensor data to the IOTA Tangle. &ndash; screenshot 4" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/587/764/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                IOTA Search
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Inspiration
                </h2>
                <p>
                    RuuviTags are used in logistics applications where the tags move outside the owner's infrastructure. The challenge is to get data from a tag in unknown location to owner's servers, while maintaining the confidentiality and integrity of the data.
                </p>
                <p>
                    Sending and storing sensor data over untrusted network has three big issues:
1) Confidentiality of the data, how the data can be kept private.
2) Authenticity of the data, how receiver can trust the readings. 
3) Delivering the data, how the data can be sent to intended receiver.
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    Problem 1) is solved with RuuviTag's in-built AES-ECB-128 hardware, true HW RNG and a random 64 bit ID burned in the silicon. The tag has encryption key which is salted with the Unique ID. Finally each message is salted with additional 32-bit random nonce.
                </p>
                <p>
                    Unique ID has to be read via NFC, which means that attacker requires physical access to the device. Random nonce prevents attacker from mapping cryptographic outputs to known conditions.
                </p>
                <p>
                    2) Since the data is encrypted with unique key known only by owner of the device, authenticity can be verified by decrypting the data. The broadcast data format has trailing 24 bits all zeroes, so chance of forged transmission being decrypted into something reasonable with matching tail is miniscule.
                </p>
                <p>
                    3) Delivering data is solved via IOTA Tangle. A gateway has to send BLE advertisement data to a server which attaches the data to Tangle, but the gateway doesn't have to care about owner of sensor or target IP address of the server.
                </p>
                <p>
                    Gateway sends data to the server, and server converts hex to IOTA's trinary format which is then attached as a message to the IOTA transactions. In this hackathon the server is configured to attach advertisements with matching headers to the Tangle and send every transaction to specific address, but in production the server could attach all incoming data and payment for data delivery could be arranged over the Tangle. The BLE advertisements could contain a tag which would be broadcasted to the Tangle to let owner of the data to search for their data.
                </p>
                <p>
                    Finally the owner of the data searches for transaction incoming to his analytics address, downloads transactions and decrypts the data.
                </p>
                <h2>
                    How I built it
                </h2>
                <p>
                    On sensor side RuuviTag-fw v1 is used as a base. AES encryption was added for this hackathon. Please see
                    <a href="https://github.com/ojousima/ruuvitag_fw/tree/iothon" rel="nofollow">
                        IoThon fork
                    </a>
                    for the code. The application is built on top of Nordic Semiconductor SDK 12.3 using C. Ask Otso for a demo.
                </p>
                <p>
                    Gateway is a cheap BLE-WIFI gateway.
                </p>
                <p>
                    Data is interfaced to the Tangle with a VPS running on DigitalOcean. Serverside code is available on
                    <a href="https://github.com/ojousima/iothon-serverside" rel="nofollow">
                        GitHub
                    </a>
                    and npm. The code is NodeJS. Please see readme of GitHub for details
                </p>
                <p>
                    The receiver code is likewise available on
                    <a href="https://github.com/ojousima/iothon-clientside" rel="nofollow">
                        GitHub
                    </a>
                    and npm. Like serverside, the code is done with NodeJS. More details are in the readme.
                </p>
                <h2>
                    Challenges I ran into
                </h2>
                <p>
                    IOTA's example for doing proof-of-work has been broken, as it relies on some FFI libraries which won't compile after a recent update to Chrome's V8 engine. Setting up a full node would require a rather high-performance VPS and manually contacting people to set up the neighbor nodes.
                </p>
                <p>
                    The usual silliness when working with crypto RNG and bitwise operations with several languages and platforms.
                </p>
                <h2>
                    Accomplishments that I'm proud of
                </h2>
                <p>
                    The system works end-to-end, although it's not robust against malformed data etc.
                </p>
                <h2>
                    What I learned
                </h2>
                <p>
                    Quite a bit about nRF52 HW AES.
                </p>
                <h2>
                    What's next for Storing encrypted sensor data to the IOTA Tangle.
                </h2>
                <p>
                    Including TAG of transaction in the advertisement data for zero configuration on receivers.
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/c">
                                c
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            iota
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/node-js">
                                node.js
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            ruuvitag
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://iotasear.ch/address/999999999999999999999999999999999999999999999999999999999999999999FILTERAESIOTHON" rel="nofollow" target="_blank" title="https://iotasear.ch/address/999999999999999999999999999999999999999999999999999999999999999999FILTERAESIOTHON">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                iotasear.ch
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
