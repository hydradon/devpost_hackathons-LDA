<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li class="text-center">
                        <a data-lightbox="535027" data-title="Two sessions, one of which is displaying in stereographic mode." href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/535/027/datas/original.png">
                            <img alt="Hack the North: Resonant Virtual Wave &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/535/027/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Two sessions, one of which is displaying in stereographic mode.
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Prelude
                </h2>
                <p>
                    Both teammates, studying math, went into HTN with the intention to work on a hack that involved computer graphics and numerical solutions to PDEs. As hacking began, we became interested in working with VR and making a non-trivial application of Firebase. The networked nature of the hack was ossified as neither of us could support Oculus on our laptops - we worked with Google Cardboard, which decreased the freedom of interaction for headset wearers. This naturally lead into a key technical problem we solved - that of having multiple sessions present a synchronized simulation to many users of the application.
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    The demo solves the wave equation on a cell numerically in real time, using a discrete Euler-Lagrange method. The wave can be accessed online by anybody with a phone or laptop, and is synchronized between all users with Firebase. Users can tap or click on any area of the water to generate new wavelets that others can see with minimal latency.
                </p>
                <p>
                    Additionally, users on mobile can experience the wave in virtual reality with Google cardboard! Once they have a $25 headset, they can watch waves pop out at them generated by their fellow hackers.
                </p>
                <h2>
                    How we built it
                </h2>
                <p>
                    The wave is given by the partial differential equation 
u_tt = c^2 u_xx^2.
We also include a 'damping term' to make the simulation more realistic.
                </p>
                <p>
                    The graphics are built on top of three.js, a javascript API library for WebGL. The wave is made of three.js primitives, a rectangular prism and a deformable plane. Given an initial surface, we generate each frame of the animation by approximating the surface by its tangent plane (Euler-Lagrange). When a user taps on the simulation, the 2D coordinates are converted into a 3D position in the simulation, and a new wave (gaussian) forms on top of the surface.
                </p>
                <p>
                    Numerical simulation is inherently unstable, so we needed to periodically sync between all users on the network.
                </p>
                <p>
                    When a new user comes on, we periodically transmit their water's position and velocity data to all other users across the network via Firebase. The wave equation is linear, meaning that we can simply add the position and velocity information to the simulation once it is received.
                </p>
                <p>
                    For the VR, we used Google cardboard, a cheap and accessible device. To create the effect of 3D, we split the screen into two images. We also make use of the phone's gyroscope. To this end we were greatly helped by existing Cardboard demos available online.
                </p>
                <p>
                    Lighting and other effects were handled by three.js.
We based some of our code (in particular the numerical methods) on the wave simulation
                    <a href="https://github.com/dionyziz/wave-experiment" rel="nofollow">
                        here
                    </a>
                    .
                </p>
                <h2>
                    Challenges we ran into
                </h2>
                <ul>
                    <li>
                        Syncing between users is an issue, particularly when scaling up the number of users.
                    </li>
                    <li>
                        Performance! Graphics is by nature very demanding. We kept our simulation to a small grid with relatively low resolution to keep it working across all devices, and across the network.
                    </li>
                    <li>
                        API issues: Google Cardboard APIs have very sparse documentation.
                    </li>
                    <li>
                        Compatibility issues: Many of the bugs we ran into applied to certain versions of three.js / Cardboard API.
                    </li>
                </ul>
                <h2>
                    Accomplishments that we're proud of
                </h2>
                <ul>
                    <li>
                        Drops in latency from 120ms to 4.8ms for data sync (method: send data as string over network instead of as data tree.)
                    </li>
                    <li>
                        PDE simulation from a relatively low level -- no game engines here!
                    </li>
                </ul>
                <h2>
                    What we learned
                </h2>
                <ul>
                    <li>
                        In graphics, you can get great results with simple methods. The bottleneck is in implementation.
                    </li>
                    <li>
                        Check to make sure you've pushed when you don't see any changes in the simulation!
                    </li>
                    <li>
                        Commit early, commit (much more) often.
                    </li>
                    <li>
                        Git reflog and reset --hard are lifesavers.
                    </li>
                    <li>
                        The gyroscopes on mobile devices and tablets are able to generate Events every time they are moved.
                    </li>
                </ul>
                <h2>
                    What's next for Resonant Virtual Wave
                </h2>
                <p>
                    Bigger, faster and more powerful simulations (next time in parallel, on OpenGL/CUDA). The techniques can also be used for deep learning and possibly visualization of those techniques.
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/google-cardboard">
                                google-cardboard
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/jquery">
                                jquery
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/three-js">
                                three.js
                            </a>
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/FrozenWinters/HTN_PDEs" rel="nofollow" target="_blank" title="https://github.com/FrozenWinters/HTN_PDEs">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
