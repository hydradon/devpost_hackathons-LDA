<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li>
                        <div class="flex-video">
                            <iframe allowfullscreen="allowfullscreen" allowscriptaccess="always" class="video-embed" frameborder="0" height="371" mode="transparent" src="https://www.youtube.com/embed/-I3n82NfMg8?enablejsapi=1&amp;hl=en_US&amp;rel=0&amp;start=&amp;version=3&amp;wmode=transparent" type="text/html" webkitallowfullscreen="true" width="660" wmode="transparent">
                            </iframe>
                        </div>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="748241" data-title="Details on the commute (location and typical travel time)" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/748/241/datas/original.png">
                            <img alt="Get There On Time &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/748/241/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Details on the commute (location and typical travel time)
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="748242" data-title="Map renderings for a commute (with traffic status indicator)" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/748/242/datas/original.png">
                            <img alt="Get There On Time &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/748/242/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Map renderings for a commute (with traffic status indicator)
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="748256" data-title="Example of using multiple documents to get time" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/748/256/datas/original.png">
                            <img alt="Get There On Time &ndash; screenshot 3" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/748/256/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Example of using multiple documents to get time
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="748240" data-title="An example of an traffic alert sent via SMS" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/748/240/datas/original.png">
                            <img alt="Get There On Time &ndash; screenshot 4" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/748/240/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                An example of an traffic alert sent via SMS
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="748265" data-title="timeout and await logic" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/748/265/datas/original.png">
                            <img alt="Get There On Time &ndash; screenshot 5" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/748/265/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                timeout and await logic
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Inspiration
                </h2>
                <p>
                    Most of have two or three places we travel to on a somewhat regular schedule (work, school, gym, etc). Most times, we understand traffic patterns and know when to leave in order to get there on time.
                </p>
                <p>
                    However, every once in a while, there is an accident or traffic delay that impacts our ability to get to the location on time.
                </p>
                <p>
                    I wanted to build a skill that:
                </p>
                <ol>
                    <li>
                        allows me to save multiple locations ("base" Alexa functionality only lets me save one location)
                    </li>
                    <li>
                        lets me save context about the travel time for a location (I want to be alerted about the correct traffic patterns at the appropriate time)
                    </li>
                    <li>
                        proactively lets me know if there is a traffic delay (but only notifies me when there is a delay; I don't need to know if traffic is normal)
                    </li>
                </ol>
                <p>
                    <strong>
                        Note 1:
                    </strong>
                    I would think that these are simple "base" functionality features that could be built into Alexa (especially the proactive notifications). Maybe this will be a later release (making my skill obsolete!!!).
                </p>
                <p>
                    <strong>
                        Note 2:
                    </strong>
                    I understand that there are some applications that already do what I've outlined above. My issue is that:
                </p>
                <ul>
                    <li>
                        often, these apps send a reminder regardless of the traffic. For me, a daily alert saying that traffic was normal would become white noise, and I'd probably start to ignore the reminders
                    </li>
                    <li>
                        These alerts often "ring" after I am in the car, or after I am on my way... meaning that I'm already going to be late because I didn't leave early enough
                    </li>
                    <li>
                        Most of these alerts 'ring' on a cell phone. My skill sends message via cell as well, but a later enhancement will probably move the alerting functionality from SMS messages to Alexa Proactive Events. (there is not a "traffic delay" schema for events yet; I plan to request this on the Alexa uservoice website).
                    </li>
                </ul>
                <h2>
                    What it does
                </h2>
                <p>
                    Get There On Time is a relatively straight-forward application. It:
                </p>
                <ul>
                    <li>
                        Ask for a destination
                    </li>
                    <li>
                        Asks for days and times you typically travel
                    </li>
                    <li>
                        Determines the typical time it takes to travel to the destination
                    </li>
                </ul>
                <p>
                    When the user opens the skill, it does one of two things:
                </p>
                <p>
                    Normal use:
                </p>
                <ul>
                    <li>
                        Give a high level overview of the traffic for all saved locations (based on the typical travel time)
                    </li>
                </ul>
                <p>
                    If a saved commute is supposed to start within 15 minutes:
                </p>
                <ul>
                    <li>
                        Provide detailed route options and maps
                    </li>
                    <li>
                        Sends the map to the device (either via an Alexa card or SMS - if the user have provided a mobile number)
                    </li>
                </ul>
                <p>
                    In addition, I wanted to remove the "friction" of having to remember to open skill to get traffic, so I decided to implement proactive alerting (via an In Skill Purchasing subscription). This way, the user does not have to remember to open the skill in order to get timely information.
                </p>
                <h2>
                    How I built it
                </h2>
                <p>
                    <strong>
                        The Alexa Skill:
                    </strong>
                    All location, distance, map, photo, traffic, and travel duration information is obtained by Google Map APIs. These apis allow me to:
                </p>
                <ol>
                    <li>
                        Search for a location
                    </li>
                    <li>
                        Provide results and get confirmation from the user
                    </li>
                    <li>
                        Determine the typical traffic for a given day and time
                    </li>
                    <li>
                        Determine real time traffic patterns
                    </li>
                    <li>
                        Proive maps of the location and of the trip
                    </li>
                    <li>
                        Provide images of the location
                    </li>
                </ol>
                <p>
                    <img alt="Screenshot" data-canonical-url="https://s3.amazonaws.com/trafficmonitor/devPostImages/screenShot1.png" src="https://res.cloudinary.com/devpost/image/fetch/s---4H_pisM--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://s3.amazonaws.com/trafficmonitor/devPostImages/screenShot1.png">
                </p>
                <p>
                    <img alt="Screenshot" data-canonical-url="https://s3.amazonaws.com/trafficmonitor/devPostImages/screenShot2.png" src="https://res.cloudinary.com/devpost/image/fetch/s--5nWorULY--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://s3.amazonaws.com/trafficmonitor/devPostImages/screenShot2.png">
                </p>
                <p>
                    I also used moment.js for time manipulation and standard AWS services to communications (SNS), compute (Lambda), memory (DynamoDB) and content management (S3 and CloudFront).
                </p>
                <p>
                    <strong>
                        Proactive Alerting
                    </strong>
                    An "out of skill" lambda function runs every 10 minutes and checks traffic for all commutes that are 15-30 way from starting (e.g. - if I travel to Starbucks every Tuesday at 8AM, then this function will start to check traffic on Tuesday at 7:45AM).
                </p>
                <h2>
                    Challenges I ran into
                </h2>
                <p>
                    <strong>
                        Note 3:
                    </strong>
                    Typically I include an arch diagram in these write ups; this time I really wanted to deep dive on the gotchas... maybe this will help other developers.
                </p>
                <p>
                    <strong>
                        Timeouts:
                    </strong>
                    As mentioned above, I used Google APIs for almost all data searches and map renderings. Every once in a while, the API would not return within the 8 seconds that an Alexa skill is "active"... so I had to build a mechanism to handle timeouts. I ended up using promises and promise.Races to send an error message if the search result did not return in 7.5 seconds.
                </p>
                <p>
                    <img alt="Timeout code snippet" data-canonical-url="https://s3.amazonaws.com/trafficmonitor/devPostImages/screenShot5.png" src="https://res.cloudinary.com/devpost/image/fetch/s--Jwjdb7qO--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://s3.amazonaws.com/trafficmonitor/devPostImages/screenShot5.png">
                </p>
                <p>
                    <strong>
                        Images:
                    </strong>
                    Typically, I just use free images from one of a number of free image services and icon services (that often require attribution). I decided to buy icons and background images for this skill (since I was incorporating ISP). This was a huge timesaver and something I'll probably do in the future.
                </p>
                <p>
                    <strong>
                        Alerts/Reminders/Proactive Events
                    </strong>
                    I really wanted to use Alexa Proactive Event functionality in this skill; unfortunately, this API is pretty locked down (messages have to fit one of 5-6 schemas, there isn't one for traffic delays). I though about using Alexa reminders, and dynamically updating them (so that it "alarmed" as needed with the correct information).. however, that wasn't as "clean" of a solution as I would have liked.
                </p>
                <p>
                    Ultimately, I decided to send alerts via Mobile SMS, with the plan to move to Proactive Events when a traffic delay schema is available. Using Proactive Events also gives me the ability to send the message to the Alexa device (versus the cell phone).
                </p>
                <p>
                    <strong>
                        Multi-Touch Information (Calendars, Time, etc):
                    </strong>
                    There isn't functionality for a full fledged "keyboard" (today) in APL, so I knew I couldn't ask the user to input the location via typing. Days and Date/Time are a little simpler to input, so I was able to use SetState logic to "highlight a 'button' and SendEvent logic to send the "date part" value (the day, the hour, or the minute) to my lambda skill. After I get all the date time components, I re-render the screen with the new (or updated) commute day(s) and time.
                </p>
                <p>
                    <img alt="Touch Control" data-canonical-url="https://s3.amazonaws.com/trafficmonitor/devPostImages/screenShot4.png" src="https://res.cloudinary.com/devpost/image/fetch/s--vJ7T5QzM--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://s3.amazonaws.com/trafficmonitor/devPostImages/screenShot4.png">
                </p>
                <h2>
                    What's next for Get There On Time
                </h2>
                <ul>
                    <li>
                        Asking for and enabling proactive alerts for traffic delays
                    </li>
                    <li>
                        Refine the icons and images
                    </li>
                </ul>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/google-directions">
                                google-directions
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/moment-js">
                                moment.js
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/node-js">
                                node.js
                            </a>
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://www.amazon.com/dp/B07NBJ656N" rel="nofollow" target="_blank" title="https://www.amazon.com/dp/B07NBJ656N">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                www.amazon.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
