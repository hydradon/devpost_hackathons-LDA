<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li>
                        <div class="flex-video">
                            <iframe allowfullscreen="allowfullscreen" allowscriptaccess="always" class="video-embed" frameborder="0" height="371" mode="transparent" src="https://www.youtube.com/embed/XyDBznnTUqk?enablejsapi=1&amp;hl=en_US&amp;rel=0&amp;version=3&amp;wmode=transparent" type="text/html" webkitallowfullscreen="true" width="660" wmode="transparent">
                            </iframe>
                        </div>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="318383" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/318/383/datas/original.png">
                            <img alt="Insight &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/318/383/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="318438" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/318/438/datas/original.png">
                            <img alt="Insight &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/318/438/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h1>
                    Inspiration and Product
                </h1>
                <p>
                    There's a certain feeling we all have when we're lost. It's a combination of apprehension and curiosity &ndash; and it usually drives us to explore and learn more about what we see. It happens to be the case that there's a
                    <a href="http://www.purdue.edu/discoverypark/vaccine/assets/pdfs/publications/pdf/Storylines%20-%20Visual%20Exploration%20and.pdf" rel="nofollow">
                        huge disconnect
                    </a>
                    between that which we see around us and that which we know: the building in front of us might look like an historic and famous structure, but we might not be able to understand its significance until we read about it in a book, at which time we lose the ability to visually experience that which we're in front of.
                </p>
                <p>
                    Insight gives you actionable information about your surroundings in a visual format that allows you to immerse yourself in your surroundings: whether that's exploring them, or finding your way through them. The app puts the true directions of obstacles around you where you can see them, and shows you descriptions of them as you turn your phone around. Need directions to one of them? Get them without leaving the app. Insight also supports deeper exploration of what's around you: everything from restaurant ratings to the history of the buildings you're near.
                </p>
                <h2>
                    Features
                </h2>
                <ul>
                    <li>
                        View places around you heads-up on your phone - as you rotate, your field of vision changes in real time.
                    </li>
                    <li>
                        Facebook Integration: trying to find a meeting or party? Call your Facebook events into Insight to get your bearings.
                    </li>
                    <li>
                        Directions, wherever, whenever: surveying the area, and find where you want to be? Touch and get instructions instantly.
                    </li>
                    <li>
                        Filter events based on your location. Want a tour of Yale? Touch to filter only Yale buildings, and learn about the history and culture. Want to get a bite to eat? Change to a restaurants view. Want both? You get the idea.
                    </li>
                    <li>
                        Slow day? Change your radius to a short distance to filter out locations. Feeling adventurous? Change your field of vision the other way.
                    </li>
                    <li>
                        Want get the word out on where you are? Automatically check-in with Facebook at any of the locations you see around you, without leaving the app.
                    </li>
                </ul>
                <h1>
                    Engineering
                </h1>
                <h2>
                    High-Level Tech Stack
                </h2>
                <ul>
                    <li>
                        NodeJS powers a RESTful API powered by Microsoft Azure.
                    </li>
                    <li>
                        The API server takes advantage of a wealth of Azure's computational resources:
                        <ul>
                            <li>
                                A Windows Server 2012 R2 Instance, and an Ubuntu 14.04 Trusty instance, each of which handle different batches of geospatial calculations
                            </li>
                            <li>
                                Azure internal load balancers
                            </li>
                            <li>
                                Azure CDN for asset pipelining
                            </li>
                            <li>
                                Azure automation accounts for version control
                            </li>
                        </ul>
                    </li>
                    <li>
                        The Bing Maps API suite, which offers powerful geospatial analysis tools:
                        <ul>
                            <li>
                                RESTful services such as the Bing Spatial Data Service
                            </li>
                            <li>
                                Bing Maps' Spatial Query API
                            </li>
                            <li>
                                Bing Maps' AJAX control, externally through direction and waypoint services
                            </li>
                        </ul>
                    </li>
                    <li>
                        iOS objective-C clients interact with the server RESTfully and display results as parsed
                    </li>
                </ul>
                <h2>
                    Application Flow
                </h2>
                <p>
                    iOS handles the entirety of the user interaction layer and authentication layer for user input. Users open the app, and, if logging in with Facebook or Office 365, proceed through the standard OAuth flow, all on-phone. Users can also opt to skip the authentication process with either provider (in which case they forfeit the option to integrate Facebook events or Office365 calendar events into their views).
                </p>
                <p>
                    After sign in (assuming the user grants permission for use of these resources), and upon startup of the camera, requests are sent with the user's current location to a central server on an Ubuntu box on Azure. The server parses that location data, and initiates a multithread Node process via Windows 2012 R2 instances. These processes do the following, and more:
                </p>
                <ul>
                    <li>
                        Geospatial radial search schemes with data from Bing
                    </li>
                    <li>
                        Location detail API calls from Bing Spatial Query APIs
                    </li>
                    <li>
                        Review data about relevant places from a slew of APIs
                    </li>
                </ul>
                <p>
                    After the data is all present on the server, it's combined and analyzed, also on R2 instances, via the following:
                </p>
                <ul>
                    <li>
                        Haversine calculations for distance measurements, in accordance with radial searches
                    </li>
                    <li>
                        Heading data (to make client side parsing feasible)
                    </li>
                    <li>
                        Condensation and dynamic merging - asynchronous cross-checking from the collection of data which events are closest
                    </li>
                </ul>
                <p>
                    Ubuntu brokers and manages the data, sends it back to the client, and prepares for and handles future requests.
                </p>
                <h2>
                    Other Notes
                </h2>
                <ul>
                    <li>
                        The most intense calculations involved the application of the
                        <a href="https://en.wikipedia.org/wiki/Haversine_formula" rel="nofollow">
                            Haversine formulae
                        </a>
                        , i.e. for two points on a sphere, the central angle between them can be described as:
                    </li>
                </ul>
                <p>
                    <img alt="Haversine 1" data-canonical-url="https://upload.wikimedia.org/math/1/5/a/15ab0df72b9175347e2d1efb6d1053e8.png" src="https://res.cloudinary.com/devpost/image/fetch/s--qkV430Lm--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://upload.wikimedia.org/math/1/5/a/15ab0df72b9175347e2d1efb6d1053e8.png">
                </p>
                <p>
                    and the distance as:
                </p>
                <p>
                    <img alt="Haversine 2" data-canonical-url="https://upload.wikimedia.org/math/0/5/5/055b634f6fe6c8d370c9fa48613dd7f9.png" src="https://res.cloudinary.com/devpost/image/fetch/s---QDx2Lwl--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://upload.wikimedia.org/math/0/5/5/055b634f6fe6c8d370c9fa48613dd7f9.png">
                </p>
                <p>
                    (the result of which is non-standard/non-Euclidian due to the Earth's curvature). The results of these formulae translate into the placement of locations on the viewing device.
                </p>
                <p>
                    These calculations are handled by the Windows R2 instance, essentially running as a computation engine. All communications are RESTful between all internal server instances.
                </p>
                <h2>
                    Challenges We Ran Into
                </h2>
                <ul>
                    <li>
                        <em>
                            iOS and rotation
                        </em>
                        : there are a number of limitations in iOS that prevent interaction with the camera in landscape mode (which, given the need for users to see a wide field of view). For one thing, the requisite data registers aren't even accessible via daemons when the phone is in landscape mode. This was the root of the vast majority of our problems in our iOS, since we were unable to use any inherited or pre-made views (we couldn't rotate them) - we had to build all of our views from scratch.
                    </li>
                    <li>
                        <em>
                            Azure deployment specifics with Windows R2
                        </em>
                        : running a pure calculation engine (written primarily in C# with ASP.NET network interfacing components) was tricky at times to set up and get logging data for.
                    </li>
                    <li>
                        <em>
                            Simultaneous and asynchronous analysis
                        </em>
                        : Simultaneously parsing asynchronously-arriving data with uniform Node threads presented challenges. Our solution was ultimately a recursive one that involved checking the status of other resources upon reaching the base case, then using that knowledge to better sort data as the bottoming-out step bubbled up.
                    </li>
                    <li>
                        <em>
                            Deprecations in Facebook's Graph APIs
                        </em>
                        : we needed to use the Facebook Graph APIs to query specific Facebook events for their locations: a feature only available in a slightly older version of the API. We thus had to use that version, concurrently with the newer version (which also had unique location-related features we relied on), creating some degree of confusion and required care.
                    </li>
                </ul>
                <h2>
                    A few of Our Favorite Code Snippets
                </h2>
                <p>
                    A few gems from our codebase:
                </p>
                <pre class="language-javascript"><code>var deprecatedFQLQuery = '...
</code></pre>
                <p>
                    <em>
                        The story
                    </em>
                    : in order to extract geolocation data from events vis-a-vis the Facebook Graph API, we were forced to use a deprecated API version for that specific query, which proved challenging in how we versioned our interactions with the Facebook API.
                </p>
                <pre class="language-javascript"><code>addYaleBuildings(placeDetails, function(bulldogArray) {
                addGoogleRadarSearch(bulldogArray, function(luxEtVeritas) {
                ...
</code></pre>
                <p>
                    <em>
                        The story
                    </em>
                    : dealing with quite a lot of Yale API data meant we needed to be creative with our naming...
                </p>
                <pre class="language-javascript"><code>// R is the earth's radius in meters
var a = R * 2 * Math.atan2(Math.sqrt((Math.sin((Math.PI / 180)(latitude2 - latitude1) / 2) * Math.sin((Math.PI / 180)(latitude2 - latitude1) / 2) + Math.cos((Math.PI / 180)(latitude1)) * Math.cos((Math.PI / 180)(latitude2)) * Math.sin((Math.PI / 180)(longitude2 - longitude1) / 2) * Math.sin((Math.PI / 180)(longitude2 - longitude1) / 2))), Math.sqrt(1 - (Math.sin((Math.PI / 180)(latitude2 - latitude1) / 2) * Math.sin((Math.PI / 180)(latitude2 - latitude1) / 2) + Math.cos((Math.PI / 180)(latitude1)) * Math.cos((Math.PI / 180)(latitude2)) * Math.sin((Math.PI / 180)(longitude2 - longitude1) / 2) * Math.sin((Math.PI / 180)(longitude2 - longitude1) / 2);)));
</code></pre>
                <p>
                    <em>
                        The story
                    </em>
                    : while it was shortly after changed and condensed once we noticed it's proliferation, our implementation of the Haversine formula became cumbersome very quickly. Degree/radian mismatches between APIs didn't make things any easier.
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/azure">
                                azure
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/bing">
                                bing
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            bing-geolocation
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/bing-maps">
                                bing-maps
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/ios">
                                ios
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/node-js">
                                node.js
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/objective-c">
                                objective-c
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/xcode">
                                xcode
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            yale-api
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/hack-int-elligence/insight" rel="nofollow" target="_blank" title="https://github.com/hack-int-elligence/insight">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="http://insight-app.azurewebsites.net/" rel="nofollow" target="_blank" title="http://insight-app.azurewebsites.net/">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                insight-app.azurewebsites.net
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
