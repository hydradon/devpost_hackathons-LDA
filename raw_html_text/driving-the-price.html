<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li class="text-center">
                        <a data-lightbox="872568" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/872/568/datas/original.PNG">
                            <img alt="Driving the Price &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/872/568/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="872707" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/872/707/datas/original.PNG">
                            <img alt="Driving the Price &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/872/707/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="872566" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/872/566/datas/original.PNG">
                            <img alt="Driving the Price &ndash; screenshot 3" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/872/566/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="872567" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/872/567/datas/original.PNG">
                            <img alt="Driving the Price &ndash; screenshot 4" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/872/567/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="872569" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/872/569/datas/original.PNG">
                            <img alt="Driving the Price &ndash; screenshot 5" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/872/569/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="872571" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/872/571/datas/original.PNG">
                            <img alt="Driving the Price &ndash; screenshot 6" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/872/571/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="872570" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/872/570/datas/original.PNG">
                            <img alt="Driving the Price &ndash; screenshot 7" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/872/570/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Inspiration
                </h2>
                <p>
                    We wanted to tackle a difficult technical problems: turn gas station prices, a very variable display by individual companies and locations, into price data using computer vision. We wanted to develop a tool to crowdsource gas prices without the difficulty of manually typing gas prices into tools.
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    Our code currently takes in an image of a gas station prices from a mobile phone app, and then stores that into a database in Firestore. Then, once it does that, it uses a Google Cloud Function to first pre-process the image and then use the Google Vision API to process the image, as well as further post processing within the Cloud Function. We finally return the data for display by the front-end.
                </p>
                <h2>
                    How we built it
                </h2>
                <p>
                    Front-end user interfaces were built using React-native templates and components, and tested on mobile with Expo for cross platform work. Back end functionality was built using Google Cloud Vision API for image analysis, Google Firebase for data storage and transfer, and Google Cloud Functions for further processing both pre and post.
                </p>
                <h2>
                    Challenges we ran into
                </h2>
                <ul>
                    <li>
                        Engineering Challenge: Gas signs are extremely varied and the google vision API performs poorly
                        <ul>
                            <li>
                                Intensity profiles can vary greatly per image
                                <ul>
                                    <li>
                                        Sometimes the text and surrounding area is extremely bright like with LED signs in darker lighting conditions
                                    </li>
                                    <li>
                                        Other times the text is dark, and the sky or something unrelated is bright
                                    </li>
                                </ul>
                            </li>
                            <li>
                                Varying colorations (red/green, white on blue, black on yellow)
                            </li>
                            <li>
                                Angles (text is skewed)
                            </li>
                            <li>
                                Occlusion (objects in foreground)
                            </li>
                            <li>
                                Noise from background
                            </li>
                        </ul>
                    </li>
                    <li>
                        Pre-processing considerations to improve OCR
                        <ul>
                            <li>
                                Localization (Recognizing where in the photo the sign is)
                            </li>
                            <li>
                                Deskewing (Applying an affine transformation to make the text read horizontal)
                            </li>
                            <li>
                                Binarization (setting the interest pixels to 1, and everything else to 0)
                            </li>
                            <li>
                                Edge Detection
                            </li>
                        </ul>
                    </li>
                    <li>
                        Steps we took:
                        <ul>
                            <li>
                                Grayscaling: Human vision is most sensitive to green and least sensitive to blue. Gas station price boards also frequently have prices in red, green, and white, so it makes sense to use a commonly used colorimetric grayscaling that weights the green and red channels most.
                            </li>
                            <li>
                                Tested: various image pre-processing techniques (gaussian smoothing, bilateral filter)
                            </li>
                            <li>
                                Binarization: Otsu thresholding or a simple constant threshold on the grayscaled image values worked on many images but notably strugged when provided images with unusualy skewed luminance profiles. Applying pre-processing techniques to reduce noise such as gaussian smoothing or bilateral filter (to preserve edges for downstream OCR but still removing noise) improved  results, but operating on the image domain was proving to not be robust enough. So, we instead turned to looking at the gradient domain - i.e. looking at edges
                            </li>
                            <li>
                                Edge detection as a pre-processing step proved to work well with the google vision API. Canny edge detection algorithm can be used to binarize the image for edges, rather than high luminance pixels.
                            </li>
                        </ul>
                    </li>
                    <li>
                        Post-processing:
                        <ul>
                            <li>
                                Extract &amp; Correct prices
                            </li>
                            <li>
                                Match prices to regular/plus/special &amp; diesel, cash/credit etc.
                            </li>
                        </ul>
                    </li>
                </ul>
                <h2>
                    Accomplishments that we're proud of
                </h2>
                <p>
                    We, as an inexperienced team, managed to produce a final product that not only works, but is something we are proud of. It handles very difficult challenges, including in the real world testing.
                </p>
                <h2>
                    What we learned
                </h2>
                <p>
                    We came into this challenge as a group with only a moderate amount of computer vision knowledge and very limited knowledge in Google Cloud Platform and React. We as a group learned a lot about those technologies as well as the process of building such a product using tools like Git and Github.
                </p>
                <h2>
                    What's next for Driving the Price
                </h2>
                <p>
                    We hope to take this project to the next level, integrating a full backend to allow for distributed users to contribute to the platform and to truly achieve its goal of crowdsourcing data using fully native apps on Android and IOS. We want to also expand this
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/firebase">
                                firebase
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            google-cloud-function
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            google-cloud-vision
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/javascript">
                                javascript
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/npm">
                                npm
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/numpy">
                                numpy
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            pillow
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/python">
                                python
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/react-native">
                                react-native
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/scipy">
                                scipy
                            </a>
                        </span>
                    </li>
                </ul>
            </div>
        </div>
    </body>
</html>
