<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li>
                        <div class="flex-video">
                            <iframe allowfullscreen="allowfullscreen" allowscriptaccess="always" class="video-embed" frameborder="0" height="371" mode="transparent" src="https://www.youtube.com/embed/qkrsXoZnx-M?enablejsapi=1&amp;hl=en_US&amp;rel=0&amp;start=&amp;version=3&amp;wmode=transparent" type="text/html" webkitallowfullscreen="true" width="660" wmode="transparent">
                            </iframe>
                        </div>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="665899" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/665/899/datas/original.jpg">
                            <img alt="AR 3D POIs Android &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/665/899/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="665900" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/665/900/datas/original.jpg">
                            <img alt="AR 3D POIs Android &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/665/900/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="665901" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/665/901/datas/original.jpg">
                            <img alt="AR 3D POIs Android &ndash; screenshot 3" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/665/901/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="665902" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/665/902/datas/original.jpg">
                            <img alt="AR 3D POIs Android &ndash; screenshot 4" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/665/902/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="665905" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/665/905/datas/original.jpg">
                            <img alt="AR 3D POIs Android &ndash; screenshot 5" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/665/905/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Inspiration
                </h2>
                <p>
                    We were looking for a different Augmented Reality use case, something that became a challenge. Placing geo-localization markers in a 3D model was it, as we have never seen that before. Also, it was a way to mix already know-how skills, like OpenGL and fetching POIs from a service.
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    Display a real world 3D map model with real world Points of Interest on it, in an Augmented Reality application. The app displays a portion of Rome with some coffee places around it.
                </p>
                <h2>
                    How we built it
                </h2>
                <ul>
                    <li>
                        1st, we download a 3D model map from Open Street Maps.
                    </li>
                    <li>
                        Then, that model (.osm) was transformed to .obj using OSM2World tool.
                    </li>
                    <li>
                        That obj file was cleaned using Blender (removing some weird polygons, changing some colors).
                    </li>
                    <li>
                        Then, the obj model is imported to the android studio project via sceneform tool.
                    </li>
                    <li>
                        To be able to translate gps positions to the 3D environment, some Map data needs to be set:
    - Map center. You can find that info in your .osm file, element
                        <code>
                            bounds
                        </code>
                        .
                        <ul>
                            <li>
                                Scale: Check the generated
                                <code>
                                    .sfa
                                </code>
                                file. Look for
                                <code>
                                    model -&gt; scale
                                </code>
                            </li>
                            <li>
                                ReferencePoint: This is a tricky one. Basically, we need a known point in the model to
associate with a gps coordinate. In the example, we know that one corner of the Coliseum,
with lat=41.89007, lon=12.49344 is in the vertex
                                <code>
                                    235.84084f, -197.85388f
                                </code>
                                (altitude not used). 
This info allow as to performa simple coordinates extrapolation, that it's good enough for a small
map portion with not much high differences.
                            </li>
                        </ul>
                    </li>
                    <li>
                        Then, scenform and arcore do the rest.
                    </li>
                </ul>
                <h2>
                    Challenges we ran into
                </h2>
                <ul>
                    <li>
                        Map geo location to OpenGL vertex position was the main challenge. Also, we had some issues with the exported obj files (like missing roofs and weird lines).
                    </li>
                    <li>
                        The frame rate is a problem with big maps.
                    </li>
                </ul>
                <h2>
                    Accomplishments that we're proud of
                </h2>
                <p>
                    The main accomplish was to actually make it work :).
                </p>
                <p>
                    Also, we took care about the project architecture. The idea is to make it easy to change models, POIs sources, etc. We implemented a "Clean Architecture" with reactivex, dependency injection.
                </p>
                <h2>
                    What we learned
                </h2>
                <p>
                    All the tools used (arcore, sceneform), and a little of Blender.
                </p>
                <h2>
                    What's next for AR 3D POIs Android
                </h2>
                <p>
                    The project should be converted in a library, and make it easier to integrate in any project. The map data definition is not the best, that should be improved. 
With bigger ambitions, it would be nice have something like "3D map tiles", and load them on demand, so the user could move the map.
Other possible features:
                </p>
                <ul>
                    <li>
                        User interaction to show/hide POIs info detail.
                    </li>
                    <li>
                        Search other type of POIs.
                    </li>
                </ul>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/android">
                                android
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/android-studio">
                                android-studio
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            arcore
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/elagarrigue/3D-POIs-Android" rel="nofollow" target="_blank" title="https://github.com/elagarrigue/3D-POIs-Android">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
