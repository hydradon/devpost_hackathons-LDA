<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li class="text-center">
                        <a data-lightbox="458997" data-title="Piano with Key Bounds" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/458/997/datas/original.png">
                            <img alt="GO GO Piano &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/458/997/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Piano with Key Bounds
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="458998" data-title="Example Sheet Music Output" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/458/998/datas/original.png">
                            <img alt="GO GO Piano &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/458/998/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Example Sheet Music Output
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h1>
                    go-go-piano
                </h1>
                <p>
                    piano video image processing to convert to sheet music
                </p>
                <h2>
                    What is it?
                </h2>
                <p>
                    go-go-piano is designed to take videos of piano playing, determine what keys are being pressed using image processing, and then convert the pressed key data into a highly adaptable MIDI file which can easily be converted to sheet music and played back.
                </p>
                <h2>
                    What does it use?
                </h2>
                <ul>
                    <li>
                        The raw frames of the videos are brought into Matlab, where the program is able to process and output to a CSV File
                    </li>
                    <li>
                        CSV Data is imported into a python program which will determine what keys relate to what notes and convert the data into a MIDI file
                    </li>
                    <li>
                        The MIDI file can then be imported into Musescore and played or LilyPond and converted into sheet music
                    </li>
                </ul>
                <h2>
                    How does it work?
                </h2>
                <ul>
                    <li>
                        An initial frame of the piano without anything blocking the keys (hands) is determine the bounds of the piano and each black and white key
                    </li>
                    <li>
                        Data sets of hands on a piano are used to determine where the hands in the video are and the hands are masked out
                    </li>
                    <li>
                        Each frame is compared to the first frame to watch for lighting differences on keys.  If it passes the threshold, the key is recorded as pressed
                    </li>
                    <li>
                        The Middle C and Middle C# Key are determined based on location on the piano, and their indexes are recorded.
                    </li>
                    <li>
                        Data is outputted into a CSV file, with the first two lines indicating the index of Middle C and Middle C#.  Additional lines are binary arrays of white and black keys for each frame, with a 1 indicating a key being pressed
                    </li>
                    <li>
                        CSV data is imported into a Python program, where the program determines the note of the bottom-most key
                    </li>
                    <li>
                        Keys are assigned MIDI note values
                    </li>
                    <li>
                        Each frame is checked to find key presses and durations, and frames are converted to 1/16, 1/8, 1/4, 1/2, or whole notes.
                    </li>
                    <li>
                        Notes are outputted into a MIDI file
                    </li>
                </ul>
                <h2>
                    Difficulties With the Project
                </h2>
                <p>
                    Difficulties included determining the best method to filter out false positive and false negative key presses, not having enough data to reliably model hands, and lining up the MIDI score evenly
                </p>
                <h2>
                    Future ideas
                </h2>
                <p>
                    This technology could be further improved to analyze what fingers press what keys, and determine how good / bad hand posture is.  In addition, processing time could be decreased by only checking keys that are near the player's hands, rather than the entire keyboard every frame.
                </p>
                <h2>
                    References
                </h2>
                <p>
                    Algorithm was based off of the following research paper
                    <a href="https://stacks.stanford.edu/file/druid:bf950qp8995/Suteparuk.pdf" rel="nofollow">
                        https://stacks.stanford.edu/file/druid:bf950qp8995/Suteparuk.pdf
                    </a>
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/matlab">
                                matlab
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            midiutil
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/python">
                                python
                            </a>
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/mroseman95/go-go-piano" rel="nofollow" target="_blank" title="https://github.com/mroseman95/go-go-piano">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
