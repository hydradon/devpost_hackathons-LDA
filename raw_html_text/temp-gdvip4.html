<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li>
                        <div class="flex-video">
                            <iframe allowfullscreen="allowfullscreen" allowscriptaccess="always" class="video-embed" frameborder="0" height="371" mode="transparent" src="https://www.youtube.com/embed/3x24ilQqs1I?enablejsapi=1&amp;hl=en_US&amp;rel=0&amp;start=&amp;version=3&amp;wmode=transparent" type="text/html" webkitallowfullscreen="true" width="660" wmode="transparent">
                            </iframe>
                        </div>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="656799" data-title="infinity gauntlet" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/656/799/datas/original.jpg">
                            <img alt="Sketch Ya Later &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/656/799/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                infinity gauntlet
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="629157" data-title="a testude" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/629/157/datas/original.jpg">
                            <img alt="Sketch Ya Later &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/629/157/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                a testude
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="626056" data-title="inspiration" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/626/056/datas/original.jpg">
                            <img alt="Sketch Ya Later &ndash; screenshot 3" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/626/056/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                inspiration
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Inspiration
                </h2>
                <p>
                    We've all seen Toy Story, and our favorite part was when Woody dueled the Etch-a-Sketch, Western style. We sought to recreate that experience, but with our own pictures instead!
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    A standard image file is processed using Python image processing software, which reduces the picture to a single set of ordered points. This information is sent to an Arduino microcontroller, which uses stepper motors to turn the knobs of the Etch-a-Sketch.
                </p>
                <h2>
                    How we built it
                </h2>
                <h3>
                    Image Processing.
                </h3>
                <p>
                    The goal is to have an algorithm that accepts an arbitrary image and produces an etchable path. Images are first converted to grayscale and the canny edges are extracted. These edges are want we want the etch a sketch to draw. However, there is no guarantee that these contours are connected and often are not. To connect them we consider the binary edge image as a graph where black pixels are vertexes and adjacent black pixels share an edge. We then use depth first search to find all the connected components in the image. Starting with an arbitrary component we use A* to find approximate shortest path to the next connected component. We then draw this path, and repeat the process with this new, "gaint component" until all components are connected. For the A* heuristic we randomly sample each component in the image, find the closest pair of points (with one point belonging to the giant component), and use distance to the point that does not belong to the giant component as the heuristic. This step was key in making the problem computational feasible. The final step is to use a depth first search to produce a single contour, representing the image we want to draw.
                </p>
                <h3>
                    Serial Communication:
                </h3>
                <p>
                    Points are sent to the Arduino as a a sequence of two 2B unsigned integers corresponding to x and y coordinates. Because serial port communication can send a maximum of 64B reliably, point packets are capped at quantities of 16 each. A serial connection is established from the computer to the Arduino, and a handshaking procedure ensures that the Arduino has finished processing all points in memory before requesting the next packet.
                </p>
                <h3>
                    Stepper Motor Control:
                </h3>
                <p>
                    We first had to write our own libraries to control the stepper motors, as the library that comes with the Arduino IDE is blocking, thus prevents simultaneous and independent control of multiple motors. We created a non-blocking class that allowed the issuing of single steps in either direction then created another library which could take a vector (x and y coordinates) for the motors to move by, and synchronize the steps of the two motors to create a line at the proper angle. The library could then be used to move along a stream of points and create a full drawing. To securely attach the motors to the Etch A Sketch, we 3D modeled and 3D printed two sets of gears, one pair which fit snugly over the Etch A Sketch's knobs and one pair which attached to the shaft of the motor. Finally, we had to do all of the wiring necessary to control the motors.
                </p>
                <h2>
                    Challenges we ran into
                </h2>
                <p>
                    At first, we just connected each motor to a motor driver, but this drew too much current through the drivers, causing them to overheat and not be able to reliably issue the correct output patterns. When we discovered the issue was excessive current, we switched to controlling each motor with two separate motor drivers, with their input and output controls tied together. This halved the current going through each of the drivers and reduced the heat enough for multiple minutes of uninterrupted drawing time.
                </p>
                <h2>
                    Accomplishments that we're proud of
                </h2>
                <p>
                    Finishing a hardware hack successfully!
                </p>
                <h2>
                    What we learned
                </h2>
                <p>
                    Heat is the true enemy
                </p>
                <h2>
                    What's next for Sketch Ya Later
                </h2>
                <p>
                    Storing processed images on the Arduino's static EEPROM memory to be drawn after processing.
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/arduino">
                                arduino
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/c--3">
                                c++
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            circuit
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            eeprom
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/hardware">
                                hardware
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            image-processing
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            motor
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/numpy">
                                numpy
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/opencv">
                                opencv
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            protocol
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/python">
                                python
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            serial
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            software
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            stepper
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            usb
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/viruslobster/sketch-ya-later" rel="nofollow" target="_blank" title="https://github.com/viruslobster/sketch-ya-later">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
