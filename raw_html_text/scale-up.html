<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li>
                        <div class="flex-video">
                            <iframe allowfullscreen="allowfullscreen" allowscriptaccess="always" class="video-embed" frameborder="0" height="371" mode="transparent" src="https://www.youtube.com/embed/G3OunuLPnXA?enablejsapi=1&amp;hl=en_US&amp;rel=0&amp;start=&amp;version=3&amp;wmode=transparent" type="text/html" webkitallowfullscreen="true" width="660" wmode="transparent">
                            </iframe>
                        </div>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="870514" data-title="Scale Up" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/870/514/datas/original.JPG">
                            <img alt="Scale Up &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/870/514/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Scale Up
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="870452" data-title="PiCamera Image" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/870/452/datas/original.jpg">
                            <img alt="Scale Up &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/870/452/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                PiCamera Image
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="870555" data-title="Scale Up (labeled)" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/870/555/datas/original.JPG">
                            <img alt="Scale Up &ndash; screenshot 3" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/870/555/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Scale Up (labeled)
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Inspiration
                </h2>
                <p>
                    <strong>
                        We're lazy.
                    </strong>
                    There have been times when I wanted
                    <a href="https://www.youtube.com/watch?v=VUYP616SCqM" rel="nofollow">
                        gains
                    </a>
                    . There have been times when I wanted to lose weight. Counting calories is the easiest way to change body weight, but it's pretty annoying to have to constantly be looking up the calories of everything you eat. I've given up on diets because I didn't want to take the time to constantly track my calories.
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    Scale Up solves the dilemma of having to constantly manually calculate and count calories. It is an IoT connected smart food scale that automatically looks up and records the calories of whatever fruit you weigh. We decided to prioritize fruits during this hackathon because fruits don't come with nutrition labels. The calories of the weighed food are sent to a Google spreadsheet and the iOS health app so you can easily track what you've been eating.
                </p>
                <h2>
                    How we built it
                </h2>
                <p>
                    We hacked a $5 food scale to be able to send weight data to a Raspberry Pi using the
                    <a href="https://cdn.sparkfun.com/datasheets/Sensors/ForceFlex/hx711_english.pdf" rel="nofollow">
                        HX711 load cell amplifier
                    </a>
                    . Using the Pi Camera and Google Cloud Vision API, we can detect the type of food that is on the scale. We then look up the calories per gram of the food item using the
                    <a href="https://fdc.nal.usda.gov/api-guide.html" rel="nofollow">
                        USDA Food Nutrition API
                    </a>
                    . A few simple calculations yields the calories sitting on the food scale. Using Webhooks on
                    <a href="https://ifttt.com/" rel="nofollow">
                        IFTTT
                    </a>
                    , the caloric data can be recorded in the iOS Health app and a
                    <a href="https://docs.google.com/spreadsheets/d/139ghKd5BhIIS0eUtfuZoIMQvWbvEFtdtos5X1DroULY/edit?usp=sharing" rel="nofollow">
                        Google sheet
                    </a>
                    . Of course, Scale Up still functions as a regular food scale with an LCD that displays the weight and calories after processing is completed.
                </p>
                <h2>
                    Challenges we ran into
                </h2>
                <p>
                    We were challenged by the accuracy of Google Vision to correctly determine the food item. We currently limited our food type to only common fruits to make sure food labels stay accurate. Because we used multi-threading in the python script, the Raspberry Pi's CPU is constantly saturated which makes some of the code run slowly. The load cell values also fluctuate at +/- 1gram. This is a hardware restriction that we could not overcome. 
On the API side, we had many API options to choose from. Another API we considered didn't seem to provide us the exact information we needed: calories per gram of raw fruit. So we ultimately chose to use the USDA FDC API, and that's the one that Google uses when showing the nutrition information of some kind of food that's Google searched. The USDA FDC API requires a POST request to search by the name of the fruit and a GET request to search by a specific USDA food ID; there was a challenge in getting the POST request to work, specifically in sending the API key as a part of the request header and not the body.
                </p>
                <h2>
                    Accomplishments that we're proud of
                </h2>
                <p>
                    It works!
                    <em>
                        Apple thinks I ate like 30 apples today.
                    </em>
                    In all seriousness, this is Enoch's second hackathon and Rebecca's first time building an IoT hack, and we're happy that we got all the hardware to work together with the software without any big hiccups. We have a prototype that can be demoed from start to finish.
                </p>
                <h2>
                    What we learned
                </h2>
                <p>
                    We learned about how to connect a sensor, collect data, and send this data up to the cloud. We learned about interfacing hardware with Raspberry Pi using
                    <a href="https://sourceforge.net/projects/raspberry-gpio-python/" rel="nofollow">
                        RPI.GPIO
                    </a>
                    to control the pins. We also learned about HTTP GET requests to the USDA Food Nutrition API and IFTTT. Rebecca learned more about POST requests and that Python has a couple library functions that can handle HTTP requests -- some better than others! In order to preserve functionality of the food scale, we learned to use multi-threading in Python to make sure all buttons worked consistently.
                </p>
                <h2>
                    What's next for Scale Up
                </h2>
                <p>
                    We want to improve the accuracy of food detection by training our own machine learning model. We also want to expand the idea to more whole foods besides fruits. We also want to create a better user interface. Ideally, we would set up a back end to record caloric data and make this data available to users via a website or app. We would also like to optimize some of the code to make it less CPU intensive.
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag">
                            api
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/github">
                                github
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/google-cloud">
                                google-cloud
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/google-spreadsheets">
                                google-spreadsheets
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/hardware">
                                hardware
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            hx711
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            ifttt
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            ios-health
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/python">
                                python
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/raspberry-pi">
                                raspberry-pi
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            webhooks
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/ec965/smart_scale" rel="nofollow" target="_blank" title="https://github.com/ec965/smart_scale">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
