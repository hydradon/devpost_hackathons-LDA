<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li>
                        <div class="flex-video">
                            <iframe allowfullscreen="allowfullscreen" allowscriptaccess="always" class="video-embed" frameborder="0" height="371" mode="transparent" src="https://www.youtube.com/embed/OpQrhqIfqT4?enablejsapi=1&amp;hl=en_US&amp;rel=0&amp;start=&amp;version=3&amp;wmode=transparent" type="text/html" webkitallowfullscreen="true" width="660" wmode="transparent">
                            </iframe>
                        </div>
                    </li>
                </ul>
            </div>
            <div>
                <h1>
                    History
                </h1>
                <p>
                    Restaurant Finder was one of the first Alexa skills I created in 2016.  The unique aspect of this skill is it's ability to filter results based not just on type of cuisine but also qualitative aspects like "good," "expensive," or "open."  The skill had low but consistent usage.  For this contest, I decided to review customer interaction with this skill to see how I could improve it.  I looked at reviews that had been left on Amazon, and integrated by skill with Dashbot, an analytics platform that allowed me to see how customers were using my skill.  Based on review of many customer sessions I found the following areas that I wanted to address:
                </p>
                <ul>
                    <li>
                        The skill required you to repeat your entire search to filter results, as opposed to just being able to say "good" after you had requested Chinese restaurants
                    </li>
                    <li>
                        There was a clunky feature that asked users to say their ZIP code so the skill could remember their location for future searches
                    </li>
                    <li>
                        The skill had been ported for Canadian users but did not work - it hit an error after being launched
                    </li>
                    <li>
                        There were no cards or other interaction with the the companion Alexa app or a screen display
                    </li>
                    <li>
                        Interactions were not fluid - sessions would end after the user viewed their first restaurant, or if the skill couldn't understand the customer's input
                    </li>
                    <li>
                        Results were canned with no randomization of responses - for example the response to a LaunchRequest was always "you can say find a cheap Chinese restaurant in Seattle."
                    </li>
                </ul>
                <h1>
                    Conversation Flow
                </h1>
                <p>
                    To take the problems I had with conversation and guiding the customer through my skill, I drew out an explicit conversation flow and included states into my lambda function via the alexa-sdk.  The conversation flows through a few different states:
                </p>
                <ul>
                    <li>
                        Empty: This is the state when the user first launches the skill, before they have done any searches
                    </li>
                    <li>
                        RESULTS: In this state, the user has done a search.  The
                        <code>
                            attributes.lastSearch
                        </code>
                        and
                        <code>
                            attributes.lastResponse
                        </code>
                        fields are filled with the search performed and the restaurants found
                    </li>
                    <li>
                        LIST: The user can read results five at a time.  While are reading results, they are in this state.  They can move forward and backwards through the result list.  Note that if there are five or fewer results that match the search terms, the user will go directly into the LIST state after doing a search.
                        <code>
                            attributes.lastResult.read
                        </code>
                        keeps track of where they are in the list.  The full list is displayed on the device screen, if it supports the display directive
                    </li>
                    <li>
                        DETAILS: Once the user has found a restaurant that they want to hear more details about, they enter this state.
                        <code>
                            attributes.lastResponse.details
                        </code>
                        keeps track of which restaurant in the list is currently specifying details.  The user can go back to the LIST state from this point, or can do a new search.  Details are presented to the user via speech and a companion card, including a hero image.
                    </li>
                </ul>
                <h1>
                    Other Updates
                </h1>
                <ul>
                    <li>
                        I integrated with Alexa's built-in Device Location API.  If the customer doesn't specify a location, they are told that they can either allow the skill access to their current location or they can say the location that they want to search in.
                    </li>
                    <li>
                        The skill uses different localized strings for Canadian users which not only fixed the invocation problems, but also provides local examples like Toronto or Vancouver when providing help
                    </li>
                    <li>
                        Help is now topical based on the above-mentioned state that the user is in
                    </li>
                    <li>
                        I sprinkled random responses and options when the skill communicates with the user.  There are now 240 different responses that the skill can utter when given a LaunchRequest
                    </li>
                    <li>
                        The skill integrates with the Google Maps API to convert a postal code to a city name for customers that perform a ZIP code search
                    </li>
                </ul>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/alexa">
                                alexa
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/google-maps">
                                google-maps
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/javascript">
                                javascript
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/node-js">
                                node.js
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/yelp">
                                yelp
                            </a>
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/gsdriver/restaurant-finder" rel="nofollow" target="_blank" title="https://github.com/gsdriver/restaurant-finder">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
