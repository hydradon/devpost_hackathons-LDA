<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li class="text-center">
                        <a data-lightbox="638751" data-title="yellow light!" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/638/751/datas/original.png">
                            <img alt="Headsup - Smarter Roads Traffic Light Mobile Dashboard &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/638/751/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                yellow light!
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Inspiration
                </h2>
                <p>
                    I'm from Washington DC, &amp; recently my city announced a partnership with Audi to give their vehicles a real-time heads-up display of upcoming traffic signals. I immediately wanted to create something like this for my car. I was delighted to find Virginia pioneering more open data practices that inspired me to head to Virginia Beach for a hackathon to use their incredible open data that's available to try to recreate this engineering feat in a weekend.
                </p>
                <p>
                    Repository is hosted at
                    <a href="https://github.com/jauntywunderkind/traffic-light-headsup" rel="nofollow">
                        https://github.com/jauntywunderkind/traffic-light-headsup
                    </a>
                    .
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    This is a mobile web application intended for use on phones or tablets, mounted in-car, in hands-free configuration. It tracks the user's location ongoingly, and display's a "heads-up" view of whatever traffic intersection the user is headed towards. This view includes:
                </p>
                <ul>
                    <li>
                        A mirror visualization of the traffic light
                    </li>
                    <li>
                        A count down timer for how long the current phase is expected to last
                    </li>
                    <li>
                        A text description of the intersection of this traffic light
                    </li>
                </ul>
                <p>
                    This application ongoingly polls the Smarter Roads' Signal Phase and Timing API, grabbing all real-time timing information that is available (presently, this is the Virginia Connected Corridor) and storing it into a geodatabase.
                </p>
                <h2>
                    How We built it
                </h2>
                <p>
                    Ahead of time, we scrape a bunch of static data into a PostgreSQL/PostGIS database:
                </p>
                <ol>
                    <li>
                        <a href="http://smarterroads.org/dataset/detail/26" rel="nofollow">
                            Map Data
                        </a>
                        on intersections  endpoint.This provides details on the physical layout of an intersection, giving us details about what signalling devices there are and what lanes of traffic they correspond to. This will be used to help us determine which signal is relevant to the user as they approach. It comes to us in the J2735 standard.
                    </li>
                    <li>
                        <a href="http://smarterroads.org/dataset/detail/19" rel="nofollow">
                            Signal Data: Controller Configuration
                        </a>
                        provides general information on the intersection: a human friendly description, it's latitude &amp; longitude. We use this data to lookup the relevant intersection, &amp; tell the user what light they are approaching.
                    </li>
                </ol>
                <p>
                    With this base, we then start the application server, which serves two roles:
                </p>
                <ol>
                    <li>
                        Host a web application to run the users session. Running our web page, the user's browser sends our server  geocordinates of where they are, &amp; we stream them information about the approaching signal &amp; the timing data relevant to them. The web page counts down the signal.
                    </li>
                    <li>
                        A consumer which repeatedly reads the
                        <a href="http://smarterroads.org/dataset/detail/24" rel="nofollow">
                            Signal Phase and Timing endpoint
                        </a>
                        for updates, and injects all changes into a PostGIS spatial database.
                    </li>
                    <li>
                        As signal phase &amp; timing changes are read, locate any users who would be affected by this change, and inform them of the new signal component.
                    </li>
                </ol>
                <h2>
                    Accomplishments that Team is proud of
                </h2>
                <p>
                    The team had a great time prototyping some early UI ideas to arrive at a design we are proud of as simple, low-distraction, highly visible.
                </p>
                <p>
                    We very quickly were able to get a basic mockup React-based web application brought up. We very rapidly added the location tracking feature &amp; got that location funneling back to the server. Progress was super rapid.
                </p>
                <p>
                    We developed all the core technology we need to push updates between the mobile device &amp; the server. We feel confident that the mechanisms to push intersection information, real time signal information to the phone, and for the phone to send it's location to the server, is a good, viable solution we could continue to use.
                </p>
                <p>
                    The team started out making a very valiant &amp; strong engineering effort to read the J2735 standard data. We knew we needed a good tool kit to read the data, and we dived in to try to get an accurate model of the data structures in J2735. Even though we ultimately were not able to read the J2735 data, the team is incredibly proud of the useful J2735 models that it built, which serve all layers of this application. This work not only powers the application, but it got us deeply intimate right away with the data we knew we were targeting. As you'll hear in the next section, we failed to parse the encoded data, &amp; but the presence of these models let us build the application solidly as though we
                    <em>
                        did
                    </em>
                    have this data working, and it enabled us to carry on forwards with confidence &amp; enriched understanding of what would be possible.
                </p>
                <h2>
                    Challenges Team ran into
                </h2>
                <p>
                    The real-time data we are interested in, arriving from the Virginia Connected Corridor, all comes in the industry standard J2735 standard. It's wonderful that we have the potential to get the raw data. However our team found problem after problem trying to use this data.
                </p>
                <p>
                    First off, the J2735 specification is not available. We realized proceeding with this project would only be feasible with access to the spec, otherwise the data would remain largely a mystery, &amp; so the team lead spend over $150 to purchase access to the specification on the day of the competition. We did eventually find an openly available ITT spec it was derived from, however that spec is ~8 years out of date. Access to this spec indeed proved critical, as outlined in our proud accomplishments above, however this was a big point of mystery &amp; confusion beforehand. We like that the data is the raw data, but it's unfortunate that the ability to understand the data requires such a hih investment cost that many enthusiasts would not be willing to pay for.
                </p>
                <p>
                    Second, J2735 proved remarkably hard to work with. It defines what data structures are available via the faithful old standard Abstract Syntax Notation One (ASN.1)(, which is old but normal and there is a wide range of tooling available for ASN.1 data-dictionaries &amp; reading &amp; writing (decoding &amp; encoding) tools. However, ASN.1 provides a number of different encoding formats. Here the team encountered radical difficulty. While encodings like DER (Distinguished Encoding Rules) and BER (Basic Encoding rules) are common and have ready support available, the UPER (Unaligned Packed Encoding Rules) encoding used throughout the Smarter Roads apis had very very few existing tools to work with it.
                </p>
                <p>
                    We use JavaScript throughout, and BER and DER are well supported in this environment. Additionally, common tools like
                    <code>
                        dumpasn1
                    </code>
                    are frequently used to manipulate ASN.1. Libraries such as
                    <code>
                        snacc
                    </code>
                    provide a good fallback for writing C or C++ code to interact with ASN.1 if these options fail. None of these options worked with the UPER format.
                </p>
                <p>
                    The team located one and only one available tool that purported to support UPER,
                    <code>
                        asn1tools
                    </code>
                    , a swiss army knife converter that looked extremely promising &amp; which would have served us well. However it was unable to read the J2735 data-dictionary. In our debugging we were not able to identify what was causing this incompatibility.
                </p>
                <h2>
                    What Team learned
                </h2>
                <p>
                    We learned an enormous amount about how &amp; what transportation data looks like!
                </p>
                <p>
                    We learned a ton about the Virginia Connected Corridor, and the extend of infrastructure involved!
                </p>
                <p>
                    Our team had some really interesting discussions with others at the hackathon about DSRC vs Cloud systems. We're excited for the future, for 5G to happen, but also we really hope direct Vehicle to Vehicle and Infrastructure to Vehicle technology gets a chance. It was cool to know that the Smarter Roads endpoints are giving us data in the same kind of format as a 802.11 DSRC based ambient-computing world might have!
                </p>
                <h2>
                    What's next for Heads-up
                </h2>
                <p>
                    Getting our app talking to the J2735 endpoints remains a very high priority. Getting further into the source code of the promising
                    <code>
                        asn1tools
                    </code>
                    swiss-army knife to understand why it is failing to read the official J2735 schema is a likely path.
                </p>
                <p>
                    Once we have data better flowing through out system, we'd like to spend time better understanding the intersection data available to us. Being able to understand which lanes the user is approaching from, to confidently make the correct decision about which signal to show the user, is an important requirement for to bring this app to production, and a tricky problem. We also have work to do with better understanding which direction the user is heading, which is also important to making this decision.
                </p>
                <p>
                    With these two in to place, the team feels like it would be near to a good position to bring this application to production. Some UI cleanup - spit &amp; polish - would certainly be in order.
                </p>
                <p>
                    Longer term, the team is considering adding technologies like speach assistant. For example, we believe we could serve a useful safety purpose if we detect the car moving quickly towards a red light, and vocally inform the user of the red ahead.
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/html5">
                                html5
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/node-js">
                                node.js
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            postgis
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/react">
                                react
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            webcomponents
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://headsup.eldergods.com" rel="nofollow" target="_blank" title="https://headsup.eldergods.com">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                headsup.eldergods.com
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/jauntywunderkind/traffic-light-headsup" rel="nofollow" target="_blank" title="https://github.com/jauntywunderkind/traffic-light-headsup">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
