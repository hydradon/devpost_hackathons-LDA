<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li class="text-center">
                        <a data-lightbox="367121" data-title="Smart Water Meter Flow Chart" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/367/121/datas/original.png">
                            <img alt="Smart Water Meter &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/367/121/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Smart Water Meter Flow Chart
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="367113" data-title="Hall Effect Sensor Amplifier (tweaked)" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/367/113/datas/original.jpg">
                            <img alt="Smart Water Meter &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/367/113/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Hall Effect Sensor Amplifier (tweaked)
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="367123" data-title="Water Meter Running Demo" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/367/123/datas/original.png">
                            <img alt="Smart Water Meter &ndash; screenshot 3" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/367/123/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Water Meter Running Demo
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="367117" data-title="Huzzah acting as Artik 5 Sensor Node" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/367/117/datas/original.png">
                            <img alt="Smart Water Meter &ndash; screenshot 4" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/367/117/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Huzzah acting as Artik 5 Sensor Node
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="367119" data-title="Artik 10 Running Demo" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/367/119/datas/original.png">
                            <img alt="Smart Water Meter &ndash; screenshot 5" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/367/119/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Artik 10 Running Demo
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="367118" data-title="Node-Red Flow on Artik 10" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/367/118/datas/original.png">
                            <img alt="Smart Water Meter &ndash; screenshot 6" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/367/118/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Node-Red Flow on Artik 10
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="367122" data-title="Website Running Demo" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/367/122/datas/original.png">
                            <img alt="Smart Water Meter &ndash; screenshot 7" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/367/122/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Website Running Demo
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="367116" data-title="WaterMeter.RedDogAlpha.com" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/367/116/datas/original.png">
                            <img alt="Smart Water Meter &ndash; screenshot 8" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/367/116/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                WaterMeter.RedDogAlpha.com
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="367120" data-title="All components" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/367/120/datas/original.jpg">
                            <img alt="Smart Water Meter &ndash; screenshot 9" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/367/120/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                All components
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="367115" data-title="IQP Web App Data Trace" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/367/115/datas/original.png">
                            <img alt="Smart Water Meter &ndash; screenshot 10" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/367/115/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                IQP Web App Data Trace
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="367114" data-title="IBM Bluemix OTA Device Managment" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/367/114/datas/original.png">
                            <img alt="Smart Water Meter &ndash; screenshot 11" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/367/114/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                IBM Bluemix OTA Device Managment
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Inspiration
                </h2>
                <p>
                    My MAD project solution to California&rsquo;s water crisis is based around a single idea, &ldquo;In order to conserve water we need to be able measure water consumption to the finest levels of usage and analyze those measurements.&rdquo; With that idea in mind, and considering the highest water consumption types, I came up with the idea of a Smart Water Meter.
                </p>
                <p>
                    Since statistics show that the majority of water resources are lost to leakage in water mains and consumed in agricultural applications, I created a Smart Water Meter Sensor that utilizes a well-known technology called a Hall Effect sensor. A Hall Effect sensor takes measurements of magnetic fields and outputs that into an electrical signal. Out of the various types of sensors, I am using a Linear Hall Effect sensor that produces an electrical signal proportional to that of the magnetic field strength with digital and analog output.
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    I chose the Hall Effect Sensor because the majority of water meters use a design called &ldquo;Dry Dial&rdquo;, which utilizes magnets to act as a clutch between the wet water flow chamber with the turbine and the dry chamber housing the gauge and associated gears. The hall effect sensor attaches onto an existing water meter to read the rotations of those magnets and to enable communications.
                </p>
                <h2>
                    How I built it
                </h2>
                <p>
                    In my video I demonstrated my solution using an existing residential water meter (one application of my solution out of many). Even though Advanced Meter Reading (AMR) technologies have been around for a decade or so, they do not implement long range communications. In fact, the City of Sachse, Texas, where I demonstrated my solution, recently installed new AMR meters just this past year and still are only broadcasting short range radio transmissions that are received by a meter reader driving by in a vehicle. With my solution we can calibrate the sensor to the flow rate specifications (how many gallons per magnet turn) and provision the sensor to connect to a central server via Wi-Fi, ZigBee, etc. Then the data from the sensor is processed by the Artik 10 (acting as the &ldquo;central server&rdquo;) and sent to IBM via SigFox or the internet via Wi-Fi to display the data on a webpage. From there we can apply this sensor node in multiple configurations or applications with minimal development overhead.
                </p>
                <h2>
                    Technical Information
                </h2>
                <p>
                    Please see the included flow diagram of my solution depicting this technical description.
My solution utilizes the Arduino framework on the Artik as a sensor node. Since I only have one Artik 10 at this time, I used a Adafruit Huzzah in place of an Artik 5 for my sensor node; I did include the source code for the Huzzah, but I also included the source code to run the Artik as the sensor node as well. The sensor node connects to a Wi-Fi network, to which the Artik 10 is connected as well. I used Wi-Fi as the prototype radio communication, however switching to another radio protocol is definitely possible. The sensor node (Artik 5 or Huzzah) reads the Hall Effect sensor and transmits MQTT messages via Wi-Fi to the Artik 10 running Mosquitto (MQTT Broker) and Node-Red (Node.js). The Artik 10 acts as a IOT hub (for multiple sensor nodes) and the JavaScript that Node-Red generated logs the MQTT messages in a file, and re-transmits the messages to IBM Bluemix (a cloud service) which is also running Node-Red which processes those messages stores them in a database, and presents a web page that currently is a simple gauge and log. In the next development phase, it will be able to generate reports and possibly control water valves. The Smart Water Meter Prototype is fully functioning with the ability to calibrate to various water flow meters.
                </p>
                <h2>
                    Challenges I ran into
                </h2>
                <p>
                    I ran into challenges at every turn it seems. The first was trying to plan for the entire system using the most effective tools available, with so many options it is overwhelming at first. The second challenge was amplifying the Hall Effect Sensor signal to a level that can penetrate water meter housings effectively, and consistently. The final challenge was working with interrupts on the Artik and sending MQTT messages out at the same time all while keeping an accurate measure of flow rate.
                </p>
                <h2>
                    Accomplishments that I'm proud of
                </h2>
                <p>
                    The entire project! Being able to work on this in my spare time required a lot of commitment. I had to learn about a lot of new protocols I have never used before, such as MQTT, TCP, and the Linux CLI interface. I am proud that I was able to complete an end to end solution for the first submission. I am proud of the way I set the project up so it can scale up with multiple sensor nodes, and used Node-Red in and out to be able to work with various communication protocols to be able to integrate with various platforms.
                </p>
                <h2>
                    What I learned
                </h2>
                <p>
                    I learned that systems engineering isn't as easy a previously thought! I built my project in way that can be expanded, and that entailed programming and planning in a way that is totally new to me. I also learned a lot about water meters and the various types out in the real world such as, Pulsed Output, Dry Dial, Digital, AMR, AMS, etc... and how to create a product that can simply attach to the existing meters to turn them into Smart IOT Water Meters with minimal cost upfront. I also learned that real water shutoff valves (gate valves) require a lot of torque and energy to engage, which is why I wasn't able to include that aspect of my project in this submission, maybe the next one if I am lucky! I also learned a lot about farm operations and how fine of a line the farmers are on financially and how delicate our food supply actually is! That is why I am so passionate about my project and want to see it implemented as a real product!
                </p>
                <h2>
                    Whats next for Smart Water Meter
                </h2>
                <p>
                    Another application example for my solution (to be completed during the Final Building Period) is comprised of two products that would help farmers conserve water during crop irrigation. As mentioned above, one product is the Hall Effect sensor with an Artik 5 attached to an existing water meter; the second is a new water meter with the Artik 5 and my sensor embedded into the meter&rsquo;s housing. These two options give users a cost effective choice when considering my solution for their operations. After speaking with multiple farmers about their water woes, I found that they tend to log information such as crop type, annual rotations, water absorption, water usage, and seasonal environmental factors for each plot of land. This helps them to determine what crop to plant on each plot and the minimum amount of irrigation each tract would need. Each type of soil absorbs and/or holds on to water differently. Even on a small scale you can have a farm that has different soil characteristics on each tract of land. Most importantly each area is considered stand-alone and is irrigated individually with their own watering system (imagine the circles on aerial images where crops are grown).  Those circles are created by farmers using Center Pivot Irrigation (CPI) systems. CPI&rsquo;s are becoming savvy in water conservation by introducing systems that farmers can configure to avoid irrigating certain areas of the plot, such as drainage ditches. While those improvements are great, measuring the flow on CPI devices is still mostly a manual process where farmers have to physically look at the meter if it has one. With my solution a farmer can install my sensor node in the water line (or on an existing meter) of the each of the CPI systems on their farm and have all of that data logged and sent via Wi-Fi, ZigBee, or whatever communication option best suits their needs, to a central Artik 10 acting as a IOT Hub connected to the internet via Wi-Fi, Cellular, or SigFox. Now the farmer can have a central dashboard accessible via a webpage displaying the sensor data (water usage), as well as the ability to enter data such as what type of crop is on each plot, and what the yields were. We can also pull weather data from local sensor extensions or from a weather service API's to display in the webpage. Now the farmer can make informed decisions on how to plant their crop next time to reduce irrigation requirements all while achieving cost effective crop yields. This irrigation reduction directly impacts the water resources by reducing the consumption of the supply.
                </p>
                <p>
                    Since my solution utilizes MQTT, it can receive information like temperature, wind, soil moisture, etc. from most existing products the farmers may have already installed. In addition, the Artik is capable of easily being configured via Node-Red to receive COAP, TCP, and various other messaging protocols. Lastly, my final product will include environmental sensor extension options available so the farmer will have all the information needed to make informed decisions in one central dashboard.
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/arduino">
                                arduino
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/artik">
                                artik
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/bluemix">
                                bluemix
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/cloudant">
                                cloudant
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/html5">
                                html5
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            iqp
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/json">
                                json
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            mqtt
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/node-red">
                                node-red
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/node-js">
                                node.js
                            </a>
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="http://watermeter.reddogalpha.com" rel="nofollow" target="_blank" title="http://watermeter.reddogalpha.com">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                watermeter.reddogalpha.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
