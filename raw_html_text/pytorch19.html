<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li>
                        <div class="flex-video">
                            <iframe allowfullscreen="allowfullscreen" allowscriptaccess="always" class="video-embed" frameborder="0" height="371" mode="transparent" src="https://www.youtube.com/embed/nPR1Iro2eZQ?enablejsapi=1&amp;hl=en_US&amp;rel=0&amp;start=&amp;version=3&amp;wmode=transparent" type="text/html" webkitallowfullscreen="true" width="660" wmode="transparent">
                            </iframe>
                        </div>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="838918" data-title="Discover Charities through sentence prediction and word embeddings, leveraging BERT and Pytorch" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/838/918/datas/original.png">
                            <img alt="YouCharity &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/838/918/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Discover Charities through sentence prediction and word embeddings, leveraging BERT and Pytorch
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h1>
                    YouCharity
                </h1>
                <p>
                    Intelligent charity search backed by BERT and Pytorch.
                </p>
                <p>
                    Check out and try via the demo site live here!
                    <a href="http://www.youcharity.xyz" rel="nofollow">
                        www.youcharity.xyz
                    </a>
                </p>
                <p>
                    Our model implements a document search using hugging-face's pytorch-transformers implementation of BERT.
                </p>
                <p>
                    Like other implementations of BERT for search (ex:
                    <a href="https://arxiv.org/abs/1901.04085" rel="nofollow">
                        https://arxiv.org/abs/1901.04085
                    </a>
                    ), we use a two step process:
                </p>
                <ul>
                    <li>
                        A fast search for candidate results
                    </li>
                    <li>
                        A slower but more accurate ranking step
                    </li>
                </ul>
                <p>
                    Unlike other methods, we leverage BERT for both steps, instead of just the second step.
                </p>
                <h2>
                    Candidate results
                </h2>
                <p>
                    To find candidate results, we split documents into sentences and run each through BERT.
                </p>
                <p>
                    To compute sentence representations, we mean pool the
                    <em>
                        earliest
                    </em>
                    layer of BERT. We found using the earliest layer performed best in returning results because it encodes more word level than sentence level semantics, which is more similar to the structure of queries.
                </p>
                <p>
                    Sentence encodings are precomputed and saved. The server loads these embeddings on startup.
                </p>
                <p>
                    Incoming queries are encoded with the same method as each sentence and are compared against sentence vectors using cosine similarity.
                </p>
                <p>
                    We average the most similar N=20 sentences for each document to get a similarity score for the document.
                </p>
                <h2>
                    Ranking
                </h2>
                <p>
                    To further improve results, we put the top candidate results through a ranking step.
                </p>
                <p>
                    The query string is concatenated with the full description for each document (using BERT's 2 sentence CLS-SEP-SEP encoding). The concatenated string is passed through a BERT model with a pretrained next sentence prediction classifier on top. The outputs of the classifier are then used to rank these most similar documents, returning the top ranked documents as results of the search.
                </p>
                <h2>
                    Running the web site
                </h2>
                <p>
                    From the
                    <code>
                        /web
                    </code>
                    folder, run the following commands:
                </p>
                <pre>  yarn
        yarn start
</pre>
                <p>
                    The website should now be running on port 3000.
                </p>
                <h2>
                    Running the server
                </h2>
                <ul>
                    <li>
                        Create a new virtualenv
                    </li>
                    <li>
                        Activate it
                    </li>
                </ul>
                <pre>  pip install -r requirements.txt`
</pre>
                <ul>
                    <li>
                        Run with
                        <code>
                            python app.py
                        </code>
                    </li>
                </ul>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag">
                            bert
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/css">
                                css
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/html">
                                html
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/javascript">
                                javascript
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/python">
                                python
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/pytorch">
                                pytorch
                            </a>
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/lukevs/charity-explorer" rel="nofollow" target="_blank" title="https://github.com/lukevs/charity-explorer">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
