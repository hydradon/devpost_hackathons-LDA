<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li class="text-center">
                        <a data-lightbox="388472" data-title="The team working during the night." href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/388/472/datas/original.jpg">
                            <img alt="AxiomZen - Mastermind API &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/388/472/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                The team working during the night.
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h1>
                    mastermind
                </h1>
                <p>
                    AxiomZen challenge on Vanhackathon
                </p>
                <p>
                    The challenge consists on creating an API that allows creation of mastermind games, waits for players to join and check their guesses.
                </p>
                <h1>
                    Requirements for local execution
                </h1>
                <ul>
                    <li>
                        Ruby 2.3.0
                    </li>
                    <li>
                        Rails 4.2.6
                    </li>
                    <li>
                        Postgresql
                    </li>
                </ul>
                <h1>
                    Executing on local machine
                </h1>
                <ol>
                    <li>
                        <code>
                            gem install bundler
                        </code>
                    </li>
                    <li>
                        <code>
                            bundle install
                        </code>
                    </li>
                    <li>
                        <code>
                            foreman start
                        </code>
                    </li>
                </ol>
                <h1>
                    Requirements for docker execution
                </h1>
                <ul>
                    <li>
                        Docker v1.11.1 or higher
                    </li>
                    <li>
                        Docker Compose v1.7.1 or higher
                    </li>
                </ul>
                <h1>
                    Executing on docker
                </h1>
                <ol>
                    <li>
                        Enter the directory of the project
                    </li>
                    <li>
                        Build the docker image with
                        <code>
                            docker build -t mastermind-api:v1 .
                        </code>
                    </li>
                    <li>
                        Start the service with
                        <code>
                            docker-compose up
                        </code>
                        or connect to the docker container with
                        <code>
                            docker-compose run --rm --service-ports api bash
                        </code>
                    </li>
                </ol>
                <h1>
                    API
                </h1>
                <p>
                    This project consists of the following APIs:
                </p>
                <h2>
                    POST /games
                </h2>
                <ul>
                    <li>
                        Creates a game;
                    </li>
                    <li>
                        Headers:
                        <ul>
                            <li>
                                Accept: application/json
                            </li>
                            <li>
                                Content-Type: application/json
                            </li>
                        </ul>
                    </li>
                    <li>
                        Input:
                        <ul>
                            <li>
                                player: Name of the player creating the game;
                            </li>
                            <li>
                                number_of_players: Number of people that will play the game. Defaults to
                                <code>
                                    1
                                </code>
                                ;
                            </li>
                            <li>
                                allow_repetition: Indicates if the code generated will have duplicated colors or not. Defaults to
                                <code>
                                    false
                                </code>
                                ;
                            </li>
                            <li>
                                max_turns: The max number of guesses each player will have. If it isn't present, the game will run on endless mode;
                            </li>
                            <li>
                                Example:
                                <code>
                                    { "player": "Player1", "number_of_players": 2, "allow_repetition": true, "max_turns": 10 }
                                </code>
                            </li>
                        </ul>
                    </li>
                    <li>
                        Output: check schema Game
                    </li>
                </ul>
                <h2>
                    GET /games/:game_key
                </h2>
                <ul>
                    <li>
                        Gets a game by game_key
                    </li>
                    <li>
                        Headers:
                        <ul>
                            <li>
                                Accept: application/json
                            </li>
                        </ul>
                    </li>
                    <li>
                        Input:
                        <ul>
                            <li>
                                game_key: Identifier of the game;
                            </li>
                            <li>
                                Example:
                                <code>
                                    /games/jHSZDdLHb3QpbRajXv9bzvCX
                                </code>
                            </li>
                        </ul>
                    </li>
                    <li>
                        Output: check schema Game
                        <ul>
                            <li>
                                There are no guesses in this response, except when the game is over;
                            </li>
                            <li>
                                Example:
                                <code>
                                    {"game_key":"NApe9saManED9vcqUsCSmf1u","status":"playing","number_of_players":2,"max_turns":10,"allow_repetition":true,"code_length":8,"colors":["R","B","G","Y","O","P","C","M"],"current_turn":1,"players":["GameMaster","John Doe"]}
                                </code>
                            </li>
                            <li>
                                Example of finished game:
                                <code>
                                    {"game_key":"NApe9saManED9vcqUsCSmf1u","status":"finished","number_of_players":2,"max_turns":10,"allow_repetition":true,"code_length":8,"colors":["R","B","G","Y","O","P","C","M"],"current_turn":11,"players":["GameMaster","John Doe"],"winner":null,"guesses":{"GameMaster":[{"code":"RRRRRRRR","exact":3,"near":0},{"code":"RRRRRRRR","exact":3,"near":0},{"code":"RRRRRRRR","exact":3,"near":0},{"code":"RRRRRRRR","exact":3,"near":0},{"code":"RRRRRRRR","exact":3,"near":0},{"code":"BBBBBBBB","exact":1,"near":0},{"code":"BBBBBBBB","exact":1,"near":0},{"code":"BBBBBBBB","exact":1,"near":0},{"code":"BBBBBBBB","exact":1,"near":0},{"code":"BBBBBBBB","exact":1,"near":0}],"John Doe":[{"code":"RRRRRRRR","exact":3,"near":0},{"code":"RRRRRRRR","exact":3,"near":0},{"code":"RRRRRRRR","exact":3,"near":0},{"code":"RRRRRRRR","exact":3,"near":0},{"code":"RRRRRRRR","exact":3,"near":0},{"code":"RRRRRRRR","exact":3,"near":0},{"code":"RRRRRRRR","exact":3,"near":0},{"code":"RRRRRRRR","exact":3,"near":0},{"code":"RRRRRRRR","exact":3,"near":0},{"code":"RRRRRRRR","exact":3,"near":0}]}}
                                </code>
                            </li>
                        </ul>
                    </li>
                </ul>
                <h2>
                    GET /games/availables
                </h2>
                <ul>
                    <li>
                        Gets all available games a player can enter
                    </li>
                    <li>
                        Headers:
                        <ul>
                            <li>
                                Accept: application/json
                            </li>
                        </ul>
                    </li>
                    <li>
                        Output: An array of available games. Check schema Game
                        <ul>
                            <li>
                                free_slots: present only in this API, shows how many more players can enter a game;
                            </li>
                            <li>
                                Example:
                                <code>
                                    [{"game_key":"g3sqc3e22BARHDA45rj7Ad2T","status":"waiting_for_players_to_join","number_of_players":2,"max_turns":10,"allow_repetition":true,"code_length":8,"colors":["R","B","G","Y","O","P","C","M"],"players":["GameMaster"],"free_slots":1}]
                                </code>
                            </li>
                        </ul>
                    </li>
                </ul>
                <h2>
                    POST /games/:game_key/players
                </h2>
                <ul>
                    <li>
                        Joins a game;
                    </li>
                    <li>
                        Headers:
                        <ul>
                            <li>
                                Accept: application/json
                            </li>
                            <li>
                                Content-Type: application/json
                            </li>
                        </ul>
                    </li>
                    <li>
                        Input:
                        <ul>
                            <li>
                                game_key: Identifier of the game;
                            </li>
                            <li>
                                player: Name of the player joining the game;
                            </li>
                            <li>
                                Example:
                                <code>
                                    { "player": "John Doe" }
                                </code>
                            </li>
                        </ul>
                    </li>
                    <li>
                        Output: check schema Game
                        <ul>
                            <li>
                                Example:
                                <code>
                                    {"game_key":"NApe9saManED9vcqUsCSmf1u","status":"playing","number_of_players":2,"max_turns":10,"allow_repetition":true,"code_length":8,"colors":["R","B","G","Y","O","P","C","M"],"current_turn":1,"players":["GameMaster","John Doe"],"player_key":"sGXdaw2pPhG91NT7TincTtVZ","my_guesses":[]}
                                </code>
                            </li>
                        </ul>
                    </li>
                </ul>
                <h2>
                    POST /players/:player_key/guesses
                </h2>
                <ul>
                    <li>
                        Makes a guess in a game with a given user;
                    </li>
                    <li>
                        Headers:
                        <ul>
                            <li>
                                Accept: application/json
                            </li>
                            <li>
                                Content-Type: application/json
                            </li>
                        </ul>
                    </li>
                    <li>
                        Input:
                        <ul>
                            <li>
                                player_key: Identifier of the game;
                            </li>
                            <li>
                                code: Guess made by the player
                            </li>
                            <li>
                                Example:
                                <code>
                                    { "code": "RBGRBGRB" }
                                </code>
                            </li>
                        </ul>
                    </li>
                    <li>
                        Output: check schema Game
                        <ul>
                            <li>
                                Example:
                                <code>
                                    {"game_key":"NApe9saManED9vcqUsCSmf1u","status":"playing","number_of_players":2,"max_turns":10,"allow_repetition":true,"code_length":8,"colors":["R","B","G","Y","O","P","C","M"],"current_turn":3,"players":["GameMaster","John Doe"],"player_key":"nbRkoTYHdVyP6TyRb5jvmvCP","my_guesses":[{"code":"RRRRRRRR","exact":3,"near":0},{"code":"RRRRRRRR","exact":3,"near":0}]}
                                </code>
                            </li>
                        </ul>
                    </li>
                </ul>
                <h2>
                    Schema Game
                </h2>
                <pre class="language-nolang"><code>- game_key: The identifier of the game;
- status: The current status of the game. Can be `waiting_for_players_to_join`, `playing` or `finished`;
- number_of_players: Number of players on the game;
- max_turns: The max number of guesses each player will have;
- allow_repetition: Indicates if the code generated will have duplicated colors or not;
- code_length: The length of the code that the players must guess;
- colors: Array of all colors possibles;
- current_turn: The current turn of guesses;
- players: Array of names of all players that joined the game. *Only present when the game has not finished*;
- player_key: The identifier of the player. *Only present when the game has not finished*;
- my_guesses: Array of guesses from the current player. Each entry contains the code inputed, the amount of exact and amount of near colors. *Only present when the game has not finished*;
- winner: Name of the winner of the game, if any. *Only present when the game has finished*;
- guesses: All guesses separated by user. *Only present when the game has finished*;
- Example: `{"game_key":"9nUdqDBHp1X6SbuxsF3tZSfM","status":"playing","number_of_players":2,"max_turns":10,"allow_repetition":true,"code_length":8,"colors":["R","B","G","Y","O","P","C","M"],"current_turn":1,"players":["GameMaster","John Doe"],"player_key":"JewMZX8mYcrAS3iNMFsWewbh","my_guesses":[{"code":"MOMGYBRY","exact":2,"near":1}]}`
</code></pre>
                <h1>
                    Jobs
                </h1>
                <p>
                    To avoid keeping old games open, after 5 minutes of inactivity the game will be closed. To do so, a job is being used. Whenever the game is updated, it schedules a job for the next 5 minutes, so it can check if there was any update during this time.
                </p>
                <h1>
                    Trying it out
                </h1>
                <p>
                    This application is currently hosted on Heroku. To test it, use the url
                    <code>
                        https://mastermind-challenge.herokuapp.com
                    </code>
                    in combination with the paths posted above.
Please note that the free account of Heroku allows only one active dyno at a time. Because of this, the games are not being closed due to inactivity. When testing locally, though, this works as intended.
                </p>
                <h1>
                    Testing the code
                </h1>
                <p>
                    To test the code, use the command
                    <code>
                        rspec spec
                    </code>
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/docker">
                                docker
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/postgresql">
                                postgresql
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/ruby-on-rails">
                                ruby-on-rails
                            </a>
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/BrunoRomes/mastermind" rel="nofollow" target="_blank" title="https://github.com/BrunoRomes/mastermind">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://mastermind-challenge.herokuapp.com" rel="nofollow" target="_blank" title="https://mastermind-challenge.herokuapp.com">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                mastermind-challenge.herokuapp.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
