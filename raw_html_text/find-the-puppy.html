<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li>
                        <div class="flex-video">
                            <iframe allowfullscreen="allowfullscreen" allowscriptaccess="always" class="video-embed" frameborder="0" height="371" mode="transparent" src="https://www.youtube.com/embed/1DKGNTqCr9o?enablejsapi=1&amp;hl=en_US&amp;rel=0&amp;start=&amp;version=3&amp;wmode=transparent" type="text/html" webkitallowfullscreen="true" width="660" wmode="transparent">
                            </iframe>
                        </div>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="583315" data-title="Find the Puppy" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/583/315/datas/original.jpg">
                            <img alt="Find the Puppy &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/583/315/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Find the Puppy
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="583301" data-title="Small House (easy game)" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/583/301/datas/original.png">
                            <img alt="Find the Puppy &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/583/301/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Small House (easy game)
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="583300" data-title="Medium House" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/583/300/datas/original.png">
                            <img alt="Find the Puppy &ndash; screenshot 3" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/583/300/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Medium House
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="583299" data-title="Large House (challenging game)" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/583/299/datas/original.png">
                            <img alt="Find the Puppy &ndash; screenshot 4" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/583/299/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Large House (challenging game)
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Inspiration
                </h2>
                <p>
                    Hide and Seek, playful puppies, and mazes. This super kid-friendly trifecta was the inspiration for Find the Puppy. Not only are they instantly appealing to children, but they also translate well into an interactive, voice-only experience. On top of that, picturing (simple) mazes in your head helps develop spatial visualization skills.
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    Alexa informs you that the puppy is hiding in one of the rooms in the house, and it&rsquo;s up to you to find him. You start in the entryway and move from room to room by telling Alexa where to go. Alexa tells you the color and direction of each door, along with the name of the room when you enter.
                </p>
                <p>
                    As you play, you hear sounds of the puppy barking, softly at first, and more loudly as you get closer.
                </p>
                <p>
                    When you find the puppy, a new card is added to your Alexa App, showing you the full layout of the house. The picture shows where the puppy was hiding and all the doors in their proper color, open or closed depending on where you went.
                </p>
                <h3>
                    Behind the scenes
                </h3>
                <p>
                    <img alt="Building a maze in a large house" data-canonical-url="https://derossi.com/large_reduced.gif" src="https://res.cloudinary.com/devpost/image/fetch/s--wMVI0ytk--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://derossi.com/large_reduced.gif">
                </p>
                <p>
                    The &ldquo;house&rdquo; is a simple maze, newly generated for every game. The skill starts with a grid based on the size of the house requested by the player: small, medium, or large. It then generates a random maze by making doorways in the walls between the rooms.
                </p>
                <p>
                    A few extra doors are added next. This makes the layout more realistic and creates the possibility of loops and shortcuts, which is less frustrating than having to completely backtrack along an unsuccessful path.
                </p>
                <p>
                    For medium and large houses, some rooms are enlarged by removing a wall. This makes the layout more interesting and slightly increases the challenge of mentally keeping track where you are.
                </p>
                <p>
                    Finally, the puppy&rsquo;s hiding place is selected, room names are assigned, and door colors are chosen.
                </p>
                <h2>
                    How I built it
                </h2>
                <p>
                    The skill is written entirely in Python, which is running with Apache using mod_wsgi. I used MySQL for the small amount of record keeping that was required.
                </p>
                <p>
                    One part of the code contains the
                    <code>
                        PuppyGame
                    </code>
                    and
                    <code>
                        Room
                    </code>
                    classes and handles all the maze generation and state management. Methods
                    <code>
                        PuppyGame.State()
                    </code>
                    and
                    <code>
                        PuppyGame.SetState()
                    </code>
                    are used by the code to return the game state in each Alexa Response and reload it when receiving each Alexa Request. This way the web services are entirely stateless, and Amazon keeps track of the state associated with each player session.
                </p>
                <p>
                    The second part supplies the WSGI interface, accepts Alexa Requests, and returns Alexa Responses. It also performs all the mandatory security checks, which I wrote from scratch rather than depend on external libraries (assuming I could find any).
                </p>
                <p>
                    The WSGI application also handles web requests for the Alexa App card images. When the Python code gets a request for the image, it loads the game state and generates the corresponding PNG image on the fly. This was also done in Python, using the Pillow library.
                </p>
                <h2>
                    Polish
                </h2>
                <p>
                    A lot of attention was paid to the details, to make the game as natural and fun as possible. Here are some of the things I did:
                </p>
                <ol>
                    <li>
                        <p>
                            Almost everything said by Alexa has many variations. This makes the dialog more natural and really helps avoid players getting bored by repetition. This was helped tremendously by the
                            <a href="http://www.makermusings.com/amazon-echo-utterance-expander/" rel="nofollow">
                                Amazon Echo Utterance Expander
                            </a>
                            . For example, this string
                        </p>
                        <pre class="language-nolang"><code>({}/You (/can) hear (the/your) puppy (/barking/waiting for you/in his hiding place) (very close/(/very) nearby/in the next room/just one room away). {}/{} (The/Your) (puppy sounds (/like he is)/puppy's hiding place (sounds/must be)/puppy must be hiding/is (/hiding)) very (near/nearby/close/close by).)
</code></pre>
                        <p>
                            expands into 137 unique ways to say the same thing.
                        </p>
                    </li>
                    <li>
                        <p>
                            Voice responses paint a consistent description of the environment and your actions. When you&rsquo;ve used a door, it is described as &ldquo;an open &lt;
                            <em>
                                color
                            </em>
                            &gt; door&rdquo; from that point onward. When you return to a room you&rsquo;ve already visited, Alexa says so, in a variety of ways, of course.
                        </p>
                    </li>
                    <li>
                        <p>
                            The maze generation ensures that no wall ever has more than one door, even in an elongated room. It also ensures that no room ever has more than one door of any given color.
                        </p>
                    </li>
                    <li>
                        <p>
                            To make it easier for new players, Find the Puppy doesn&rsquo;t ask what size house you want to play in until after you&rsquo;ve played the game three times.
                        </p>
                    </li>
                    <li>
                        <p>
                            Testing showed that players want to give directions before Alexa is done speaking, and the Echo isn&rsquo;t listening yet. By always ending every spoken response with, &ldquo;Which way?&rdquo;, children quickly learn they need to give their direction then, even if they had said it before, while Alexa was speaking.
                        </p>
                    </li>
                    <li>
                        <p>
                            All the basic built-in intents, such as
                            <code>
                                AMAZON.YesIntent
                            </code>
                            ,
                            <code>
                                AMAZON.RepeatIntent
                            </code>
                            , etc., are supported. It&rsquo;s much friendlier to accept a yes or no response when that&rsquo;s the natural thing to say, than to require a specific phrase. Because things like &ldquo;Yes&rdquo; can mean many different things in different contexts, but always map to the same intent, some careful state management is required.
                        </p>
                    </li>
                    <li>
                        <p>
                            There are some easter eggs of a sort in the game. When entering a room, Alexa
                            <em>
                                might
                            </em>
                            say something funny or relevant about the room. These extras are added with low probability, to occasionally give players something unexpected.
                        </p>
                    </li>
                </ol>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/alexa">
                                alexa
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            alexa-skill-kit
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/python">
                                python
                            </a>
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="http://amzn.to/2DAUmwr" rel="nofollow" target="_blank" title="http://amzn.to/2DAUmwr">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                amzn.to
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
