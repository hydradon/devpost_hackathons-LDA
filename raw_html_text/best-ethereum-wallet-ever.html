<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li>
                        <div class="flex-video">
                            <iframe allowfullscreen="allowfullscreen" allowscriptaccess="always" class="video-embed" frameborder="0" height="371" mode="transparent" src="https://www.youtube.com/embed/gIS2RVq_5R4?enablejsapi=1&amp;hl=en_US&amp;rel=0&amp;start=&amp;version=3&amp;wmode=transparent" type="text/html" webkitallowfullscreen="true" width="660" wmode="transparent">
                            </iframe>
                        </div>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="604036" data-title="wallet extension in brave with ledger nano plugged in" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/604/036/datas/original.png">
                            <img alt="best ethereum wallet ever &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/604/036/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                wallet extension in brave with ledger nano plugged in
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Inspiration
                </h2>
                <p>
                    As security geeks, we wanted a local Ethereum wallet with a small attack surface, a front-end easy enough for non-technical users to use securely, and hardware wallet support. None of the existing options met our needs; for instance:
                </p>
                <ol>
                    <li>
                        <p>
                            Mist still runs Chromium 54, which was released in April of last year, and thus is vulnerable to old Chromium vulnerabilities. In fact this caused them to issue a severe security alert recently:
                            <a href="https://blog.ethereum.org/2017/12/15/security-alert-chromium-vulnerability-affecting-mist-browser-beta/" rel="nofollow">
                                https://blog.ethereum.org/2017/12/15/security-alert-chromium-vulnerability-affecting-mist-browser-beta/
                            </a>
                            . Furthermore Mist runs without Chromium's renderer sandbox, so many high-severity vulnerabilities in Chromium are actually critical vulnerabilities in Mist that can lead to full system compromise. Mist's advice is "don't browse to untrusted websites", but it's unclear that non-technical users can practically follow this advice, since Mist makes it easy to browse to untrusted websites in their Electron interface.
                        </p>
                    </li>
                    <li>
                        <p>
                            MetaMask lacks hardware wallet support.
                            <a href="https://github.com/MetaMask/metamask-extension/issues/717" rel="nofollow">
                                https://github.com/MetaMask/metamask-extension/issues/717
                            </a>
                        </p>
                    </li>
                    <li>
                        <p>
                            wallet.ethereum.org is a remote website with poor XSS protection since it doesn't define a Content Security Policy. Furthermore, websites lack the same level of code integrity as apps since they are not signed/versioned and can be modified without detection by the server operator at any time. Thus an attacker only needs to compromise the wallet.ethereum.org web server in order to compromise its users' wallets. In addition, websites are prone to phishing attacks.
                        </p>
                    </li>
                    <li>
                        <p>
                            Same with MyEtherWallet, although they now have a Chrome extension. However, it's unclear whether to what extent the extension is stable or recommended. (See
                            <a href="https://github.com/kvhnuke/etherwallet/issues/1406#issuecomment-352719852" rel="nofollow">
                                https://github.com/kvhnuke/etherwallet/issues/1406#issuecomment-352719852
                            </a>
                            for instance.)
                        </p>
                    </li>
                    <li>
                        <p>
                            Parity runs a local web interface. This is a great approach but their app is not code-signed and previously on MacOS was downloaded over plain HTTP (
                            <a href="https://github.com/paritytech/homebrew-paritytech/issues/65" rel="nofollow">
                                https://github.com/paritytech/homebrew-paritytech/issues/65
                            </a>
                            ). It is also not the most friendly tool for non-technical users, since it requires downloading a command line tool (
                            <a href="https://paritytech.github.io/wiki/Setup" rel="nofollow">
                                https://paritytech.github.io/wiki/Setup
                            </a>
                            ) and running terminal commands.
                        </p>
                    </li>
                </ol>
                <p>
                    This state of affairs was concerning to us. You shouldn't have to be a security expert in order to have a secure Ethereum wallet!
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    We integrated an Ethereum wallet in Brave browser (
                    <a href="https://brave.com" rel="nofollow">
                        https://brave.com
                    </a>
                    ). All you have to do is install Brave and flip a switch to get a secure, local Ethereum wallet.
                </p>
                <p>
                    Features include:
                </p>
                <ul>
                    <li>
                        1-click wallet creation
                    </li>
                    <li>
                        Launch the wallet directly from the Brave toolbar
                    </li>
                    <li>
                        1-click shortcut to transfer funds from the ETH wallet into Brave's builtin BAT wallet
                    </li>
                    <li>
                        Keys are only stored client-side
                    </li>
                    <li>
                        Uses geth light sync by default, so you're synced in minutes (or even seconds if you're not on the ethdenver wifi).
                    </li>
                    <li>
                        Supports hardware wallets like Ledger and Trezor
                    </li>
                    <li>
                        Uses a strict Content-Security-Policy to defend against XSS (no inline scripts except those that are hash-whitelisted, no remote connections except to
                        <a href="https://min-api.cryptocompare.com" rel="nofollow">
                            https://min-api.cryptocompare.com
                        </a>
                        <a href="https://mini-api.cryptocompare.com" rel="nofollow">
                            https://mini-api.cryptocompare.com
                        </a>
                        )
                    </li>
                    <li>
                        All open source
                    </li>
                    <li>
                        Brave is up-to-date with the latest upstream Chromium release and enables sandboxing on all platforms
                    </li>
                    <li>
                        Automatically watches BAT token contract
                    </li>
                </ul>
                <h2>
                    How we built it
                </h2>
                <p>
                    We added three main new components to Brave:
                </p>
                <ol>
                    <li>
                        a geth binary, which is run as a subprocess of Brave. It is downloaded during the Brave build process.
                    </li>
                    <li>
                        a slightly-modified version of the wallet.ethereum.org front-end (which is also used in Mist):
                        <a href="https://github.com/ethereum/meteor-dapp-wallet" rel="nofollow">
                            https://github.com/ethereum/meteor-dapp-wallet
                        </a>
                        . Our fork is published as an open-source NPM package from
                        <a href="https://github.com/brave/meteor-dapp-wallet-prebuilt" rel="nofollow">
                            https://github.com/brave/meteor-dapp-wallet-prebuilt
                        </a>
                        and downloaded during the Brave build process.
                    </li>
                    <li>
                        a Brave extension which implements the local ETH wallet UI and the toolbar shortcuts.
                    </li>
                </ol>
                <p>
                    This is all implemented in
                    <a href="https://github.com/brave/browser-laptop/pull/13177" rel="nofollow">
                        https://github.com/brave/browser-laptop/pull/13177
                    </a>
                    .
                </p>
                <h2>
                    Challenges we ran into
                </h2>
                <p>
                    The wallet.ethereum.org front-end is built on Meteor, which was troublesome to use in a serverless Brave extension context. We had to patch it to work in
                    <code>
                        chrome-extension://
                    </code>
                    contexts (since Brave extensions use the same protocol as Chrome extensions). We also had to insert some hacks to make it possible to launch the 'Send Funds' page from a button click with a pre-populated address, since Meteor doesn't allow navigating to an endpoint unless the main app page is already loaded.
                </p>
                <p>
                    Figuring out how to bundle geth and the front-end in Brave was also challenging. We didn't want to check any binaries or obfuscated javascript bundles directly into the source tree so we had to figure out ways to download these components at build time.
                </p>
                <p>
                    We had some trouble at the end with launching geth wallet creation as a subprocess and passing in the user's wallet password securely. We also couldn't get ledger nanos to work with testnet.
                </p>
                <h2>
                    Accomplishments that we're proud of
                </h2>
                <p>
                    Above all we're proud to have a wallet that is basically functional and hassle-free to set up. We are especially proud that we were able to create a more secure wallet than existing solutions like wallet.ethereum.org and Mist by applying a content security policy, loading the code in a client-side package (that will eventually be code-signed when it's released as part of Brave browser), and rendering the web app in a sandboxed context that is up-to-date with Chromium. We are also proud that the app doesn't require users to download any command-line tools or understand the inner workings of geth. We hope this will allow users of diverse backgrounds to get started with using secure hardware Ethereum wallets.
                </p>
                <p>
                    Finally, as creators and users of Brave, we are super excited that Brave will have a builtin Ethereum wallet, hopefully making secure cryptocurrency management more accessible to folks who are already using Brave.
                </p>
                <h2>
                    What we learned
                </h2>
                <p>
                    We learned a lot about packaging geth and running it as a subprocess. We also learned how to write Brave extensions and include HTML files from an NPM package. In the process of coming up with this project, we learned some new things about security weaknesses in existing Ethereum wallets.
                </p>
                <h2>
                    What's next for best ethereum wallet ever
                </h2>
                <p>
                    We want to improve upon the wallet.ethereum.org UI by updating our fork of it to the latest web3, doing user studies, and figuring out how to make the UI more friendly for newbies. We also would like to build in wallet support for other cryptocurrencies, starting with Zcash. We also need to build in localization for non-English speaking users.
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag">
                            brave
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            geth
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/javascript">
                                javascript
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/meteor-js">
                                meteor.js
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            muon
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/brave/browser-laptop/pull/13177" rel="nofollow" target="_blank" title="https://github.com/brave/browser-laptop/pull/13177">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
