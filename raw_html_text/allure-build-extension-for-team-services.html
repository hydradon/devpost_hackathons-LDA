<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li>
                        <div class="flex-video">
                            <iframe allowfullscreen="allowfullscreen" allowscriptaccess="always" class="video-embed" frameborder="0" height="371" mode="transparent" src="https://www.youtube.com/embed/7YPGlr6tXQg?enablejsapi=1&amp;hl=en_US&amp;rel=0&amp;start=&amp;version=3&amp;wmode=transparent" type="text/html" webkitallowfullscreen="true" width="660" wmode="transparent">
                            </iframe>
                        </div>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="381561" data-title="Allure Extension in Marketplace" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/381/561/datas/original.png">
                            <img alt="Allure Extension for VSTS &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/381/561/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Allure Extension in Marketplace
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="381559" data-title="Allure Build Task Extension" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/381/559/datas/original.png">
                            <img alt="Allure Extension for VSTS &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/381/559/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Allure Build Task Extension
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="381554" data-title="Allure Report Overview" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/381/554/datas/original.png">
                            <img alt="Allure Extension for VSTS &ndash; screenshot 3" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/381/554/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Allure Report Overview
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="381553" data-title="Allure Report Behaviors" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/381/553/datas/original.png">
                            <img alt="Allure Extension for VSTS &ndash; screenshot 4" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/381/553/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Allure Report Behaviors
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="381552" data-title="Allure Report Graph" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/381/552/datas/original.png">
                            <img alt="Allure Extension for VSTS &ndash; screenshot 5" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/381/552/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Allure Report Graph
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Inspiration
                </h2>
                <p>
                    There are lots of cool testing frameworks for different programming languages. Unfortunately only few of them can provide good representation of test execution output. Allure is an open-source framework designed to create test execution reports clear to everyone in the team.
                </p>
                <p>
                    Our team members at
                    <a href="http://devpost.com/software/molecula-devops" rel="nofollow">
                        Molecula
                    </a>
                    have already used Allure framework while working on the other projects in the past. We used it with CI tools like Jenkins and Team City which are very popular in
                    <strong>
                        Java
                    </strong>
                    world. When we started working with
                    <strong>
                        Team Services
                    </strong>
                    we realized that such a great tool was still missing here. That's why we developed
                    <strong>
                        Allure Extension for VSTS
                    </strong>
                    which brings all the power of Allure framework to
                    <strong>
                        Visual Studio Online
                    </strong>
                    .
                </p>
                <h2>
                    Why we like Allure
                </h2>
                <p>
                    Reporting plays one of the most important roles in automation testing. If the author of the automated tests code could often understand the results of his tests without any report, for other team members it could be difficult. But this understanding is very valuable for all team members, even for managers.
                </p>
                <p>
                    In order to make the tests relevant it is required to be able to know when there's a failure and what caused it. Report must have human readable format that can help to diagnose test failures quickly. For example, report may contain not only the stacktraces of the code, but also the screenshots, video or the parts of the log file. It is also very useful (especially for the team managers), when you can inspect tests results grouped by features.
                </p>
                <p>
                    The general approach is to create an HTML report with test results and failure screenshots intertwined. But this is easier said than done since there is no proven standard - leaving us to code our own approach based on the test framework we are using.
                </p>
                <p>
                    By leveraging a language agnostic open-source library like the Allure Framework, we can easily generate a robust, human-readable HTML report from each of our test runs.
                </p>
                <p>
                    Please, check following video if you would like to know more about Allure Framework:
                    <a href="https://www.youtube.com/watch?v=xrlS-7mLm0E" rel="nofollow">
                        https://www.youtube.com/watch?v=xrlS-7mLm0E
                    </a>
                </p>
                <h2>
                    How it works
                </h2>
                <p>
                    <img alt="How Allure works" data-canonical-url="https://molecula.email/devpost/how-allure-extension-works-2.png" src="https://res.cloudinary.com/devpost/image/fetch/s--IR1Fy4OH--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://molecula.email/devpost/how-allure-extension-works-2.png">
                </p>
                <p>
                    To use Allure, it is required to gather the information about tests and then to generate a report. Gathering information about tests is performed during the automated tests execution. This information is saved to XML files with a predefined format. For this purpose, Allure provides so-called adapters - small libraries that are attached to particular test frameworks and know how to extract test information to XML. Allure already supports adapters for the most of popular languages and test frameworks.
                </p>
                <p>
                    <img alt="How Allure works 2" data-canonical-url="https://molecula.email/devpost/how-allure-extension-works.png" src="https://res.cloudinary.com/devpost/image/fetch/s--nLCjV7k4--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://molecula.email/devpost/how-allure-extension-works.png">
                </p>
                <p>
                    Allure report generation is performed using one of the available report building tools. In basic scenario there is a command line tool to generate the Allure report by running a console command. There are also the plugins for some popular build systems and tools, such as Jenkins, TeamCity, Bamboo, Maven, Gradle, etc, that allow to add the test report generation as an additional build step.
                </p>
                <p>
                    Allure report supports some additional features, such as grouping the tests by features, files attachments, issues and test management system links, assertions over a set of custom steps distribution, etc. All these features are available in Allure core, but their usage may differ from one Allure adapter to another.
                </p>
                <h2>
                    How it works in Team Services
                </h2>
                <p>
                    In order to bring Allure to Team Services we created an extension which uses few extension points of Team Services:
                </p>
                <ol>
                    <li>
                        <strong>
                            Custom Build Task Extension
                        </strong>
                        for report generation
                    </li>
                    <li>
                        <strong>
                            Custom Action
                        </strong>
                        for completed Builds to allow to view generated report
                    </li>
                    <li>
                        <strong>
                            Custom Settings hub
                        </strong>
                        in Project settings
                    </li>
                </ol>
                <p>
                    You can see how it works on the video and screenshots above.
                </p>
                <h2>
                    Challenges we ran into
                </h2>
                <p>
                    <strong>
                        1.
                    </strong>
                    The biggest challenge was to figure out how to store the report. For instance in Jenkins there is an option to save static files generated during the build and open them later in the browser using special link - that is exactly what we needed. Unfortunately, there is no such an option in Team Services, so we had to find another way. In the end we decided to move this out of scope of the extension and now you would need to set up your own website to store allure reports. We have added a
                    <a href="https://visualstudio.uservoice.com/forums/330519-team-services/suggestions/13580619-add-the-ability-to-display-html-pages-stored-as-ar" rel="nofollow">
                        new suggestion on UserVoice
                    </a>
                    and if the API evolves we may change this behaviour in the future.
                </p>
                <p>
                    <strong>
                        2.
                    </strong>
                    There is another strange problem with the build definition editing. Sometime if you add a custom build task installed with the third party extension (Allure for instance), save the build and open the edit form again after some time the custom task would just disappear. Unfortunately, we can not figure out how to reproduce it and it happens occasionally.
                </p>
                <p>
                    <strong>
                        3.
                    </strong>
                    There is very serious limitation in the current version of Team Services API for custom tabs. At the moment if you implement ms.vss-web.action with the target = ms.vss-build-web.completed-build-menu Team Services will pass the context about the selected build to the action handler. Using the context you can get all the required information about the build like BuildNumber, etc. Unfortunately, it is not the case for ms.vss-build-web.build-results-tab with the target = ms.vss-build-web.build-results-view. We have also submitted this case as a
                    <a href="https://visualstudio.uservoice.com/forums/330519-team-services/suggestions/13632966-pass-build-context-to-ms-vss-build-web-build-resul" rel="nofollow">
                        suggestion for improvement on Team Services User Voice
                    </a>
                    .
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/java">
                                java
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/javascript">
                                javascript
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            powershell
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            team-services
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/typescript">
                                typescript
                            </a>
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://marketplace.visualstudio.com/items?itemName=Molecula.allure-test-reports" rel="nofollow" target="_blank" title="https://marketplace.visualstudio.com/items?itemName=Molecula.allure-test-reports">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                marketplace.visualstudio.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
