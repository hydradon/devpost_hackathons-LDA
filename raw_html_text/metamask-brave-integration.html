<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li class="text-center">
                        <a data-lightbox="549397" data-title="MetaMask in Brave" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/549/397/datas/original.png">
                            <img alt="MetaMask Brave Integration &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/549/397/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                MetaMask in Brave
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Inspiration
                </h2>
                <p>
                    For this hackathon we wanted to make the Brave browser a first class citizen of the blockchain ecosystem. MetaMask extension support allows us to natively handle a wide range of previously deployed &ETH;Apps. We also wanted to build a proof of concept &ETH;App to test our MetaMask integration.
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    We added support for the MetaMask extension into the Bave browser, allowing the Brave browser to run &ETH;Apps.
                </p>
                <p>
                    We also added in independent detection for &ETH;Apps when the extension is not installed, and we display UI which prompts the user for a one click install of the extension when visiting a &ETH;Apps.
                </p>
                <h2>
                    How we built it
                </h2>
                <p>
                    To activate MetaMask, we implemented several missing Google Chrome extension APIs into the Brave browser in C++ and JavaScript.
                </p>
                <p>
                    After having these missing APIs, we were able to re-use the Chrome MetaMask extension.
                </p>
                <p>
                    We added functionality to the browser when the extension is not installed, to show an alert when a page contains the web3 javascript module.  The goal of doing this is to increase the amount of users that opt into installing the extension.
This detection was done in 2 ways:
A
                    <code>
                        web3
                    </code>
                    object exists on the page.
A
                    <code>
                        web3
                    </code>
                    object is assumed to exist as a global and is accessed.
                </p>
                <p>
                    We also attempted to build Android MetaMask support but were not successful.  Android does not have support for extensions so we attempted to use a service worker method.  We were able to webpack the code and inject it but it still had problems to work correctly.
                </p>
                <p>
                    We also built a proof of concept &ETH;App to verify the MetaMask integration.
                </p>
                <h2>
                    Challenges we ran into
                </h2>
                <p>
                    The code that needed to be written was not immediately obvious to us. We had to trace many code paths to ultimately build out our solution.
                </p>
                <p>
                    Detection of when there was a &ETH;App on the page was difficult because extensions in Chromium share a DOM but have 2 distinct JavaScript environments that can&rsquo;t be shared.  Some &ETH;Apps include their own web3 object, and other &ETH;Apps assume one exist, and both of those methods needed to be supported.
                </p>
                <p>
                    Integrating MetaMask into Android was not possible within the timeframe of the hackathon but a lot of progress was made for the future.
                </p>
                <h2>
                    Accomplishments that we're proud of
                </h2>
                <p>
                    We did a security audit on the code and we&rsquo;re planning to ship this support to our entire user base on desktop platforms on our next hotfix.
                </p>
                <p>
                    We&rsquo;re proud of asking the user to install MetaMask when a  &ETH;App is detected because it will mean a lot more users of MetaMask.
                </p>
                <p>
                    Shipping this feature to our user base will open up a wide set of applications previously not available to our users on the Brave browser.
                </p>
                <h2>
                    What we learned
                </h2>
                <p>
                    We learned the application lifecycle of the MetaMask extension, the workings of the web3.js module, and methods to retrieve information from the Ethereum blockchain, more about Solidity, service workers, JS proxy objects, and more.
                </p>
                <h2>
                    What's next for MetaMask Brave Integration
                </h2>
                <p>
                    We&rsquo;re planning to release in our next hotfix release currently scheduled for the start of this week.
                </p>
                <p>
                    In the future we&rsquo;ll work more on building mobile &ETH;App support for our Android and iOS browsers.  We may also look into supporting the mist API.
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag">
                            brave
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/c--3">
                                c++
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            extensions
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/javascript">
                                javascript
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            metamask
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/node-js">
                                node.js
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            web3
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://ethwaterloo.herokuapp.com/" rel="nofollow" target="_blank" title="https://ethwaterloo.herokuapp.com/">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                ethwaterloo.herokuapp.com
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/brave/browser-laptop/pull/11539" rel="nofollow" target="_blank" title="https://github.com/brave/browser-laptop/pull/11539">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/brave/muon/pull/344" rel="nofollow" target="_blank" title="https://github.com/brave/muon/pull/344">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/brave/muon/pull/295" rel="nofollow" target="_blank" title="https://github.com/brave/muon/pull/295">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/brave/browser-laptop/pull/11534" rel="nofollow" target="_blank" title="https://github.com/brave/browser-laptop/pull/11534">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/brave/browser-laptop/pull/11538" rel="nofollow" target="_blank" title="https://github.com/brave/browser-laptop/pull/11538">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
