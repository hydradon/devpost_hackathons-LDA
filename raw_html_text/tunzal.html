<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li>
                        <div class="flex-video">
                            <iframe allowfullscreen="allowfullscreen" allowscriptaccess="always" class="video-embed" frameborder="0" height="371" mode="transparent" src="https://www.youtube.com/embed/9Lxm5o8BsM8?enablejsapi=1&amp;hl=en_US&amp;rel=0&amp;start=&amp;version=3&amp;wmode=transparent" type="text/html" webkitallowfullscreen="true" width="660" wmode="transparent">
                            </iframe>
                        </div>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="828844" data-title="logo" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/844/datas/original.png">
                            <img alt="Tunzal &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/844/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                logo
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="828841" data-title="tunzal.ml landing page" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/841/datas/original.png">
                            <img alt="Tunzal &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/841/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                tunzal.ml landing page
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="828863" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/863/datas/original.png">
                            <img alt="Tunzal &ndash; screenshot 3" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/863/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="828843" data-title="features" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/843/datas/original.png">
                            <img alt="Tunzal &ndash; screenshot 4" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/843/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                features
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="828840" data-title="demo video " href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/840/datas/original.png">
                            <img alt="Tunzal &ndash; screenshot 5" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/840/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                demo video
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="828854" data-title="lnd node" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/854/datas/original.png">
                            <img alt="Tunzal &ndash; screenshot 6" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/854/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                lnd node
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="828855" data-title="lnd node" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/855/datas/original.png">
                            <img alt="Tunzal &ndash; screenshot 7" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/855/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                lnd node
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="828842" data-title="token generation page" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/842/datas/original.png">
                            <img alt="Tunzal &ndash; screenshot 8" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/842/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                token generation page
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="828851" data-title="activate token" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/851/datas/original.png">
                            <img alt="Tunzal &ndash; screenshot 9" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/851/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                activate token
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="828850" data-title="list token" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/850/datas/original.png">
                            <img alt="Tunzal &ndash; screenshot 10" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/850/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                list token
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="828853" data-title="release" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/853/datas/original.png">
                            <img alt="Tunzal &ndash; screenshot 11" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/853/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                release
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="828862" data-title="command" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/862/datas/original.png">
                            <img alt="Tunzal &ndash; screenshot 12" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/862/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                command
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="828852" data-title="refund" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/852/datas/original.png">
                            <img alt="Tunzal &ndash; screenshot 13" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/828/852/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                refund
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Inspiration
                </h2>
                <p>
                    While getting started with lightning network, I got to know about custodial wallets but they lacked features and involved trusting the third party. I looked into BTCPayServer but they didn't allow generating a lightning invoice for third party merchants. On telegram @t.me/btcpayserver, roughdust61F helped me understand the lightning network and different ways of generating the invoices. He also introduced me to opennode. Around this time, I got to know about sphinx PR in lnd implementation. Sphinx feature enabled sending payment without generating the invoice, this is one step closer in direction of lightning network's adoption as a micropayment processing solution.
                </p>
                <p>
                    I decided to self-host lnd server for getting access to all the experimental features including sphinx. While setting up lnd nodes, I got help from lightninglabs slack. There @moli cleared my doubts and updated me on the current progress of lnd and completed BOLTs. I got to know Sphinx is more of a PR than an actual feature and suggested looking at suredbits for getting idea of how time based payment works. I wanted to learn more about local endpoint tunnel solution and I also found a article on zero amount invoices. So, I combine these ideas with a usage-based business model.
                </p>
                <p>
                    The dashboard is available at
                    <a href="https://tunzal.ml" rel="nofollow">
                        https://tunzal.ml
                    </a>
                    .
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    Tunzal is a tunneling solution to expose local endpoint outside of the private network. User can use subdomains of tunzal.ml as their public endpoint. The request coming to the public endpoint will be reverse proxied to local services running on their system. This service is similar to ngrok or agro from Cloudflare. Here, we enable users to use their desired subdomain for a premium fee. The premium feature is available for a cost on hr, day, month or year basis.
                </p>
                <p>
                    Here we have tried to move from
                    <code>
                        subscription-based model
                    </code>
                    to
                    <code>
                        usage-based model
                    </code>
                    , by allowing the users to get refunded if they like to discontinue the service or they no longer need it. This is enabled by using the lightning network and its unique feature of enabling micropayment. Currently, in the lightning network, if we want to send the payment to the recipient then firstly recipient has to generate the invoice with the amount specified. Apart from cost specified invoices, the lightning network allows one to generate
                    <code>
                        zero amount invoice
                    </code>
                    . Using zero amount invoice, one can send any amount to the recipient. We have used this to implement a refund mechanism in our service. While generating a secret token for our service, users can specify the zero amount invoice. So, when the user raises the request for a refund, the bitcoin will be transferred back to the user via this invoice. The amount for refund is determined by subtracting usage time in minutes from the total amount(in satoshis) paid for service.
                </p>
                <p>
                    Now for an example: if the user purchases
                    <code>
                        plan A
                    </code>
                    for 1 hr with 60 satoshis. If he uses our service for 20 minutes and raises the request within 60 minutes time frame then he is refunded 40 satoshis. Though if he misses this time frame, no refund is provided. This is because, when generating an invoice, expiration time must be specified. As a result, when generating the zero amount invoice(ZCI) if the user-specified 60*60 seconds then that invoice is only valid for one hr. So, here we assume the expiration of ZCI to be equal to the selected
                    <code>
                        PLAN
                    </code>
                    duration.
                </p>
                <h2>
                    How I built it
                </h2>
                <ul>
                    <li>
                        For lightning network node, we are using lnd implementation from lightninglabs.
                    </li>
                    <li>
                        Neutrino client for connecting with blockchain layer.
                    </li>
                    <li>
                        For generating the subdomains of tunzal.ml we are using DNS zone of azure nameservers.
                    </li>
                    <li>
                        The backend API server is connected to mongo for token storage, and execs grpc on the lnd.
                    </li>
                </ul>
                <p>
                    <img alt="" data-canonical-url="https://raw.githubusercontent.com/harsh-98/tunzal/master/assets/sequence_diagram.png" src="https://res.cloudinary.com/devpost/image/fetch/s--HgSpnReO--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://raw.githubusercontent.com/harsh-98/tunzal/master/assets/sequence_diagram.png">
                </p>
                <ul>
                    <li>
                        Authentication to the dashboard is via blockstack OAuth.
                    </li>
                    <li>
                        Generating token, buying a plan, activating token and getting refunded is done via the dashboard.
                    </li>
                    <li>
                        Once a token is activated, the user can download the tunzal client software from our website. And run client software - as shown below:
                        <code>
                            tunzalctl --upstream subdomain=&lt;local-endpoint&gt; -t &lt;api-token&gt;
                        </code>
                    </li>
                    <li>
                        After usage, a refund request can be raised on the dashboard.
                    </li>
                </ul>
                <h2>
                    Challenges I ran into
                </h2>
                <ul>
                    <li>
                        A lot of learning. I have been involved with blockchain for past one year. But Bitcoin was a new domain for me.
                    </li>
                    <li>
                        Setting up lnd, BTCPayServer and working with macaroons.
                    </li>
                    <li>
                        Blockstack CORS error.
                    </li>
                    <li>
                        Testing experimental features of lightning network.
                    </li>
                </ul>
                <h2>
                    Accomplishments that I'm proud of
                </h2>
                <ul>
                    <li>
                        Though I have been in crypto space for past 1 year, this was my first in-depth interaction with bitcoin and lightning network. I was able to create the within 3-4 days.
                    </li>
                    <li>
                        I researched for the idea and looked at a lot of projects related to lightning network. I did about 7-8 days of research and learning before beginning to code.
                    </li>
                    <li>
                        Got to interactive with BTCPayServer, lightninglabs and blockstack members.
                    </li>
                </ul>
                <h2>
                    What I learned
                </h2>
                <ul>
                    <li>
                        About Lightning network and micropayment
                    </li>
                    <li>
                        Current landscape for lightning network and what all is possible
                    </li>
                    <li>
                        Setting lnd  and neutrino and electrum wallets
                    </li>
                    <li>
                        About  P2PKH, P2SH, P2PK, P2WPKH, P2WSH
                    </li>
                    <li>
                        Sphinx experimental feature
                    </li>
                </ul>
                <h2>
                    What's next for Tunzal
                </h2>
                <ul>
                    <li>
                        Scaling it
                    </li>
                    <li>
                        Learning more about micropayments enabled by ligtning network
                    </li>
                    <li>
                        Shifting to bitcoin livenet from testnet
                    </li>
                    <li>
                        Exploring different architectures of tunneling solutions
                    </li>
                </ul>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/blockchain">
                                blockchain
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/blockstack">
                                blockstack
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/golang">
                                golang
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            lnd
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/node-js">
                                node.js
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/react">
                                react
                            </a>
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://tunzal.ml" rel="nofollow" target="_blank" title="https://tunzal.ml">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                tunzal.ml
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/harsh-98/tunzal" rel="nofollow" target="_blank" title="https://github.com/harsh-98/tunzal">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
