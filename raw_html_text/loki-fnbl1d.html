<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li>
                        <div class="flex-video">
                            <iframe allowfullscreen="allowfullscreen" allowscriptaccess="always" class="video-embed" frameborder="0" height="371" mode="transparent" src="https://www.youtube.com/embed/yc8onq_Diak?enablejsapi=1&amp;hl=en_US&amp;rel=0&amp;start=&amp;version=3&amp;wmode=transparent" type="text/html" webkitallowfullscreen="true" width="660" wmode="transparent">
                            </iframe>
                        </div>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="586459" data-title="CoreML Trainer - captures our supervised training data" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/586/459/datas/original.JPG">
                            <img alt="Loki &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/586/459/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                CoreML Trainer - captures our supervised training data
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="586457" data-title="CoreML Test - integrates our ML model into our iOS app capturing real-time emotions" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/586/457/datas/original.JPG">
                            <img alt="Loki &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/586/457/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                CoreML Test - integrates our ML model into our iOS app capturing real-time emotions
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="586456" data-title="CoreML Test - integrates our ML model into our iOS app capturing real-time emotions" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/586/456/datas/original.JPG">
                            <img alt="Loki &ndash; screenshot 3" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/586/456/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                CoreML Test - integrates our ML model into our iOS app capturing real-time emotions
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="586455" data-title="CoreML Sync - fetches the latest model from our backend server" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/586/455/datas/original.JPG">
                            <img alt="Loki &ndash; screenshot 4" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/586/455/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                CoreML Sync - fetches the latest model from our backend server
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="586458" data-title="Demo - simulates social media app. The continuous feed reflects the users' reactions" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/586/458/datas/original.JPG">
                            <img alt="Loki &ndash; screenshot 5" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/586/458/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Demo - simulates social media app. The continuous feed reflects the users' reactions
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Inspiration
                </h2>
                <p>
                    We were inspired to build Loki to illustrate the plausibility of social media platforms tracking user emotions to manipulate the content (and advertisements) that they view.
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    Loki presents a news feed to the user much like other popular social networking apps. However, in the background, it uses iOS&rsquo; ARKit to gather the user&rsquo;s facial data. This data is piped through a neural network model we trained to map facial data to emotions. We use the currently-detected emotion to modify the type of content that gets loaded into the news feed.
                </p>
                <h2>
                    How we built it
                </h2>
                <p>
                    Our project consists of three parts:
                </p>
                <ol>
                    <li>
                        Gather training data to infer emotions from facial expression
                        <ul>
                            <li>
                                We built a native iOS application view that displays the 51 facial attributes returned by ARKit.
                            </li>
                            <li>
                                On the screen, a snapshot of the current face can be taken and manually annotated with one of four emotions [happiness, sadness, anger, and surprise]. That data is then posted to our backend server and stored in a Postgres database.
                            </li>
                        </ul>
                    </li>
                    <li>
                        Train a neural network with the stored data to map the 51-dimensional facial data to one of four emotion classes. Therefore, we:
                        <ul>
                            <li>
                                Format the data from the database in a preprocessing step to fit into the purely numeric neural network
                            </li>
                            <li>
                                Train the machine learning algorithm to discriminate different emotions
                            </li>
                            <li>
                                Save the final network state and transform it into a mobile-enabled format using CoreMLTools
                            </li>
                        </ul>
                    </li>
                    <li>
                        Use the machine learning approach to discreetly detect the emotion of iPhone users in a Facebook-like application.
                        <ul>
                            <li>
                                The iOS application utilizes the neural network to infer user emotions in real time and show post that fit the emotional state of the user
                            </li>
                            <li>
                                With this proof of concept we showed how easy applications can use the camera feature to spy on users.
                            </li>
                        </ul>
                    </li>
                </ol>
                <h2>
                    Challenges we ran into
                </h2>
                <p>
                    One of the challenges we ran into was the problem of converting the raw facial data into emotions. Since there are 51 distinct data points returned by the API, it would have been difficult to manually encode notions of different emotions. However, using our machine learning pipeline, we were able to solve this.
                </p>
                <h2>
                    Accomplishments that we're proud of
                </h2>
                <p>
                    We&rsquo;re proud of managing to build an entire machine learning pipeline that harnesses CoreML &mdash; a feature that is new in iOS 11 &mdash; to perform on-device prediction.
                </p>
                <h2>
                    What we learned
                </h2>
                <p>
                    We learned that it is remarkably easy to detect a user&rsquo;s emotion with a surprising level of accuracy using very few data points, which suggests that large platforms could be doing this right now.
                </p>
                <h2>
                    What's next for Loki
                </h2>
                <p>
                    Loki is currently not saving any new data that it encounters. One possibility is for the application to record the expression of the user mapped to the social media post. Another possibility is to expand on our current list of emotions (happy, sad, anger, and surprise) as well as train on more data to provide more accurate recognition. Furthermore, we can utilize the model&rsquo;s data points to create additional functionalities.
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/amazon-web-services">
                                amazon-web-services
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            arkit
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            coreml
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/flask">
                                flask
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/ios">
                                ios
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            keras
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/machine-learning">
                                machine-learning
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/postgresql">
                                postgresql
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/python">
                                python
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/swift">
                                swift
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/xcode">
                                xcode
                            </a>
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/nwhacks-loki" rel="nofollow" target="_blank" title="https://github.com/nwhacks-loki">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
