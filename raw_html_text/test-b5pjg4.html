<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li>
                        <div class="flex-video">
                            <iframe allowfullscreen="allowfullscreen" allowscriptaccess="always" class="video-embed" frameborder="0" height="371" mode="transparent" src="https://www.youtube.com/embed/bMaq5LnW4b8?enablejsapi=1&amp;hl=en_US&amp;rel=0&amp;start=&amp;version=3&amp;wmode=transparent" type="text/html" webkitallowfullscreen="true" width="660" wmode="transparent">
                            </iframe>
                        </div>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="417184" data-title="Species-level coverage of GBIF data for Amphibians: global variation in average annual coverage, and temporal trends in Portugal" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/417/184/datas/original.png">
                            <img alt="GBIF Coverage Assessment Tools &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/417/184/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Species-level coverage of GBIF data for Amphibians: global variation in average annual coverage, and temporal trends in Portugal
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="417185" data-title="Assemblage-level coverage by GBIF data for bumblebees, averaged across years and countries" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/417/185/datas/original.png">
                            <img alt="GBIF Coverage Assessment Tools &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/417/185/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Assemblage-level coverage by GBIF data for bumblebees, averaged across years and countries
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="417186" data-title="Assemblage-level coverage of GBIF data for bumblebees, at grid cell level and averaged across years" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/417/186/datas/original.png">
                            <img alt="GBIF Coverage Assessment Tools &ndash; screenshot 3" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/417/186/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Assemblage-level coverage of GBIF data for bumblebees, at grid cell level and averaged across years
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="417187" data-title="Assemblage-level coverage of GBIF data for bumblebees, annual trend for France" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/417/187/datas/original.png">
                            <img alt="GBIF Coverage Assessment Tools &ndash; screenshot 4" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/417/187/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Assemblage-level coverage of GBIF data for bumblebees, annual trend for France
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <p>
                    URL:
                    <a href="https://mol.org/indicators/coverage" rel="nofollow">
                        https://mol.org/indicators/coverage
                    </a>
                </p>
                <h2>
                    Inspiration
                </h2>
                <p>
                    Primary species occurrence records as mediated through GBIF are essential for a detailed understanding of the distribution of biodiversity in space and time. Yet, despite an impressive recent growth and now hundreds of millions of accessible records, the ability of this vast information to represent biodiversity and its change has remained largely unquantified. In the case of a relatively small and species-poor region, a small number of records may effectively characterize the distribution of species or composition of assemblages year after year. In contrast, in the case of a large and hyperdiverse region, even a large number of records may only poorly do so, especially if data is repeatedly coming from just a small portion of species, locations, or years.
                </p>
                <p>
                    Consequently, assessment of how well GBIF-mediated data represent species ranges or assemblage make-up over time, or how well-suited those data are for associated modeling and inference, requires information about an expectation: How well are mobilized data actually representing expected taxonomic, spatial, and temporal variation in biodiversity? Recent research by members of our team developed the use of expert-based information for this purpose (
                    <a href="http://www.nature.com/ncomms/2015/150907/ncomms9221/full/ncomms9221.html" rel="nofollow">
                        Meyer, C., H. Kreft, R. Guralnick, and W. Jetz. 2015. Global priorities for an effective information basis of biodiversity distributions. Nature communications 6: 8221
                    </a>
                    ).
                </p>
                <p>
                    For the Ebbe Nielsen Challenge, we, over the past couple of months, developed a suite of novel informatics tools and services that build on these concepts and report, spatially explicit, on temporal trends in data gaps and biases among countries. The concepts behind our metrics have been have been endorsed as sound quantification of species occurrence data gaps (&ldquo;Species Status Information Index&rdquo;) by GEO BON (
                    <a href="http://geobon.org/geo-bon-presents-a-new-generation-of-biodiversity-indicators-at-cbd-ahteg" rel="nofollow">
                        http://geobon.org/geo-bon-presents-a-new-generation-of-biodiversity-indicators-at-cbd-ahteg
                    </a>
                    ), and recently IPBES and the CBD (
                    <a href="https://www.cbd.int/doc/strategic-plan/strategic-plan-indicators-en.pdf" rel="nofollow">
                        https://www.cbd.int/doc/strategic-plan/strategic-plan-indicators-en.pdf
                    </a>
                    ). After initial offline explorations for just a few taxa and continental resolution, it was over the summer, triggered by the  Ebbie Nielsen competition, that we decided to take the metrics to country scale and annual resolution, extend them flexibly to many more taxa, and build interactive visualizations and embeddable components and services. 
We designed these tools with components embeddable in partner websites and with the potential of automated country reports that in collaboration with GBIF could be built out to be near-real-time.
Information about gaps and biases in this coverage, and how successful countries and their institutions are in closing them is vital. It can help identify priority targets for data collection and mobilization, inform about the suitability of data for modeling and inference.
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    The GBIF Coverage Tools characterize coverage of data mobilized for a given species group, country and year by setting it in relation to expert expectation across a standardized grid. Two metrics are calculated:
                </p>
                <p>
                    <strong>
                        <em>
                            Species-level Coverage
                        </em>
                    </strong>
                    measures how well, on average, GBIF-mediated data characterize the broad distributions of species. Specifically, it is the proportion of grid cells expectedly occupied by a species with records in a given year, averaged across all species in a country. In a given year, a value of 1.00 would suggest that at least one record is available for every range cell of all species occurring in a country, i.e. a complete species distribution coverage for this spatial resolution.
                </p>
                <p>
                    <strong>
                        <em>
                            Assemblage-level Coverage
                        </em>
                    </strong>
                    measures how well, on average, GBIF-mediated data characterize the makeup of grid cell assemblages. Specifically, it is the proportion of species expected to occur in a cell that have been recorded in a given year, averaged across all cells in a country. In a given year, a value of 1.00 would suggest that at least one record is available for all species expected in each of a country&rsquo;s grid cells, i.e. complete assemblage structure coverage for this spatial resolution. This metric can be shown as country average or for individual cells to learn about within-country data gaps and biases that may inform future sampling and mobilization.
                </p>
                <p>
                    The two metrics convey distinct messages. The magnitude and temporal trends in a country&rsquo;s Species-level Coverage inform about how well it&rsquo;s mobilized data may be suited for characterizing species distributions and their changes over time for a given species group (directly, or through modeling). In contrast, the &lsquo;Assemblage-level Coverage&rsquo; measure would relate questions about the status and changes in the makeup of communities, and their associated aggregate functions.
                </p>
                <p>
                    Calculations are performed over a standardized global grid of ca. 150-km resolution at the equator for which expert expectations are deemed broadly reliable (see
                    <a href="http://www.pnas.org/content/104/33/13384.full" rel="nofollow">
                        Hurlbert, A. H., and W. Jetz. 2007. Species richness, hotspots, and the scale dependence of range maps in ecology and conservation. PNAS 104:13384-13389
                    </a>
                    ). Expert expectation information is pulled in from Map of Life, and for the sources used assumed to be broadly characteristic for the past 35 years. We carefully developed synonym lists to match species names in GBIF-mediated data to names used for the expert information. We note, however, several caveats: expert maps may suffer from errors of omission and commission that even at this coarse spatial resolution may slightly affect metric values; the currently used grid is not equal-area; taxonomic mismatches may remain in the data. In future updates, we plan to replace expert maps with increasingly sophisticated multi-source, modeled maps, move to an equal area grid, and further improve the synonym match-up.
                </p>
                <h2>
                    How we built it
                </h2>
                <p>
                    Efficiently intersecting GBIF&rsquo;s half a billion point records with the 45,000+ species expert polygons (from Map of Life, MOL) and country data presented our largest challenge. Performing these intersections via our Postgres/PostGIS backend proved to be quite slow and error prone, so a more scalable approach was needed. To solve this, we encoded location data from both datasets using the geohash algorithm.
                </p>
                <p>
                    Google&rsquo;s BigQuery data archiving and analysis system was used to quickly calculate geohashes across all GBIF records and aggregate by species and year to lower precision (3 geohash characters, ~156 km resolution at the equator). Species range and region (country) polygons were filled using PostGIS geohash functions in the Map of Life Postgres backend. Final queries to generate statistics shown in the UI were then run in Postgres and exported to the Carto mapping service, which serves maps and data through an API to a JavaScript driven front-end.
                </p>
                <h2>
                    What's next
                </h2>
                <p>
                    We look forward to building significantly on this initial set of tools developed for the Ebbe Nielsen Challenge. These include extensions of the taxonomic coverage, improvements to the scientific rigor, inclusion of additional knowledge dimensions, reporting to the mobile app, and misc. design, reporting, and performance improvements.
                </p>
                <p>
                    In the coming weeks and months we will add a variety of taxonomic groups. These include specific plant groups and also all plants (providing the assemblage-level metric and using gridded modelled-plant species richness as expectation). We will also add miscellaneous marine taxa and work with OBIS to also include their data. Several other invertebrate groups are also on the horizon.
                </p>
                <ul>
                    <li>
                        <p>
                            We plan to soon move to an
                            <strong>
                                equal area grid
                            </strong>
                            that overcomes some of the uneven sample size issues that arise from using a geographical grid. Further, although geohashes serve the current purpose well, a better spherical representation of the globe with faster intersection and proximity query support can be achieved using the S2 geometry library. Developed at Google, S2 efficiently covers the globe with near-equal area cells using a space-filling curve similar to geohash. Regions as large as 1/6th of the globe down to a square centimeter can be represented via a single 64 bit integer. Unlike geohash, cells are of approximately the same size on the ground at a given precision level, and precision can be determined via simple bit math. We intend to use this technique to build a spatio-temporal index of all data in Map of Life that can support high precision intersections at scale. This will allow MOL to support higher polygon detail and higher precision point data in the calculations, to produce more accurate and timely metrics.
                        </p>
                    </li>
                    <li>
                        <p>
                            Over the next 3-9 months we will add an additional knowledge dimension:
                            <strong>
                                environmental data gaps
                            </strong>
                            . In the initially intended version, we will use the environmental conditions of the same grid cells over which we are currently reporting to evaluate how the (spatial) data gaps result environmental data biases. We foresee including these metrics and visualizations in the same web interface in the form of relative coverage of environmental space. This should be highly useful in particular for data selection and interpretation in a species distribution modeling context.
                        </p>
                    </li>
                    <li>
                        <p>
                            We will build on the APIs developed for this challenge to communicate assemblage level coverage metrics to users of the Map of Life
                            <a href="https://mol.org/mobile" rel="nofollow">
                                <strong>
                                    mobile app
                                </strong>
                            </a>
                            . The Map of Life mobile application is uniquely positioned to help fill gaps in GBIF made discoverable via the inventory completeness interface, and completeness datasets produced by MOL. Localized completeness data can be synced to the application and then queried offline using geohash-driven intersections. Geofencing techniques can be used to drive user-submissions  by alerting users to knowledge gaps as they browse the map or visit them on the ground. Submissions can then be rapidly integrated into the dataset to support near-realtime updates.
                        </p>
                    </li>
                    <li>
                        <p>
                            We plan to make a variety of improvements to the
                            <strong>
                                web interface design and reporting
                            </strong>
                            . Specifically, we aim to develop printable country reports that summarize the status and trends in both coverage metrics and that can readily be used by various stakeholders, alongside the raw data mobilization trends provided by GBIF (
                            <a href="http://www.gbif.org/analytics/country/about" rel="nofollow">
                                http://www.gbif.org/analytics/country/about
                            </a>
                            ). We will add various download functions to the website and provide example code for embedding components or tapping into the API.
                        </p>
                    </li>
                    <li>
                        <p>
                            Our
                            <strong>
                                data processing pipeline
                            </strong>
                            can be further improved and integrated with GBIF to maintain near-realtime updates of the completeness dataset. Daily GBIF dumps can be processed or streaming mechanisms from GBIF can be supported using scalable data processing pipeline tools such as Apache Beam (Cloud Dataflow).
                        </p>
                    </li>
                </ul>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag">
                            angular-ui
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/angular-js">
                                angular.js
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/bootstrap">
                                bootstrap
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            carto
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/github">
                                github
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/google-bigquery">
                                google-bigquery
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/google-compute-engine">
                                google-compute-engine
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/javascript">
                                javascript
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/python">
                                python
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            sql-(postgres-and-bigquery)
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            webapp2
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://mol.org/EbbeNielsen/" rel="nofollow" target="_blank" title="https://mol.org/EbbeNielsen/">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                mol.org
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/MapofLife/indicators" rel="nofollow" target="_blank" title="https://github.com/MapofLife/indicators">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://drive.google.com/file/d/0B6mmFORtcuSAU25sdkRPSm03SVE/view" rel="nofollow" target="_blank" title="https://drive.google.com/file/d/0B6mmFORtcuSAU25sdkRPSm03SVE/view">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                drive.google.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
