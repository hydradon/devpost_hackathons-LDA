<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li>
                        <div class="flex-video">
                            <iframe allowfullscreen="allowfullscreen" allowscriptaccess="always" class="video-embed" frameborder="0" height="371" mode="transparent" src="https://player.vimeo.com/video/360272831?byline=0&amp;portrait=0&amp;title=0#t=" type="text/html" webkitallowfullscreen="true" width="660" wmode="transparent">
                            </iframe>
                        </div>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="844450" data-title="pystiche frontend after selecting a content and style image" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/844/450/datas/original.png">
                            <img alt="pystiche &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/844/450/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                pystiche frontend after selecting a content and style image
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="844451" data-title="pystiche frontend during the NST" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/844/451/datas/original.png">
                            <img alt="pystiche &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/844/451/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                pystiche frontend during the NST
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="844460" data-title="pystiche frontend displaying the result image after the NST" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/844/460/datas/original.png">
                            <img alt="pystiche &ndash; screenshot 3" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/844/460/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                pystiche frontend displaying the result image after the NST
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Inspiration
                </h2>
                <p>
                    I (Philip Meier, main author) started my research in the field of
                    <em>
                        Neural Style Transfer
                    </em>
                    (NST) in July 2018. Having little prior experience with deep learning, I thought was in for a steep learning curve. Fortunately, the first link after typing
                    <a href="https://duckduckgo.com/?q=neural+style+transfer+tutorial&amp;t=canonical&amp;atb=v1-1&amp;ia=web" rel="nofollow">
                        "neural style transfer tutorial" into DuckDuckGo
                    </a>
                    directed me to the
                    <a href="https://pytorch.org/tutorials/advanced/neural_style_tutorial.html" rel="nofollow">
                        official
                        <em>
                            PyTorch
                        </em>
                        tutorial for NST
                    </a>
                    . Having worked with
                    <em>
                        Caffe
                    </em>
                    and
                    <em>
                        TensorFlow
                    </em>
                    before, I instantly fell in love with PyTorch, because I understood the implementation in mere minutes without having ever heard of PyTorch before.
                </p>
                <p>
                    Writing my first paper in the field of NST earlier this year, I painfully learned that it is hard to benchmark your own results, if everyone uses different deep learning frameworks, implementation strategies and so on. I realized, while there are frameworks for deep learning, there is no such thing for the field of NST. Having never written a framework before, I decided to give it a try if "I have some time left over". Needless to say, there was never time left over. Fast forward to August when I read the announcement of the PyTorch Global Hackathon 2019. It was the perfect opportunity for me. Especially the price of being featured by PyTorch sold it to me, since a framework is no use for anyone, if no one knows it is there. As pun on the word
                    <a href="https://en.wikipedia.org/wiki/Pastiche" rel="nofollow">
                        pastiche
                    </a>
                    I started to develop
                    <code>
                        pystiche
                    </code>
                    .
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    As explained above,
                    <code>
                        pystiche
                    </code>
                    is a framework for NST algorithms. Roughly speaking, it relates to NST as PyTorch relates to deep learning.
                </p>
                <p>
                    After an initial shock how many different variants are out there, I learned that at the core the methods overlap greatly. Many building blocks can be reused. Basically, most papers varied a single component, which sometimes lead to drastically different results. I realized that having a flexible
                    <code>
                        Operator
                    </code>
                    most of the surroundings are static. Thus, the goal was to design a framework, that allows other researchers to rapidly prototype their inventions without sacrificing the quality.
                </p>
                <p>
                    Since in science the comparison between multiple methods is vital part of the development process, I implemented the approaches of three major papers within
                    <code>
                        pystiche
                    </code>
                    . Furthermore, I gathered download links for commonly used images, saving other researchers the time to download them on their own. With these two parts, a replication study of these papers is easily accomplishable.
                </p>
                <p>
                    Since the results of NST are visually appealing, the techniques might also be interesting for recreational use. Some web servies already offer simple NST functionality, but the results are often watermarked or not freee obtainable. Furthermore, the use has little to no control over the actual algorithm, leading to a lot of wasted potential. Thus, I wanted an easy to use frontend for the
                    <code>
                        pystiche
                    </code>
                    project, that enables interested user to create art without explicitely knowing how the algorithms or work and how they are implemented.
                </p>
                <h2>
                    How I built it
                </h2>
                <p>
                    I structured the
                    <code>
                        pystiche
                    </code>
                    backend in three steps, which are aligned with the tasks one has to perform in an NST:
                </p>
                <ol>
                    <li>
                        <p>
                            <strong>
                                Encoder
                            </strong>
                            NST algorithms heavily rely on CNNs or more precisely the feature maps they generate. A standard way to implement this, is to include
                            <em>
                                transparent layers
                            </em>
                            into the CNN, which pass the input right through, but save some information about it within the
                            <code>
                                nn.Module
                            </code>
                            . This information, usually
                            <code>
                                torch.Tensor
                            </code>
                            s, is later extracted and further processed. I got rid of this practice by designing the
                            <code>
                                Encoder
                            </code>
                            class, which subclasses an
                            <code>
                                nn.Sequential
                            </code>
                            , but gives the option to extract one or more feature maps within a single pass.
                        </p>
                    </li>
                    <li>
                        <p>
                            <strong>
                                Operator
                            </strong>
                            As stated before the used
                            <code>
                                Operator
                            </code>
                            s are the center pieces of every NST algorithm. I designed it so that a researcher who wants to write their own has to answer some very basic questions:
                        </p>
                        <ol>
                            <li>
                                Should the operator compare the input image to a target image or does it work as a regularizer?
                            </li>
                            <li>
                                Should the operator work on feature maps or directly in the pixel space?
                            </li>
                            <li>
                                Should the operator work on the whole image or just on some region of it?
                            </li>
                        </ol>
                    </li>
                </ol>
                <p>
                    According to the answers, you can simply pick an abstract
                    <code>
                        Operator
                    </code>
                    form the selection an implement only the actual logic need for the approach. This allows the user to focus on the important things, just like you only implement the
                    <code>
                        forward()
                    </code>
                    method of an
                    <code>
                        nn.Module
                    </code>
                    without worrying about about the rest.
                </p>
                <ol>
                    <li>
                        <strong>
                            NST
                        </strong>
                        The actual NST is performed by an
                        <code>
                            ImageOptimizer
                        </code>
                        and basically implements the "training loop". Given an input image, it
                    </li>
                </ol>
                <pre class="language-nolang"><code>- generates the necessary feature maps with the help of the encoders,
- calculates the scores of every operator, and
- updates the image accordingly
</code></pre>
                <p>
                    for every iteration step.
                </p>
                <hr>
                <p>
                    In the current state the frontend is based on
                    <code>
                        django
                    </code>
                    ,
                    <code>
                        JavaScript
                    </code>
                    , and
                    <code>
                        Ajax
                    </code>
                    . It features two dropzones, which enable the user to pick or drop two images to use. With a click of a button the frontend spins up the
                    <code>
                        pystiche
                    </code>
                    backend, which performs a basic NST. Subsequently, the result is displayed.
                </p>
                <h2>
                    Challenges I ran into
                </h2>
                <p>
                    Having never worked in web development before, I recruited Christopher Koch to help me with the frontend. Together we got it working, but the result lacks behind what I had envisioned to accomplish within this hackathon.
                </p>
                <h2>
                    Accomplishments that I'm proud of
                </h2>
                <p>
                    Having said that, I'm very proud that we got frontend working at all without any prior knowledge. Furthermore, I'm very proud that the design I finally chose after many revisions, should cover most of the papers within the field, thus making
                    <code>
                        pystiche
                    </code>
                    general enough for other researchers. Finally, I'm most proud of myself that I put in the hours to bring
                    <code>
                        pystiche
                    </code>
                    to life after never "having time left over" to implement it.
                </p>
                <h2>
                    What I learned
                </h2>
                <p>
                    I learned late but not too late to not try something like this on your own. I partially was so focussed on implementing "this one feature" that I lost the big picture. Having no formal CS background, I learned that for me it is very important to talk to someone else about your design choices before you blindly implement them. Thus, I'm very grateful to Christopher Koch providing me with that "sparring partner". By asking him for help earlier, I could have saved some sleepless nights.
                </p>
                <h2>
                    What's next for pystiche
                </h2>
                <p>
                    My great wish for the future is that other researchers adopt
                    <code>
                        pystiche
                    </code>
                    for their own research making it the first and commonly used framework for NST. Even if this does not happen and regardless of the outcome of this hackathon, I plan to continue developing the project. I will start my PhD within the field of NST soon and even if other researchers don't, I want my results easily reproducible. Furthermore I will try to submit it to
                    <a href="https://www.pyopensci.org/" rel="nofollow">
                        pyOpenSci
                    </a>
                    and if that works maybe write a paper about it in
                    <a href="https://joss.theoj.org/" rel="nofollow">
                        JOSS
                    </a>
                    .
                </p>
                <p>
                    Some features I plan on adding in the (near) feature:
                </p>
                <ul>
                    <li>
                        Fast Neural Style Transfer. This should not be a large step, since the only difference to the classical NST algorithms is that instead of optimizing an image you train an generator to do it with a forward pass.
                    </li>
                    <li>
                        Implementing more functionality of the backend within the frontend. If successful, this could also be a good starting point for new researchers to get an intuition about NST before diving into the backend.
                    </li>
                </ul>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/ajax">
                                ajax
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/django">
                                django
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/javascript">
                                javascript
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/jquery">
                                jquery
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            matplotlib
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/numpy">
                                numpy
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/python">
                                python
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/pytorch">
                                pytorch
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/requests">
                                requests
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            torch
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            torchvision
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/pmeier/pystiche" rel="nofollow" target="_blank" title="https://github.com/pmeier/pystiche">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
