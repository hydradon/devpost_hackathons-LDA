<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div>
                <h2>
                    ConUHacks 2019 project: Real-time chat application
                </h2>
                <p>
                    This is a web-based chat application built with React and Chatkit API.
                </p>
                <h4>
                    Features included
                </h4>
                <p>
                    typing indicators, online presence list, chat history(all previous messages can be seen by the new user joined to the room)
                </p>
                <h2>
                    Tasks
                </h2>
                <p>
                    Take new messages and update the React state.(Take chat data and render it for the user)
                </p>
                <p>
                    Most of the code involves hooking up Chatkit events and their associated data to React UI components.
                </p>
                <h3>
                    Create Chatkit Instance
                </h3>
                <p>
                    To create a Chatkit instance, go to:
                    <a href="https://dash.pusher.com/authenticate?utm_source=github&amp;utm_campaign=build-a-slack-clone-with-react-and-pusher-chatkit&amp;redirectTo=%2F%3Futm_source%3Dgithub%26utm_campaign%3Dbuild-a-slack-clone-with-react-and-pusher-chatkitand" rel="nofollow">
                        https://dash.pusher.com/authenticate?utm_source=github&amp;utm_campaign=build-a-slack-clone-with-react-and-pusher-chatkit&amp;redirectTo=%2F%3Futm_source%3Dgithub%26utm_campaign%3Dbuild-a-slack-clone-with-react-and-pusher-chatkitand
                    </a>
                    At dashboard hit 'Create new'.
                </p>
                <p>
                    Remember: Instance Locator and Secret Key in the Keys tab.
                </p>
                <h3>
                    Set up Node server
                </h3>
                <p>
                    Since most interactions will happen on the client, Chatkit needs a server counterpart to create and manage users.
                </p>
                <p>
                    Installing @pusher/chatkit-server: npm install --save @pusher/chatkit-server
                </p>
                <h4>
                    Update server.js
                </h4>
                <ol>
                    <li>
                        <p>
                            import Chatkit from @pusher/chatkit-server
                        </p>
                    </li>
                    <li>
                        <p>
                            instantiate chatkit instance using the Instance Locator and Key.
                        </p>
                    </li>
                    <li>
                        <p>
                            In the /users route, create a Chatkit user through our chatkit instance.
                        </p>
                    </li>
                    <li>
                        <p>
                            When someone first connects to Chatkit, a request will be sent to /authenticate to authenticate them. The server needs to respond with a token (returned by chatkit.authenticate) if the request is valid.
                        </p>
                    </li>
                </ol>
                <h3>
                    Identify user
                </h3>
                <p>
                    Once the user hit Submit button after entered the username, the system will send the username to the server and create a Chatkit user if one doesn't exist.
                </p>
                <p>
                    To collect the user's name, create a component called UsernameForm.js in in ./src/components/
                </p>
                <h4>
                    Update App.js
                </h4>
                <ol>
                    <li>
                        <p>
                            Import the UsernameForm component. It uses a common React pattern called controlled components.
                        </p>
                    </li>
                    <li>
                        <p>
                            In the render function, render the UsernameForm and hook up the onUsernameSubmitted event handler.
                        </p>
                    </li>
                    <li>
                        <p>
                            When onUsernameSubmitted is called, send a POST request to the /users route we just defined. If the request is successful, update this.state.username to make possible to reference it later. Otherwise, console.error the error.
                        </p>
                    </li>
                </ol>
                <p>
                    Run the application using npm start and see if the screen is rendered.
                </p>
                <h3>
                    Render chat screen
                </h3>
                <p>
                    Once the username has been submitted, transit to he chat screen.
                </p>
                <p>
                    -&gt; Need to create a ChatScreen.js component in ./src
                </p>
                <h4>
                    Update App.js
                </h4>
                <p>
                    Rather than use a router, conditionally render the screen based on this.state.currentScreen
                </p>
                <h3>
                    Connect to Chatkit instance
                </h3>
                <p>
                    Install @pusher/chatkit-client: npm install --save @pusher/chatkit-client
                </p>
                <h4>
                    Update ChatScreen.js
                </h4>
                <ol>
                    <li>
                        <p>
                            Import Chatkit
                        </p>
                    </li>
                    <li>
                        <p>
                            Instantiate Chatkit ChatManager with our instanceLocator, userId and a custom TokenProvider.
                        </p>
                    </li>
                    <li>
                        <p>
                            Once ChatManager has been initialised, call connect. connect happens asynchronously and a Promise is returned.
                        </p>
                    </li>
                </ol>
                <h3>
                    Create a Chatkit room
                </h3>
                <p>
                    By using Chatkit, all messages will be sent to a Chatkit room.
                </p>
                <p>
                    Rooms can be created programmatically or in the dashboard Inspector.
                </p>
                <p>
                    Important: note the unique Room id
                </p>
                <h3>
                    Create UI layout
                </h3>
                <p>
                    Break down each feature into independent.
                </p>
                <h4>
                    React components:
                </h4>
                <p>
                    WhosOnlineList.js; MessageList.js; TypingIndicator.js; SendMessageForm.js
                </p>
                <h3>
                    Subscribe new messages
                </h3>
                <p>
                    After having a Chatkit connection, continue building chat features.
                </p>
                <p>
                    Create a stateless MessageList.js component in ./src/components
                </p>
                <h4>
                    Update ChatScreen.js
                </h4>
                <ol>
                    <li>
                        <p>
                            Once connect to Chatkit, will get a currentUser object that represents the current connected user
                        </p>
                        <ol>
                            <li>
                                Chatkit is "user-driven" -&gt; not all interactions happen on the currentUser, so call subscribeToRoom on the currentUser (currentUser.subscribeToRoom)
                            </li>
                            <li>
                                subscribeToRoom takes an event handler called onMessage that is called in real-time each time a new message arrives
                            </li>
                            <li>
                                Specified the messageLimit, onMessage is called retroactively for up to 'messageLimit' recent messages, which means after refreshing the page, will see up to 'messageLimit' recent chat messages.
                            </li>
                        </ol>
                    </li>
                </ol>
                <h3>
                    Send messages
                </h3>
                <p>
                    To allow users to send messages -&gt; create a SendMessageForm.js component in ./src/components
                </p>
                <h4>
                    Update ChatScreen.js
                </h4>
                <p>
                    The SendMessageForm component should be similar to theWhatIsYourUsernameForm component defined earlier.
                </p>
                <p>
                    After the SendMessageForm is submitted, access this.state.currentUser and call sendMessage.
                </p>
                <p>
                    ChatScreen is a container component that manages application state and renders the UI using components.
                </p>
                <h3>
                    Add realtime 'typing indicators' feature
                </h3>
                <p>
                    With the help of Chatkit API, will be able to add 'typing indicators' with little effort.
                </p>
                <p>
                    Create a TypingIndicator.js component in ./src/components
                </p>
                <h4>
                    Update ChatScreen.js
                </h4>
                <p>
                    By using Chatkit API, 'typing indicators' breaks down to two fundamental actions:
                </p>
                <ol>
                    <li>
                        <p>
                            Calling currentUser.userIsTyping when the current user starts typing.
                        </p>
                    </li>
                    <li>
                        <p>
                            Listening to userStartedTyping and userStoppedTyping events
                        </p>
                    </li>
                </ol>
                <p>
                    If the service doesn't receive a userIsTyping event after a few seconds, Chatkit API assumes the currentUser has stopped typing.
                </p>
                <p>
                    Therefore, there is no need to manually raise an event when someone stops typing.
                </p>
                <h3>
                    Add 'online presence' list
                </h3>
                <p>
                    Use Chatkit's "online presence" feature to render a list of users and their real-time online status.
                </p>
                <p>
                    Create a WhosOnlineList.js component in /src/components
                </p>
                <h4>
                    Update ChatScreen.js
                </h4>
                <p>
                    Manage the state of users in currentRoom.users.
                </p>
                <p>
                    As users connect and disconnect, state is dynamically updated.
                </p>
                <p>
                    currentRoom.users should always refelect the current state of your chat app.
                </p>
                <p>
                    Therefore, when users come online or go offline (onPresenceChange), or new users join (onUserAdded)
                </p>
                <p>
                    -&gt; Call forceUpdate which tells React to evaluate currentRoom.users and update the UI.
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag">
                            chatkit
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/css">
                                css
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/html">
                                html
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/javascript">
                                javascript
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/react">
                                react
                            </a>
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/violetwei/ConUHacks-IV-2019" rel="nofollow" target="_blank" title="https://github.com/violetwei/ConUHacks-IV-2019">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
