<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li class="text-center">
                        <a data-lightbox="875179" data-title="Landing page" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/875/179/datas/original.JPG">
                            <img alt="DeFi Puzzle &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/875/179/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Landing page
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="875180" data-title="Default dashboard view" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/875/180/datas/original.JPG">
                            <img alt="DeFi Puzzle &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/875/180/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Default dashboard view
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="875181" data-title="Creating Long ETH bundle with leverage of 2" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/875/181/datas/original.JPG">
                            <img alt="DeFi Puzzle &ndash; screenshot 3" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/875/181/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Creating Long ETH bundle with leverage of 2
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="875182" data-title="Confirming a creation of bundle" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/875/182/datas/original.JPG">
                            <img alt="DeFi Puzzle &ndash; screenshot 4" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/875/182/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Confirming a creation of bundle
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="875185" data-title="Bundle appears in left-hand ribbon" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/875/185/datas/original.JPG">
                            <img alt="DeFi Puzzle &ndash; screenshot 5" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/875/185/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Bundle appears in left-hand ribbon
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="875186" data-title="Unpacking a bundle - price has gone up" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/875/186/datas/original.JPG">
                            <img alt="DeFi Puzzle &ndash; screenshot 6" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/875/186/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Unpacking a bundle - price has gone up
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="875187" data-title="Unpacking a bundle - price has gone down" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/875/187/datas/original.JPG">
                            <img alt="DeFi Puzzle &ndash; screenshot 7" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/875/187/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Unpacking a bundle - price has gone down
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="875190" data-title="Confirming bundle unpacking - total cost shown" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/875/190/datas/original.JPG">
                            <img alt="DeFi Puzzle &ndash; screenshot 8" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/875/190/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Confirming bundle unpacking - total cost shown
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="875192" data-title="Reset simulation button in the left bottom corner - returns dashboard to default state" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/875/192/datas/original.JPG">
                            <img alt="DeFi Puzzle &ndash; screenshot 9" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/875/192/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Reset simulation button in the left bottom corner - returns dashboard to default state
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Inspiration
                </h2>
                <p>
                    The inspiration to build DeFi Puzzle comes from looking at the most popular crypto trading instrument today: perpetual swaps on Bitmex (and Deribit, and Binance).
                </p>
                <p>
                    We were trying to come up with a trust-minimized alternative and came to an understanding we already have most of the elements in place:
                </p>
                <ul>
                    <li>
                        <p>
                            money market (Compound) for underlying liquidity
                        </p>
                    </li>
                    <li>
                        <p>
                            tokenized deposits (cTokens, or what we call Long tokens)
                        </p>
                    </li>
                    <li>
                        <p>
                            tokenized complex positions (nonfungible tokens)
                        </p>
                    </li>
                </ul>
                <p>
                    In addition to those existing elements we need to tokenize the money market liabilities (what we call Short tokens) and provide traders with a straightforward dashboard where they can combine their money market positions to recreate trust-minimized financial products like perpetual swaps.
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    <em>
                        Please note the current iteration of the app is a simulation only.
                    </em>
                </p>
                <p>
                    DeFi Puzzle allows users with existing Compound money market positions to combine (&ldquo;bundle&rdquo;) their Long and Short positions and thus create their custom financial products such as leveraged long/short positions with custom leverage.
                </p>
                <h3>
                    Simple examples:
                </h3>
                <p>
                    Assume ETH price of $150.
                </p>
                <p>
                    1) Combining 1 Long ETH + 150 Short DAI results in a bundle with $0 initial value which nets the holder a profit when ETH price moves up and results in a loss when ETH price moves down.
                </p>
                <p>
                    2) Combining 1 Short ETH + 150 Long DAI is an inverse bundle that profits from ETH price moving down.
                </p>
                <p>
                    3) Combining 1 Long ETH + 75 Short DAI results in a bundle with a $75 initial value. A trader can construct or buy 2 such bundles for a price of 1 ETH (ie $150). Such a bundle is effectively an ETH long position with leverage of 2.
                </p>
                <h3>
                    Bundle examples
                </h3>
                <p>
                    By combining Long and Short tokens of various nominal amounts, traders can construct their custom financial products. You can find more detailed examples of how various bundles can be constructed under this link:
                    <a href="https://docs.google.com/spreadsheets/d/1lUztH8zVuq9Lcjzav8UwACAHK3xnHrbYARK6G71v1UM/edit?usp=sharing" rel="nofollow">
                        https://docs.google.com/spreadsheets/d/1lUztH8zVuq9Lcjzav8UwACAHK3xnHrbYARK6G71v1UM/edit?usp=sharing
                    </a>
                </p>
                <p>
                    In the linked sheet we have only included assets that are available in the current iteration of the app. In future iterations, more assets will be available, eg. wrapped Bitcoin (WBTC). This way, users will be able to construct advanced leverage trades betting on bitcoin price movements using trust-minimized DeFi building blocks.
                </p>
                <p>
                    Moreover, when we include timelocks, traders have the option to create forwards/futures with fixed maturities.
                </p>
                <h3>
                    Nonfungible tokens
                </h3>
                <p>
                    Once any bundle is constructed and confirmed, the user receives a nonfungible token (NFT) into his wallet. User can then hold this token for their own speculative needs, or sell it to other traders, for example with some premium on a decentralized exchange. We believe such trading of ready-made custom financial products can arise due to the combination of high capital requirements of some bundles (especially those with high leverage ratios) and much lower net initial value of some bundles (please see the above-linked cheat sheet for illustrative examples).
                </p>
                <h3>
                    Unbundling process and custom simulation parameters:
                </h3>
                <p>
                    Once user has created a bundle withing the DeFi Puzzle app, he has the ability to &ldquo;unbundle&rdquo; (by clicking on the existing bundle in the left-hand ribbon).
                </p>
                <p>
                    The unbundling process in the current iteration of the app allows user to explore various scenarios by changing three parameters: elapsed time (in days), new price of the Long token and new price of the Short token (we are keeping APRs invariable for the sake of simplicity). User is shown the original state of the bundle in comparison with the user-defined scenario. This way, users can play around with various scenarios and devise strategies for various leveraged trades, which could be executed in the future mainnet iteration of the app.
                </p>
                <h3>
                    Explanation of individual lines shown in the &ldquo;This bundle represents&rdquo; field:
                </h3>
                <p>
                    <strong>
                        Position:
                    </strong>
                    type of the trade (Long/Short ETH or Complex)
                </p>
                <p>
                    <strong>
                        Leverage:
                    </strong>
                    what implicit leverage is the bundle operating with (ie. how much of the speculative asset could the trader buy for the full price of 1 unit of the asset in the case of leveraged long)
                </p>
                <p>
                    <strong>
                        Net value of the bundle:
                    </strong>
                    value of long position minus value of short position
                </p>
                <p>
                    <strong>
                        Collateralization ratio (this bundle):
                    </strong>
                    long positions divided by short positions, bundle only
                </p>
                <p>
                    <strong>
                        Collateralization ratio (account total):
                    </strong>
                    long positions (bundle + held in account) divided by bundle short positions
                </p>
                <p>
                    <strong>
                        Required collateralization ratio:
                    </strong>
                    ratio in which the short position needs to be overcollateralized (per Compound money market on Ropsten testnet)
                </p>
                <p>
                    <strong>
                        Long position yield:
                    </strong>
                    APR yield of the long position (per Compound money market on mainnet)
                </p>
                <p>
                    <strong>
                        Short position yield:
                    </strong>
                    APR cost of the short position (per Compound money market on mainnet)
                </p>
                <p>
                    <strong>
                        Accrued long position yield:
                    </strong>
                    total APR yield for the time elapsed
                </p>
                <p>
                    <strong>
                        Accrued short position cost:
                    </strong>
                    total APR cost for the time elapsed
                </p>
                <p>
                    <strong>
                        Total cost to unbundle:
                    </strong>
                    original bundle short position component plus accrued short position cost
                </p>
                <p>
                    <em>
                        DeFi Puzzle isn&rsquo;t just a different UI for Compound; it&rsquo;s a second layer DeFi solution broadening the options of traders looking for trust-minimized alternatives to today&rsquo;s big exchanges.
                    </em>
                </p>
                <h2>
                    How we built it
                </h2>
                <p>
                    After the initial research, we focused on building the app that would show clearly and concisely how our idea will work. Our main goal was to show users that constructing financial products like leveraged longs/shorts can be easy and intuitive. From our experience, we are well aware that trading on leverage without a clear understanding of the nature of the trades and the associated risks is the main cause of unnecessary losses.
                </p>
                <p>
                    The design of the user interface was one of the first undertakings. The name of the project itself - DeFi Puzzle - is a reference to how easy it should be for the users to construct their financial bundles: as easy as fitting various fitting puzzle pieces together (where the proverbial puzzle pieces are their Compound money market positions).
                </p>
                <p>
                    The current iteration of the DeFi Puzzle app is only a simulation of our vision and is currently only built in Javascript and API calls.
                </p>
                <h2>
                    Challenges we ran into
                </h2>
                <p>
                    Throughout this hackathon, we greatly improved our understanding of what can be done once we have the basic DeFi building blocks in place (liquid money market with tokenized deposits &amp; liabilities, possibility to combine them in NFT bundles). On the other hand, we discover potential obstacles to the realization of our idea that we weren&rsquo;t fully aware of in the beginning.
                </p>
                <p>
                    We found out there are several areas of further development we need to undertake before the utility showcased in our simulation app is ready to be deployed on the Ethereum mainnet:
                </p>
                <p>
                    <strong>
                        Short tokens development:
                    </strong>
                    currently, only deposits on Compound are tokenized (through cTokens). We need to provide the users with the ability to also have their liabilities represented in a token form (Short tokens). These Short tokens need to have restrictions in place that restrain under which conditions such tokens can be created, transferred and held. Since Short tokens always have negative value, they need to be held in an account with tokens of positive value that can be liquidated in case of need (fall under a certain collateralization ratio threshold). This means that Short tokens should be either bundled with Long tokens of sufficient extra value (so that the bundle itself never becomes undercollateralized), or the bundle has to be held in an account with further Long tokens (as is the case with Pure Upside/Downside bundles). Transfer of Short tokens in their unbundled form has to always be confirmed by the recipient and the recipient&rsquo;s account needs to be sufficiently collateralized before the transfer is executed.
                </p>
                <p>
                    <strong>
                        Long tokens development:
                    </strong>
                    although we already have cTokens in place, our concept of Long tokens requires several changes. First, Long tokens need to have transfer restrictions in place to prevent abandonment of liabilities in the form of Short tokens. Short tokens need to bind Long tokens of sufficient value to a certain address. Second, to provide for good user experience, Long tokens need to have a nominal amount equal to the underlying asset: 1 ETH deposited in Compound needs to result in 1 L-ETH in Long tokens. cTokens currently don&rsquo;t reflect the underlying nominal amounts, as they accrue interest through changes in exchange rate versus the underlying asset. Third, when users borrow from Compound money market, they should have the ability to receive the Long tokens instead of the underlying asset. This would greatly increase the user experience when they borrow from the Compound to later bundle their positions - only liquidatable Long tokens are allowed in bundles, not the underlying assets.
                </p>
                <p>
                    <strong>
                        Liquidation procedure:
                    </strong>
                    since custom bundles with possibly a very high leverage are allowed to be constructed, we need a streamlined liquidation procedure in place. Current liquidation procedure on Compound relies on triggers from human liquidators (or their bots), but this may prove insufficient in case of need of fast liquidations of high value. Therefore we need to explore the possibility to liquidate bundles by utilizing automated swap protocols such as Kyber.
                </p>
                <p>
                    <strong>
                        Unbundling:
                    </strong>
                    we need to design a straightforward and safe process of paying down the liability (Short tokens) and thus unlocking the asset part of the bundle (Long tokens). This can be done in two ways. First, the user simply pays off the liability with the same asset as the liability (e.g. L-DAI pays for S-DAI liability). This, of course, requires the user to have the exact amount (or slightly more as the interest accrues every block) of the asset. Second, we could provide the user with the ability to pay down the liability in a different asset - for example, to pay down S-DAI with L-ETH. For this, automated swap protocols like Kyber are the natural fit. The ability to easily pay down the liability in a different asset would be good for simple unbundling: within a bundle of 1 L-ETH and 150 S-DAI, the S-DAI liability would be paid off with the L-ETH. Therefore, if the ETH price was $200 at the time of unbundling, the user would end up with a net 0.25 L-ETH.
                </p>
                <p>
                    The way we tackle these developments depends on how integrated we can get with the Compound protocol itself. Ideally, we would like to see Long &amp; Short tokens as an integral part of the Compound as that would make further developments much easier. If that&rsquo;s not possible, we can build the elements necessary for DeFi Puzzle by wrapping cTokens and Compound liabilities and introducing Long &amp; Short tokens this way.
                </p>
                <h2>
                    Accomplishments that we're proud of
                </h2>
                <p>
                    We&rsquo;re happy we came up with a way of communicating our idea straightforwardly. Leveraged trades aren&rsquo;t very intuitive and we believe our app can improve the understanding of how such trades work and hopefully decrease the ratio of losing trades. We also hope efforts like our app can bring in more traders from the big exchanges to DeFi and reduce the systemic risk of centralized custodians.
                </p>
                <h2>
                    What we learned
                </h2>
                <p>
                    Mostly we learned a different way of looking at leveraged trading. Working on DeFi Puzzle drove us to adopt a user-centric viewpoint and got us thinking deeply about the individual building blocks of a leveraged trade and how these can be combined while not letting the users drown in complexity.
                </p>
                <h2>
                    What's next for DeFi Puzzle
                </h2>
                <p>
                    We need to undertake further research &amp; development in the areas described in &ldquo;Challenges we ran into&rdquo;.
                </p>
                <p>
                    Our focus for future iterations is to build a mobile-first version of the app, in order to achieve stronger user adoption.
                </p>
                <p>
                    From the technical standpoint, we would like to develop following areas:
                </p>
                <ul>
                    <li>
                        Timelocked contracts for fixed-term futures/forwards
                    </li>
                    <li>
                        Margin calls to alert users their bundles are nearing liquidation
                    </li>
                    <li>
                        Stop loss functionality to prevent forced bundle liquidation
                    </li>
                </ul>
                <p>
                    We are looking for grants, investments &amp; development partners.
                </p>
                <p>
                    Follow our progress at
                    <a href="https://twitter.com/DefiPuzzle" rel="nofollow">
                        https://twitter.com/DefiPuzzle
                    </a>
                    .
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/javascript">
                                javascript
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/love">
                                love
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/react">
                                react
                            </a>
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://defi-puzzle.tmcloud.io/" rel="nofollow" target="_blank" title="https://defi-puzzle.tmcloud.io/">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                defi-puzzle.tmcloud.io
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/topmonks/defi-puzzle" rel="nofollow" target="_blank" title="https://github.com/topmonks/defi-puzzle">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
