<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li>
                        <div class="flex-video">
                            <iframe allowfullscreen="allowfullscreen" allowscriptaccess="always" class="video-embed" frameborder="0" height="371" mode="transparent" src="https://www.youtube.com/embed/aWHYnqe9Xkk?enablejsapi=1&amp;hl=en_US&amp;rel=0&amp;start=&amp;version=3&amp;wmode=transparent" type="text/html" webkitallowfullscreen="true" width="660" wmode="transparent">
                            </iframe>
                        </div>
                    </li>
                </ul>
            </div>
            <div>
                <p>
                    ChordBank for Alexa brings ChordBank into your living room. Tune your guitar, look up chords, or jam out to backing tracks, without taking your fingers off the strings.
                </p>
                <p>
                    Forget a chord while you're practicing or learning something new? You can use ChordBank to learn the chord from across the room:
                </p>
                <p>
                    <img alt="dialog: how to play c major" data-canonical-url="https://s3.amazonaws.com/cb-alexa/_media/alexa-dialog-how-to-play-chords2.png" src="https://res.cloudinary.com/devpost/image/fetch/s--4WpQ7569--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://s3.amazonaws.com/cb-alexa/_media/alexa-dialog-how-to-play-chords2.png">
                </p>
                <p>
                    Want to practice scales or solos?
                </p>
                <p>
                    Try playing along with a backing track, from rock, to salsa, to gospel or punk.
                </p>
                <p>
                    Play in any key you'd like:
                </p>
                <p>
                    <img alt="dialog: let's jam" data-canonical-url="https://s3.amazonaws.com/cb-alexa/_media/alexa-dialog-jam.png" src="https://res.cloudinary.com/devpost/image/fetch/s--UdlF9pAQ--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://s3.amazonaws.com/cb-alexa/_media/alexa-dialog-jam.png">
                </p>
                <p>
                    Guitar out of tune?
                </p>
                <p>
                    ChordBank can help:
                </p>
                <p>
                    <img alt="dialog: tuning" data-canonical-url="https://s3.amazonaws.com/cb-alexa/_media/alexa-dialog-tuning.png" src="https://res.cloudinary.com/devpost/image/fetch/s--AqdyLqfp--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://s3.amazonaws.com/cb-alexa/_media/alexa-dialog-tuning.png">
                </p>
                <p>
                    Just need a reference pitch?
                </p>
                <p>
                    No problem:
                </p>
                <p>
                    <img alt="dialog: tuning" data-canonical-url="https://s3.amazonaws.com/cb-alexa/_media/alexa-dialog-tuning2.png" src="https://res.cloudinary.com/devpost/image/fetch/s--J6-sVvOU--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://s3.amazonaws.com/cb-alexa/_media/alexa-dialog-tuning2.png">
                </p>
                <p>
                    ChordBank for Alexa. The perfect practice companion.
                </p>
                <h2>
                    How it's made
                </h2>
                <p>
                    This was an interesting product to build, both because Alexa represents a completely new kind of interaction in a domain I&rsquo;ve spent so much time in, and because it coincides with a project I've been working on for the past six months or so:
                </p>
                <p>
                    To pull much of ChordBank's functionality out of
                    <a href="https://itunes.apple.com/us/app/chordbank-how-to-play-guitar-chords/id397602509?mt=8" rel="nofollow">
                        the iOS app
                    </a>
                    that has helped millions of people learn guitar over the years, and into a series of portable tools that can be used on any platform.
                </p>
                <p>
                    Here is a complete walkthrough of what that means for one piece of ChordBank&rsquo;s Alexa skill, and how the music theory that drives ChordBank gets from ChordBank&rsquo;s toolbox into Alexa&rsquo;s.
                </p>
                <h3>
                    Giving Alexa the Answers
                </h3>
                <p>
                    When a user asks Alexa, &ldquo;how do I play D major?&rdquo; that's a question that ChordBank for iOS, and ChordBank.com, for example,
                    <a href="http://www.chordbank.com/chords/d-major/" rel="nofollow">
                        already know how to answer
                    </a>
                    :
                </p>
                <p>
                    <img alt="D major on ChordBank.com" data-canonical-url="https://s3.amazonaws.com/cb-alexa/_media/alexa-chordbank-dot-com.png" src="https://res.cloudinary.com/devpost/image/fetch/s--fkMtDyKF--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://s3.amazonaws.com/cb-alexa/_media/alexa-chordbank-dot-com.png">
                </p>
                <p>
                    So, how do we get that answer into Alexa?
                </p>
                <p>
                    And how do we get Alexa to actually play the chord so we can hear how it sounds?
                </p>
                <p>
                    Well, it starts with the command line, and an in-house custom CLI called
                    <code>
                        cbnk
                    </code>
                    &mdash;ChordBank&rsquo;s CLI:
                </p>
                <p>
                    <img alt="The cbnk command line" data-canonical-url="https://s3.amazonaws.com/cb-alexa/_media/cbnk-demo.gif" src="https://res.cloudinary.com/devpost/image/fetch/s--gwAjbAUE--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://s3.amazonaws.com/cb-alexa/_media/cbnk-demo.gif">
                </p>
                <p>
                    <code>
                        cbnk
                    </code>
                    has a library of thousands of hand-curated guitar chords. It knows multiple fingerings for each type of chord in each key, it knows which fingers to use, and it knows the proper musical spelling for each note.
                </p>
                <p>
                    Ask
                    <code>
                        cbnk
                    </code>
                    for a chord, and it returns it in a custom format called
                    <code>
                        tabml
                    </code>
                    &mdash;human-readable tab markup language.
                </p>
                <p>
                    Here&rsquo;s one entry for D major:
                </p>
                <pre class="language-nolang"><code>xxo```  @0 D  x,x,D,A,D,F#
------
``````
```1`2
````3`
``````
``````
``````
_
</code></pre>
                <p>
                    You should see that, in this little piece of plain text, you have the placement of each finger, the starting fret, and the proper note spellings.
                </p>
                <p>
                    But this is just text.
                </p>
                <p>
                    To get nice, clear audio for each chord, we need to turn it into an mp3 file that Alexa can play. For that, we use another in-house tool, called
                    <code>
                        cbmidi
                    </code>
                    .
                </p>
                <h3>
                    Turning txt into music
                </h3>
                <p>
                    <code>
                        cbmidi
                    </code>
                    works with
                    <code>
                        cbnk
                    </code>
                    to get a chord, and then
                    <em>
                        inflate
                    </em>
                    a MIDI template with that chord. The MIDI template defines the strum pattern, and
                    <code>
                        cbnk
                    </code>
                    supplies the pitches for each string. Here it is in action:
                </p>
                <p>
                    <img alt="The cbmidi command line tool" data-canonical-url="https://s3.amazonaws.com/cb-alexa/_media/cbmidi-demo.gif" src="https://res.cloudinary.com/devpost/image/fetch/s--xTNq1mPV--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://s3.amazonaws.com/cb-alexa/_media/cbmidi-demo.gif">
                </p>
                <p>
                    This produces a bunch of
                    <code>
                        .mid
                    </code>
                    files:
                </p>
                <p>
                    <img alt="midi files" data-canonical-url="https://s3.amazonaws.com/cb-alexa/_media/cb-midi-files.png" src="https://res.cloudinary.com/devpost/image/fetch/s--ECR3U1yT--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://s3.amazonaws.com/cb-alexa/_media/cb-midi-files.png">
                </p>
                <p>
                    Which, unfortunately, Alexa couldn't care less about.
                </p>
                <p>
                    Alexa has two ways to process sound: you can use the AudioPlayer API, which essentially exits your skill, or you can use
                    <code>
                        ssml
                    </code>
                    tags to play snippets of low-fi, mp3 audio, inline with other speech.
                </p>
                <p>
                    For teaching users how to play chords, these snippets were the way to go.
                </p>
                <p>
                    And that's where things get a little weird: to generate mp3s, I used GarageBand to create tracks from the midi files.
                </p>
                <p>
                    But, twelve tracks per type of chord, bouncing each one to disk is... tedious.
                </p>
                <p>
                    Enter: Applescript.
                </p>
                <h3>
                    Old-school automation
                </h3>
                <p>
                    Yes. Applescript. That little ghost that takes control of your computer by clumbsy syntactical magic.
                </p>
                <p>
                    Here's a small taste of the craziness:
                </p>
                <pre class="language-nolang"><code>on exportTrack(idx, filename)
                get_window()
    checkAllMuteBoxes()

    tell application "System Events"
    tell process "GarageBand"
    set _exportInstrumentsGroup to group idx of group 1 of scroll area 1 of splitter group 2 of splitter group 1 of group 3 of _window

    click _exportInstrumentsGroup
    delay 0.1
    set _muteBox to checkbox 1 of _exportInstrumentsGroup
    set checkboxStatus to value of _muteBox as boolean
    if checkboxStatus is true then click _muteBox
    end tell
    end tell

    bounceToDisk(filename)
end exportTrack
</code></pre>
                <p>
                    Essentially, what's going on here:
                </p>
                <ul>
                    <li>
                        each key is arranged as its own track, from C down to B.
                    </li>
                    <li>
                        using AppleScript, our computer helper checks all the mute boxes.
                    </li>
                    <li>
                        then, one by one, we uncheck the mutebox of the track we're interested in
                    </li>
                    <li>
                        then, we bounce to disk
                    </li>
                </ul>
                <p>
                    Done live, Applescript becomes dizzying and beautiful. Here's what it looks like:
                </p>
                <p>
                    <img alt="Applescript and Garageband" data-canonical-url="https://s3.amazonaws.com/cb-alexa/_media/cb-garageband-bounce-sm.gif" src="https://res.cloudinary.com/devpost/image/fetch/s--N_VoKFzu--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://s3.amazonaws.com/cb-alexa/_media/cb-garageband-bounce-sm.gif">
                </p>
                <p>
                    One more processing step, and we're left with a folder full of nice, readable
                    <code>
                        mp3
                    </code>
                    files for Alexa:
                </p>
                <p>
                    <img alt="mp3 files" data-canonical-url="https://s3.amazonaws.com/cb-alexa/_media/cb-midi-mp3-files.png" src="https://res.cloudinary.com/devpost/image/fetch/s--P_hK3ylU--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://s3.amazonaws.com/cb-alexa/_media/cb-midi-mp3-files.png">
                </p>
                <h3>
                    Bringing it all together
                </h3>
                <p>
                    So you can ask Alexa, &ldquo;How do you play C major?&rdquo; and she&rsquo;ll very helpfully reply:
                </p>
                <pre class="language-nolang"><code>&lt;speak&gt;
                &lt;say-as interpret-as="spell-out"&gt;C&lt;/say-as&gt; major &lt;audio src="...c-pluck.mp3" /&gt; 
    &lt;s&gt;Start by placing your first finger&lt;/s&gt;&lt;s&gt;on the second string&lt;/s&gt; 
    &lt;s&gt;at the first fret... 
    ...
&lt;/speak&gt;
</code></pre>
                <p>
                    And, she'll even place a diagram with the instructions in your Alexa app, for easy reference:
                </p>
                <p>
                    <img alt="C Major diagram in the Alexa app" data-canonical-url="https://s3.amazonaws.com/cb-alexa/_media/cb-c-card.gif" src="https://res.cloudinary.com/devpost/image/fetch/s--DZlOogkF--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://s3.amazonaws.com/cb-alexa/_media/cb-c-card.gif">
                </p>
                <h2>
                    What&rsquo;s next
                </h2>
                <p>
                    What&rsquo;s next for ChordBank for Alexa?
                </p>
                <p>
                    That really depends on the players who use it.
                </p>
                <p>
                    It's been exciting to explore this new medium in computer-human interaction, and I think that this app brings the best of ChordBank to your living room.
                </p>
                <p>
                    The real test will be: how useful is the skill to players and students in their everyday lives?
                </p>
                <p>
                    And how can ChordBank continue to grow with them to be even more essential than it is today?
                </p>
                <p>
                    It&rsquo;s still early days, but I can&rsquo;t wait to find out.
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/alexa">
                                alexa
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/amazon-alexa">
                                amazon-alexa
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/applescript">
                                applescript
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/javascript">
                                javascript
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            lambda
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/node-js">
                                node.js
                            </a>
                        </span>
                    </li>
                </ul>
            </div>
        </div>
    </body>
</html>
