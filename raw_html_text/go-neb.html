<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div>
                <h1>
                    Go-NEB
                </h1>
                <p>
                    <a href="https://travis-ci.org/matrix-org/go-neb" rel="nofollow">
                        <img alt="Build Status" data-canonical-url="https://travis-ci.org/matrix-org/go-neb.svg?branch=master" src="https://res.cloudinary.com/devpost/image/fetch/s--ytJSCX3j--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://travis-ci.org/matrix-org/go-neb.svg%3Fbranch%3Dmaster">
                    </a>
                </p>
                <p>
                    Go-NEB is a
                    <a href="https://matrix.org" rel="nofollow">
                        Matrix
                    </a>
                    bot written in Go. It is the successor to
                    <a href="https://github.com/matrix-org/Matrix-NEB" rel="nofollow">
                        Matrix-NEB
                    </a>
                    , the original Matrix bot written in Python.
                </p>
                <h1>
                    Table of Contents
                </h1>
                <ul>
                    <li>
                        <a href="#quick-start" rel="nofollow">
                            Quick Start
                        </a>
                        <ul>
                            <li>
                                <a href="#features" rel="nofollow">
                                    Features
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="#installing" rel="nofollow">
                            Installing
                        </a>
                    </li>
                    <li>
                        <a href="#running" rel="nofollow">
                            Running
                        </a>
                        <ul>
                            <li>
                                <a href="#configuration-file" rel="nofollow">
                                    Configuration file
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="#api" rel="nofollow">
                            API
                        </a>
                        <ul>
                            <li>
                                <a href="#configuring-clients" rel="nofollow">
                                    Configuring clients
                                </a>
                            </li>
                            <li>
                                <a href="#configuring-services" rel="nofollow">
                                    Configuring services
                                </a>
                            </li>
                            <li>
                                <a href="#configuring-realms" rel="nofollow">
                                    Configuring realms
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="#developing" rel="nofollow">
                            Developing
                        </a>
                        <ul>
                            <li>
                                <a href="#architecture" rel="nofollow">
                                    Architecture
                                </a>
                            </li>
                            <li>
                                <a href="#viewing-the-api-docs" rel="nofollow">
                                    API Docs
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
                <h1>
                    Quick Start
                </h1>
                <p>
                    Clone and run (Requires Go 1.7+ and GB):
                </p>
                <pre class="language-bash"><code>gb build github.com/matrix-org/go-neb
BIND_ADDRESS=:4050 DATABASE_TYPE=sqlite3 DATABASE_URL=go-neb.db?_busy_timeout=5000 BASE_URL=http://localhost:4050 bin/go-neb
</code></pre>
                <p>
                    Get a Matrix user ID and access token and give it to Go-NEB:
                </p>
                <pre class="language-bash"><code>curl -X POST localhost:4050/admin/configureClient --data-binary '{
                "UserID": "@goneb:localhost",
    "HomeserverURL": "http://localhost:8008",
    "AccessToken": "&lt;access_token&gt;",
    "Sync": true,
    "AutoJoinRooms": true,
    "DisplayName": "My Bot"
}'
</code></pre>
                <p>
                    Tell it what service to run:
                </p>
                <pre class="language-bash"><code>curl -X POST localhost:4050/admin/configureService --data-binary '{
                "Type": "echo",
    "Id": "myserviceid",
    "UserID": "@goneb:localhost",
    "Config": {}
}'
</code></pre>
                <p>
                    Invite the bot user into a Matrix room and type
                    <code>
                        !echo hello world
                    </code>
                    . It will reply with
                    <code>
                        hello world
                    </code>
                    .
                </p>
                <h2>
                    Features
                </h2>
                <h3>
                    Github
                </h3>
                <ul>
                    <li>
                        Login with OAuth2.
                    </li>
                    <li>
                        Ability to create Github issues on any project.
                    </li>
                    <li>
                        Ability to track updates (add webhooks) to projects. This includes new issues, pull requests as well as commits.
                    </li>
                    <li>
                        Ability to expand issues when mentioned as
                        <code>
                            foo/bar#1234
                        </code>
                        .
                    </li>
                    <li>
                        Ability to assign a "default repository" for a Matrix room to allow
                        <code>
                            #1234
                        </code>
                        to automatically expand, as well as shorter issue creation command syntax.
                    </li>
                </ul>
                <h3>
                    JIRA
                </h3>
                <ul>
                    <li>
                        Login with OAuth1.
                    </li>
                    <li>
                        Ability to create JIRA issues on a project.
                    </li>
                    <li>
                        Ability to expand JIRA issues when mentioned as
                        <code>
                            FOO-1234
                        </code>
                        .
                    </li>
                </ul>
                <h3>
                    Giphy
                </h3>
                <ul>
                    <li>
                        Ability to query Giphy's "text-to-gif" engine.
                    </li>
                </ul>
                <h3>
                    Guggy
                </h3>
                <ul>
                    <li>
                        Ability to query Guggy's gif engine.
                    </li>
                </ul>
                <h3>
                    RSS Bot
                </h3>
                <ul>
                    <li>
                        Ability to read Atom/RSS feeds.
                    </li>
                </ul>
                <h3>
                    Travis CI
                </h3>
                <ul>
                    <li>
                        Ability to receive incoming build notifications.
                    </li>
                    <li>
                        Ability to adjust the message which is sent into the room.
                    </li>
                </ul>
                <h1>
                    Installing
                </h1>
                <p>
                    Go-NEB is built using Go 1.5+ and
                    <a href="https://getgb.io/" rel="nofollow">
                        GB
                    </a>
                    . Once you have installed Go, run the following commands:
                </p>
                <pre class="language-bash"><code># Install gb
go get github.com/constabulary/gb/...

# Clone the go-neb repository
git clone https://github.com/matrix-org/go-neb
cd go-neb

# Build go-neb
gb build github.com/matrix-org/go-neb
</code></pre>
                <h1>
                    Running
                </h1>
                <p>
                    Go-NEB uses environment variables to configure its SQLite database and bind address. To run Go-NEB, run the following command:
                </p>
                <pre class="language-bash"><code>BIND_ADDRESS=:4050 DATABASE_TYPE=sqlite3 DATABASE_URL=go-neb.db?_busy_timeout=5000 BASE_URL=https://public.facing.endpoint bin/go-neb
</code></pre>
                <ul>
                    <li>
                        <code>
                            BIND_ADDRESS
                        </code>
                        is the port to listen on.
                    </li>
                    <li>
                        <code>
                            DATABASE_TYPE
                        </code>
                        MUST be "sqlite3". No other type is supported.
                    </li>
                    <li>
                        <code>
                            DATABASE_URL
                        </code>
                        is where to find the database file. One will be created if it does not exist. It is a URL so parameters can be passed to it. We recommend setting
                        <code>
                            _busy_timeout=5000
                        </code>
                        to prevent sqlite3 "database is locked" errors.
                    </li>
                    <li>
                        <code>
                            BASE_URL
                        </code>
                        should be the public-facing endpoint that sites like Github can send webhooks to.
                    </li>
                    <li>
                        <code>
                            CONFIG_FILE
                        </code>
                        is the path to the configuration file to read from. This isn't included in the example above, so Go-NEB will operate in HTTP mode.
                    </li>
                </ul>
                <p>
                    Go-NEB needs to be "configured" with clients and services before it will do anything useful. It can be configured via a configuration file OR by an HTTP API.
                </p>
                <h2>
                    Configuration file
                </h2>
                <p>
                    If you run Go-NEB with a
                    <code>
                        CONFIG_FILE
                    </code>
                    environment variable, it will load that file and use it for services, clients, etc. There is a
                    <a href="config.sample.yaml" rel="nofollow">
                        sample configuration file
                    </a>
                    which explains all the options. In most cases, these are
                    <em>
                        direct mappings
                    </em>
                    to the corresponding HTTP API.
                </p>
                <h1>
                    API
                </h1>
                <p>
                    The API is documented in sections using godoc. The sections consists of:
                </p>
                <ul>
                    <li>
                        An HTTP API (the path and method to use)
                    </li>
                    <li>
                        A "JSON request body" (the JSON that is inside the HTTP request body)
                    </li>
                    <li>
                        "Configuration" information (any additional information that is specific to what you're creating)
                    </li>
                </ul>
                <p>
                    To form the complete API, you need to combine the HTTP API with the JSON request body, and the "Configuration" information (which is always under a JSON key called
                    <code>
                        Config
                    </code>
                    ). In addition, most APIs have a
                    <code>
                        Type
                    </code>
                    which determines which piece of code to load. To find out what the right type is for the thing you're creating, check the constants defined in godoc.
                </p>
                <h2>
                    Configuring Clients
                </h2>
                <p>
                    Go-NEB needs to connect as a matrix user to receive messages. Go-NEB can listen for messages as multiple matrix users. The users are configured using an HTTP API and the config is stored in the database.
                </p>
                <ul>
                    <li>
                        <a href="https://matrix-org.github.io/go-neb/pkg/github.com/matrix-org/go-neb/api/handlers/index.html#ConfigureClient.OnIncomingRequest" rel="nofollow">
                            HTTP API Docs
                        </a>
                    </li>
                    <li>
                        <a href="https://matrix-org.github.io/go-neb/pkg/github.com/matrix-org/go-neb/api/index.html#ClientConfig" rel="nofollow">
                            JSON Request Body Docs
                        </a>
                    </li>
                </ul>
                <h2>
                    Configuring Services
                </h2>
                <p>
                    Services contain all the useful functionality in Go-NEB. They require a client to operate. Services are configured using an HTTP API and the config is stored in the database. Services use one of the matrix users configured on Go-NEB to send/receive matrix messages.
                </p>
                <p>
                    Every service has an "ID", "type" and "user ID". Services may specify additional "config" keys: see the specific
service you're interested in for the additional keys, if any.
                </p>
                <ul>
                    <li>
                        <a href="https://matrix-org.github.io/go-neb/pkg/github.com/matrix-org/go-neb/api/handlers/index.html#ConfigureService.OnIncomingRequest" rel="nofollow">
                            HTTP API Docs
                        </a>
                    </li>
                    <li>
                        <a href="https://matrix-org.github.io/go-neb/pkg/github.com/matrix-org/go-neb/api/index.html#ConfigureServiceRequest" rel="nofollow">
                            JSON Request Body Docs
                        </a>
                    </li>
                </ul>
                <p>
                    List of Services:
                </p>
                <ul>
                    <li>
                        <a href="https://matrix-org.github.io/go-neb/pkg/github.com/matrix-org/go-neb/services/echo/" rel="nofollow">
                            Echo
                        </a>
                        - An example service
                    </li>
                    <li>
                        <a href="https://matrix-org.github.io/go-neb/pkg/github.com/matrix-org/go-neb/services/giphy/" rel="nofollow">
                            Giphy
                        </a>
                        - A GIF bot
                    </li>
                    <li>
                        <a href="https://matrix-org.github.io/go-neb/pkg/github.com/matrix-org/go-neb/services/github/" rel="nofollow">
                            Github
                        </a>
                        - A Github bot
                    </li>
                    <li>
                        <a href="https://matrix-org.github.io/go-neb/pkg/github.com/matrix-org/go-neb/services/github/index.html#WebhookService" rel="nofollow">
                            Github Webhook
                        </a>
                        - A Github notification bot
                    </li>
                    <li>
                        <a href="https://matrix-org.github.io/go-neb/pkg/github.com/matrix-org/go-neb/services/guggy/" rel="nofollow">
                            Guggy
                        </a>
                        - A GIF bot
                    </li>
                    <li>
                        <a href="https://matrix-org.github.io/go-neb/pkg/github.com/matrix-org/go-neb/services/jira/" rel="nofollow">
                            JIRA
                        </a>
                        - Integration with JIRA
                    </li>
                    <li>
                        <a href="https://matrix-org.github.io/go-neb/pkg/github.com/matrix-org/go-neb/services/rssbot/" rel="nofollow">
                            RSS Bot
                        </a>
                        - An Atom/RSS feed reader
                    </li>
                    <li>
                        <a href="https://matrix-org.github.io/go-neb/pkg/github.com/matrix-org/go-neb/services/travisci/" rel="nofollow">
                            Travis CI
                        </a>
                        - Receive build notifications from Travis CI
                    </li>
                </ul>
                <h2>
                    Configuring Realms
                </h2>
                <p>
                    Realms are how Go-NEB authenticates users on third-party websites.
                </p>
                <ul>
                    <li>
                        <a href="https://matrix-org.github.io/go-neb/pkg/github.com/matrix-org/go-neb/api/handlers/index.html#ConfigureAuthRealm.OnIncomingRequest" rel="nofollow">
                            HTTP API Docs
                        </a>
                    </li>
                    <li>
                        <a href="https://matrix-org.github.io/go-neb/pkg/github.com/matrix-org/go-neb/api/index.html#ConfigureAuthRealmRequest" rel="nofollow">
                            JSON Request Body Docs
                        </a>
                    </li>
                </ul>
                <p>
                    List of Realms:
                </p>
                <ul>
                    <li>
                        <a href="https://matrix-org.github.io/go-neb/pkg/github.com/matrix-org/go-neb/realms/github/index.html#Realm" rel="nofollow">
                            Github
                        </a>
                    </li>
                    <li>
                        <a href="https://matrix-org.github.io/go-neb/pkg/github.com/matrix-org/go-neb/realms/jira/index.html#Realm" rel="nofollow">
                            JIRA
                        </a>
                    </li>
                </ul>
                <p>
                    Authentication via HTTP:
                </p>
                <ul>
                    <li>
                        <a href="https://matrix-org.github.io/go-neb/pkg/github.com/matrix-org/go-neb/realms/github/index.html#Realm.RequestAuthSession" rel="nofollow">
                            Github
                        </a>
                    </li>
                    <li>
                        <a href="https://matrix-org.github.io/go-neb/pkg/github.com/matrix-org/go-neb/realms/jira/index.html#Realm.RequestAuthSession" rel="nofollow">
                            JIRA
                        </a>
                    </li>
                </ul>
                <p>
                    Authentication via the config file:
                </p>
                <ul>
                    <li>
                        <a href="https://matrix-org.github.io/go-neb/pkg/github.com/matrix-org/go-neb/realms/github/index.html#Session" rel="nofollow">
                            Github
                        </a>
                    </li>
                    <li>
                        <a href="https://matrix-org.github.io/go-neb/pkg/github.com/matrix-org/go-neb/realms/jira/index.html#Session" rel="nofollow">
                            JIRA
                        </a>
                    </li>
                </ul>
                <h1>
                    Developing
                </h1>
                <p>
                    There's a bunch more tools this project uses when developing in order to do
things like linting. Some of them are bundled with go (fmt and vet) but some
are not. You should install the ones which are not:
                </p>
                <pre class="language-bash"><code>go get github.com/golang/lint/golint
go get github.com/fzipp/gocyclo
</code></pre>
                <p>
                    You can then install the pre-commit hook:
                </p>
                <pre class="language-bash"><code>./hooks/install.sh
</code></pre>
                <h2>
                    Architecture
                </h2>
                <pre class="language-nolang"><code>
            HOMESERVER
            |
+=============================================================+
|      |                 Go-NEB                               |
| +---------+                                                 |
| | Clients |                                                 |
| +---------+                                                 |
|      |                                                      |
| +---------+       +------------+      +--------------+      |
| | Service |-------| Auth Realm |------| Auth Session |-+    |
| +---------+       +------------+      +--------------+ |    |
|     ^                   ^              +---------------+    |
|     |                   |                                   |
+=============================================================+
|                   |                   
WEBHOOK            REDIRECT
REQUEST            REQUEST


Clients      = A thing which can talk to homeservers and listen for events. /configureClient makes these.
Service      = An individual bot, configured by a user. /configureService makes these.
Auth Realm   = A place where a user can authenticate with. /configureAuthRealm makes these.
Auth Session = An individual authentication session /requestAuthSession makes these.

</code></pre>
                <h2>
                    Viewing the API docs
                </h2>
                <p>
                    The full docs can be found on
                    <a href="https://matrix-org.github.io/go-neb/pkg/github.com/matrix-org/go-neb" rel="nofollow">
                        Github Pages
                    </a>
                    . Alternatively, you can locally host the API docs:
                </p>
                <pre class="language-nolang"><code># Start a documentation server listening on :6060
GOPATH=$GOPATH:$(pwd) godoc -v -http=localhost:6060 &amp;

# Open up the documentation for go-neb in a browser.
sensible-browser http://localhost:6060/pkg/github.com/matrix-org/go-neb
</code></pre>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/sgreine/go-neb" rel="nofollow" target="_blank" title="https://github.com/sgreine/go-neb">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
