<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li>
                        <div class="flex-video">
                            <iframe allowfullscreen="allowfullscreen" allowscriptaccess="always" class="video-embed" frameborder="0" height="371" mode="transparent" src="https://www.youtube.com/embed/pnoA957DRqM?enablejsapi=1&amp;hl=en_US&amp;rel=0&amp;start=&amp;version=3&amp;wmode=transparent" type="text/html" webkitallowfullscreen="true" width="660" wmode="transparent">
                            </iframe>
                        </div>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="761193" data-title="User with a great profile" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/761/193/datas/original.png">
                            <img alt="Microsoft User Security Evaluation Reporter &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/761/193/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                User with a great profile
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="761194" data-title="User with a bad profile" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/761/194/datas/original.png">
                            <img alt="Microsoft User Security Evaluation Reporter &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/761/194/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                User with a bad profile
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="761195" data-title="User with a profile that is ok, but could be improved" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/761/195/datas/original.png">
                            <img alt="Microsoft User Security Evaluation Reporter &ndash; screenshot 3" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/761/195/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                User with a profile that is ok, but could be improved
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="761196" data-title="User with a pwned/compromised password" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/761/196/datas/original.png">
                            <img alt="Microsoft User Security Evaluation Reporter &ndash; screenshot 4" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/761/196/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                User with a pwned/compromised password
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="761197" data-title="User Security Evaluation Reporter Architecture" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/761/197/datas/original.png">
                            <img alt="Microsoft User Security Evaluation Reporter &ndash; screenshot 5" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/761/197/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                User Security Evaluation Reporter Architecture
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h1>
                    Microsoft-User-Security-Evaluation-Reporter (MS USER)
                </h1>
                <p>
                    Evaluating and Reporting on Azure Active Directory/Active Directory Users Security Posture
                </p>
                <h2>
                    Problem
                </h2>
                <p>
                    A Security Administrator within an Organisation enables security related configuration options on an Azure Tenant to implement security controls that align an organisation with Microsoft recommendations and best practice. 
The Azure Security Score provides an evaluation on the alignment of an organisation with best practice, however to some extent it still requires end users to have the right configuration for security related elements of their profile. But as a Service Desk Operator or Cyber Security Officer there isn&rsquo;t a single view of a user&rsquo;s security posture that can give you an individual user security score summary.
                </p>
                <h2>
                    Introduction
                </h2>
                <p>
                    Microsoft User Security Evaluation Reporter (USER) is an Azure AD and Active Directory tool for use by the Service Desk and Cyber Security Officers to get instant visibility of an organisations Azure Security Score that allows them to then evaluate current risks within an organisation right down to individual users.
When the Azure WebApp loads the current Azure Security Score is retrieved, evaluated and displayed for alignment with Microsoft Recommendations. Also, on load the last 5 Active Security Risk Events are displayed. 
The Service Desk Operator or Cyber Security Officer can select one of the recent Security Events and drill down further into the associated identity. They will be quickly able to understand the users&rsquo; individual security posture aligned with best practice. 
What are the recent Security Risk Events for that user? Does that user;
                </p>
                <ul>
                    <li>
                        Have MFA enabled? Is MFA enabled with an Authenticator App as the primary method?
                    </li>
                    <li>
                        Is the users Active Directory password in the Pwned Passwords v4 list from Have I Been Pwned?
                    </li>
                    <li>
                        Has the user recently being attempting Azure Password Reset functions?
                    </li>
                    <li>
                        What are the last 10 logins for that user?
                    </li>
                    <li>
                        What is the base user information for that user and what devices are registered to that user? Is the device Azure AD Joined?
                    </li>
                </ul>
                <p>
                    Visual feedback/guidance is given for the retrieved user based on the configuration of the security options or risks associated with their profile.
                </p>
                <h3>
                    Service Desk Operator
                </h3>
                <p>
                    Likewise, any user in the environment can be searched for and returned. When a Service Desk Operator receives a call for a user they can use Microsoft USER to search for and retrieve that user. 
Does the user have multiple accounts (Hybrid (AD and Azure AD), Cloud Only and/or B2B)? What is the users recent activity? 
As part of the call with the end user the Service Desk Operator could configure the users AD/AAD account to require a password change on next logon if their password has been Pwned. They can advise and talk the user through changing their primary MFA method to use an Authenticator App over SMS. They can see if the user has been having problems using Azure Password Reset and why that maybe failing (e.g fuzzy password violation). They can also review the recent logons for the user and if the user&rsquo;s Windows Desktop isn&rsquo;t Azure AD Joined they can talk the user through doing that.
                </p>
                <h2>
                    Summary
                </h2>
                <p>
                    Through everyday use of this tool as part of end-user interactions by the Service Desk Operators and Cyber Security Officers, the Security Posture of end users calling the Service Desk or those who are being flagged with Risk Events can be improved. 
Continuous improvement of end user security posture will also improve the Azure Security Score for the organisation enforcing and aligning with the configuration implemented by the Security Administrators.
                </p>
                <h2>
                    Inspiration
                </h2>
                <p>
                    Recently I've had customers that are looking to improve their security posture. However they don't have visibility of individual users existing posture. 
Likewise when investigating an event there isn't a single view that gives a 360 degree view of a users security posture. This Microsoft User Security Evaluation Reporter solves these problems.
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    On load MS USER retrieves from the Security Graph an Organisations existing Security Score along with the 5 most recent active Security Risk Events.
The Service Desk Operator or Cyber Security Officer can investigate a user associated with an active Security Risk Event or search and return all information for any user in the organisation. 
MS User then displays the following information for the user;
                </p>
                <ul>
                    <li>
                        A Summarised view of the users risk profile
                    </li>
                    <li>
                        Any associated risk events
                    </li>
                    <li>
                        The users primary and other MFA enrolment methods
                    </li>
                    <li>
                        The status of the users Active Directory Password
                    </li>
                    <li>
                        The base users profile
                    </li>
                    <li>
                        Registered Devices associated with the user
                    </li>
                    <li>
                        Recent Sign-In Activity
                    </li>
                    <li>
                        Any recent Azure Self Service Password Reset activity
                    </li>
                </ul>
                <h2>
                    How I built it
                </h2>
                <p>
                    Built using NodeJS and Javascript leveraging Azure Functions to interface with Azure AD, Microsoft Graph, Azure Table Service and Lithnet Password Protection for Active Directory.
All secrets are stored in Azure Key Vault. The WebApp is Application Insights enabled.
The WebApp is deployed using a Docker Container into Azure App Service.
                </p>
                <h2>
                    Challenges I ran into
                </h2>
                <p>
                    I'm not a developer and this is the first WebApp I've written. There were numerous challenges learning JavaScript to write the Front End and try and make it look good. Azure Functions provided the ability to use my PowerShell skills to do the heavy lifting of interfacing with Microsoft Graph for my first ever WebApp.
                </p>
                <h2>
                    Accomplishments that I'm proud of
                </h2>
                <ul>
                    <li>
                        Developing a solution that is relevant and valuable
                    </li>
                    <li>
                        Writing my first WebApp
                    </li>
                    <li>
                        Creating my first Docker Image for a WebApp and pushing it to my first Azure Container Registry and deploying it to Azure App Service.
                    </li>
                    <li>
                        Entering my second hackathon
                    </li>
                </ul>
                <h2>
                    What I learned
                </h2>
                <ul>
                    <li>
                        Azure Security Graph
                    </li>
                    <li>
                        Microsoft Graph JSON Batching
                    </li>
                    <li>
                        Azure oAuth Token automation with Azure Functions
                    </li>
                    <li>
                        Javascript
                    </li>
                    <li>
                        Azure Container Registry
                    </li>
                    <li>
                        Docker Images
                    </li>
                    <li>
                        Azure Application Insights
                    </li>
                    <li>
                        Azure Web Application creation and deployment
                    </li>
                    <li>
                        Lithnet Password Protection for Active Directory
                    </li>
                    <li>
                        Have I Been Pwned NTLM Hashes for Pwned Password
                    </li>
                </ul>
                <h2>
                    What's next for Microsoft User Security Evaluation Reporter
                </h2>
                <p>
                    It would be great to have assistance from a front-end developer to streamline the application and reduce some of the dependencies on Azure Functions. 
Extensions to the application could include;
                </p>
                <ul>
                    <li>
                        the ability to force a user to change their password on next logon (if their password is contained in the compromised list)
                    </li>
                    <li>
                        the ability to force a user to register additional MFA methods (e.g get the user to use the Microsoft Authenticator App over SMS)
                    </li>
                    <li>
                        send the user a notification informing them of their security posture and how they could improve it
                    </li>
                    <li>
                        a report/export/pdf button for a Service Desk Operator to send a users profile to a Cyber Security Officer for review
                    </li>
                    <li>
                        subscribe to security graph events for users
                    </li>
                </ul>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/azure">
                                azure
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/docker">
                                docker
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/javascript">
                                javascript
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/node-js">
                                node.js
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            powershell
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/darrenjrobinson/Microsoft-User-Security-Evaulation-Reporter" rel="nofollow" target="_blank" title="https://github.com/darrenjrobinson/Microsoft-User-Security-Evaulation-Reporter">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
