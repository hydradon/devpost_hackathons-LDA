<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li class="text-center">
                        <a data-lightbox="411429" data-title="Website " href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/411/429/datas/original.png">
                            <img alt="HeyKanye &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/411/429/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Website
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="413426" data-title="Visual representation of the process to generate a song" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/413/426/datas/original.png">
                            <img alt="HeyKanye &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/413/426/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Visual representation of the process to generate a song
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="411471" data-title="kanye." href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/411/471/datas/original.jpg">
                            <img alt="HeyKanye &ndash; screenshot 3" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/411/471/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                kanye.
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="411472" data-title="kanye." href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/411/472/datas/original.jpg">
                            <img alt="HeyKanye &ndash; screenshot 4" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/411/472/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                kanye.
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="411473" data-title="kanye." href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/411/473/datas/original.jpg">
                            <img alt="HeyKanye &ndash; screenshot 5" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/411/473/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                kanye.
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="411474" data-title="kanye?!" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/411/474/datas/original.jpg">
                            <img alt="HeyKanye &ndash; screenshot 6" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/411/474/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                kanye?!
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Inspiration
                </h2>
                <p>
                    We wanted to see what kind of things we can produce with structured grammar, synced to a beat.
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    HeyKanye takes song lyrics with valid grammar (eg. an artist's album, not necessarily yeezy) and an instrumental to generate a new song based on the inputs, with an artificial voice.
                </p>
                <p>
                    <strong>
                        Features:
                    </strong>
                </p>
                <ul>
                    <li>
                        sync lyrics to beats and proper chorus-verse structure for a structurally accurate song
                    </li>
                    <li>
                        use multiple rhyme sequences to generate an accurate song
                    </li>
                    <li>
                        detect the parts of beat with repetitive patterns
                    </li>
                    <li>
                        use the grammar of the text file to generate a song with a similar style.
                    </li>
                </ul>
                <h2>
                    How we built it
                </h2>
                <p>
                    We used music lyrics APIs to pull in bulk lyrics data to the database. We then further established database tables to map word relationships and line relationships. For example, our database stored data on common word pairs, common words in preceding lines of a word, common sentence structures, etc.
                </p>
                <p>
                    We used python to build Markov chains that likelihood of certain words following other words, similar to Swiftkey&rsquo;s predictive text. By feeding our Azure SQL database the lyrics of the artists with which we want to base our rap on, our Markov chains become unique to that set of lyrics.
                </p>
                <p>
                    We defined the grammar used for the songs using parse trees (an ordered collection of Nouns, Verbs and Adjectives) built on top of the nltk library and connected our algorithm to Microsoft Azure's Web Language Model API. We also used common parse trees that were found in our dataset. We generated rap lines by conforming our Markov chains to valid parse trees.
                </p>
                <p>
                    From there, we seeded Azure&rsquo;s algorithm with our generated sentences to add more vocabulary from the internet in the same style. Azure&rsquo;s API was also used for validation and ensured only the sentences that made the most sense were used in our rap.
                </p>
                <p>
                    As for syncing the lyrics to the music, we used librosa to extract onset (key pitch and beat changes) features from the track. Using this data, we used an edge detecting algorithm and found the time differences between each onset in order to identify the timestamps chorus and the verses. Using that data, we use linux&rsquo;s espeak to write the text-to-speech of our lyrics into .wav files with their timestamps as their filename. The speed of the speech was determined by the length of the verse relative to the timestamp it was allocated to. Once completed, we grafted every generated text-to-speech .wav onto the base beat to generate a new overlaid wav file which we converted to mp3.
                </p>
                <h1>
                    Challenges we ran into
                </h1>
                <ol>
                    <li>
                        Database issues... (as always)
                    </li>
                    <li>
                        We went through many implementations of the HMM model to produce structurally correct data. We chose to construct the model based off word by word rather than line by line so we can have a truly random song implementation using grammar rules and parse trees.
                    </li>
                    <li>
                        A lot of dirty things generated by words
                    </li>
                    <li>
                        Connecting the back-end to the front-end
                    </li>
                </ol>
                <h2>
                    Accomplishments that we're proud of
                </h2>
                <p>
                    None of us really had any experience with the stack before the hackathon and tried something new.
                </p>
                <ul>
                    <li>
                        entire audio detecting process / text-to-speech reproduction
                    </li>
                    <li>
                        web-stack for our front end website
                    </li>
                    <li>
                        HMM's to determine lyric generation
                    </li>
                </ul>
                <h2>
                    What we learned
                </h2>
                <ul>
                    <li>
                        features of Azure's database as well as their multiple libraries for machine learning and nlp
                    </li>
                    <li>
                        HMM models from scratch, with optimization through Microsoft Azure
                    </li>
                    <li>
                        edge detecting algos with audio inspecting libraries.
                    </li>
                </ul>
                <h2>
                    What's next for HeyKanye
                </h2>
                <ul>
                    <li>
                        Dynamic generation of different styles of songs based on user input
                    </li>
                    <li>
                        Create different databases to store lyrics of different groups (i.e. different genres, different eras etc) that can be used to produce different styled songs
                    </li>
                    <li>
                        Create a more full scale web application that permits sharing of music
                    </li>
                    <li>
                        Any new text-to-speech libraries if they are made for different voices
                    </li>
                </ul>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/azure">
                                azure
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/css">
                                css
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/html">
                                html
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/javascript">
                                javascript
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/natural-language-processing">
                                natural-language-processing
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/python">
                                python
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/sqlite">
                                sqlite
                            </a>
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/ehliang/rapGen" rel="nofollow" target="_blank" title="https://github.com/ehliang/rapGen">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
