<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li>
                        <div class="flex-video">
                            <iframe allowfullscreen="allowfullscreen" allowscriptaccess="always" class="video-embed" frameborder="0" height="371" mode="transparent" src="https://www.youtube.com/embed/v9Pfe-mMXHY?enablejsapi=1&amp;hl=en_US&amp;rel=0&amp;start=&amp;version=3&amp;wmode=transparent" type="text/html" webkitallowfullscreen="true" width="660" wmode="transparent">
                            </iframe>
                        </div>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="837578" data-title="Trash&eacute; Dashboard" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/837/578/datas/original.png">
                            <img alt="Trash&eacute; &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/837/578/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Trash&eacute; Dashboard
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="837579" data-title="Trash&eacute; Architecture Diagram" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/837/579/datas/original.png">
                            <img alt="Trash&eacute; &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/837/579/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Trash&eacute; Architecture Diagram
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h1>
                    Trash&eacute;
                </h1>
                <p>
                    Trash&eacute; is a SmartBin which aim to help you get better at recycling. Making use of Azure Cognitive Services to create a deep learning model to detect plastic, glass and metal recyclables in real time, using Azure IoT Edge to perform inference and transport predictions to other Azure Services.
                </p>
                <h2>
                    How we built it
                </h2>
                <hr>
                <h3>
                    Software Architecture
                </h3>
                <p>
                    At a high level this diagram can be broken into three distinct sections
                </p>
                <h4>
                    Custom Vision &amp; Model
                </h4>
                <p>
                    Building a multiclass predictor using
                    <a href="www.customvision.ai" rel="nofollow">
                        customvision.ai
                    </a>
                    , one of Microsofts Cognitive Services.
                </p>
                <p>
                    <img alt="Architecture Model" data-canonical-url="https://raw.githubusercontent.com/t04glovern/azure-iot-trashe/master/designs/trashe-azure-architecture-model.png" src="https://res.cloudinary.com/devpost/image/fetch/s--ipka9ii_--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://raw.githubusercontent.com/t04glovern/azure-iot-trashe/master/designs/trashe-azure-architecture-model.png">
                </p>
                <h4>
                    IoT Edge
                </h4>
                <p>
                    Using Azures IoT suite to do edge inference on live images provided by a camera connected to a Raspberry Pi
                </p>
                <p>
                    <img alt="Architecture IoT" data-canonical-url="https://raw.githubusercontent.com/t04glovern/azure-iot-trashe/master/designs/trashe-azure-architecture-iot.png" src="https://res.cloudinary.com/devpost/image/fetch/s--kPfWw3Yx--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://raw.githubusercontent.com/t04glovern/azure-iot-trashe/master/designs/trashe-azure-architecture-iot.png">
                </p>
                <h4>
                    Web Frontend
                </h4>
                <p>
                    Creating a nodejs backend, using azure functions to write data from the IoT Hub into a CosmoDB instance.
                </p>
                <p>
                    <img alt="Architecture Web App" data-canonical-url="https://raw.githubusercontent.com/t04glovern/azure-iot-trashe/master/designs/trashe-azure-architecture-web-app.png" src="https://res.cloudinary.com/devpost/image/fetch/s--ubhtEJy3--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://raw.githubusercontent.com/t04glovern/azure-iot-trashe/master/designs/trashe-azure-architecture-web-app.png">
                </p>
                <h3>
                    Hardware Architecture
                </h3>
                <p>
                    Our initial hardware design for this project is to attach the Raspberry Pi, Camera and light to a bin, to do inference on a bins content to see what is recyclable and what isn't.
                </p>
                <p>
                    <img alt="Bin Design" data-canonical-url="https://raw.githubusercontent.com/t04glovern/azure-iot-trashe/master/designs/trashe-bin-design.jpg" src="https://res.cloudinary.com/devpost/image/fetch/s--Hr_JBXGF--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://raw.githubusercontent.com/t04glovern/azure-iot-trashe/master/designs/trashe-bin-design.jpg">
                </p>
                <h2>
                    Challenges we ran into
                </h2>
                <hr>
                <p>
                    There were a number of challenges that we ran into during the design and execution phase of this project.
                </p>
                <h3>
                    Gathering the Dataset
                </h3>
                <p>
                    A key part of our design was to incorporate a custom Machine Learning model that could classify different kinds of trash.
While we could have gone the time consuming route of collecting our own images / scraping the internet for images and building our own dataset, we decided to repurpose two existing MIT licensed datasets:
                </p>
                <ul>
                    <li>
                        <a href="https://github.com/garythung/trashnet" rel="nofollow">
                            garythung/trashnet
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/pedropro/TACO" rel="nofollow">
                            pedropro/TACO
                        </a>
                    </li>
                </ul>
                <p>
                    These models were built to detect the presence of trash, not to try to classify trash into recyclables and non recyclables, so some manual annotations were required to build the required classes of images.
We classified all our images by hand using the drop and drag interface on
                    <a href="https://customvision.ai" rel="nofollow">
                        https://customvision.ai
                    </a>
                    . After classifying over 2500 images into 14 classes we had a usable dataset.
                </p>
                <p>
                    After doing the labeling, customvision.ai made it easy to train our model, automatically doing the model selection, test/train split and model training processes. The output of this was a set of predictions and a docker container targeted towards our desired architecture (ARM for a Raspberry Pi).
                </p>
                <p>
                    <img alt="CustomVision Prediction Results" data-canonical-url="https://raw.githubusercontent.com/t04glovern/azure-iot-trashe/master/designs/custom-ai-prediction-01.jpg" src="https://res.cloudinary.com/devpost/image/fetch/s--9ewRfJwb--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://raw.githubusercontent.com/t04glovern/azure-iot-trashe/master/designs/custom-ai-prediction-01.jpg">
                </p>
                <p>
                    Based on our results, the outcomes seem perfectly reasonable for the current use-case, especially for a proof of concept of "is this actually possible", and gives us a baseline to move forward from.
                </p>
                <h3>
                    Model Deployment
                </h3>
                <p>
                    We'd set ourselves a bit of a challenge: for the actual creation of everything IoT related we would try to do as much service creation and deployment as code, trying to keep our steps repeatable.
                </p>
                <h3>
                    Dark Bin
                </h3>
                <p>
                    Surprisingly with all of the technical challenges, one of the problems we encounted was actually simplistic. Our model did not perform well when we attempted it in real life because the lighting of the bin was insufficient to get a clear image. We wanted to avoid manual interaction so a simple lighting system was cobbled together using a small
                    <a href="https://www.altronics.com.au/p/d0385-dimmable-usb-gooseneck-led-light/" rel="nofollow">
                        USB LED light
                    </a>
                    we had laying around.
                </p>
                <p>
                    <img alt="Lighting Example" data-canonical-url="https://raw.githubusercontent.com/t04glovern/azure-iot-trashe/master/designs/trashe-light-example.gif" src="https://res.cloudinary.com/devpost/image/fetch/s--AW6GpxQz--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/https://raw.githubusercontent.com/t04glovern/azure-iot-trashe/master/designs/trashe-light-example.gif">
                </p>
                <h2>
                    Accomplishments that we're proud of
                </h2>
                <hr>
                <h3>
                    End to End Solution
                </h3>
                <p>
                    Initially we only planned to work on a Vision model, however as we progressed we became more ambitious and eventually built out the end-to-end solution we're submitting now.
We feel there was a lot more to learn in building a pipeline that included model creation, deploying the model on the edge and building a web application than just building a web application to consume an external API.
                </p>
                <h3>
                    Open Sourced Guide
                </h3>
                <p>
                    Another thing we're really proud of is the level of details put into the guide written as we built out this system. Not only should all steps be automated, but they give a good understanding of the decisions made during the development of Trash&eacute;.
                </p>
                <ul>
                    <li>
                        <a href="https://github.com/t04glovern/azure-iot-trashe/tree/master/instructions/01_custom_vision/README.md" rel="nofollow">
                            01_custom_vision
                        </a>
                        <ul>
                            <li>
                                <a href="https://github.com/t04glovern/azure-iot-trashe/tree/master/instructions/01_custom_vision/01_custom_vision_model.md" rel="nofollow">
                                    01_custom_vision_model
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/t04glovern/azure-iot-trashe/tree/master/instructions/01_custom_vision/02_container_registry.md" rel="nofollow">
                                    02_container_registry
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="https://github.com/t04glovern/azure-iot-trashe/tree/master/instructions/02_iot/README.md" rel="nofollow">
                            02_iot
                        </a>
                        <ul>
                            <li>
                                <a href="https://github.com/t04glovern/azure-iot-trashe/tree/master/instructions/02_iot/01_raspberry_pi.md" rel="nofollow">
                                    01_raspberry_pi
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/t04glovern/azure-iot-trashe/tree/master/instructions/02_iot/02_azure_iot_edge.md" rel="nofollow">
                                    02_azure_iot_edge
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/t04glovern/azure-iot-trashe/tree/master/instructions/02_iot/03_azure_iot.md" rel="nofollow">
                                    03_azure_iot
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/t04glovern/azure-iot-trashe/tree/master/instructions/02_iot/04_blinker.md" rel="nofollow">
                                    04_blinker
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/t04glovern/azure-iot-trashe/tree/master/instructions/02_iot/05_usb_camera.md" rel="nofollow">
                                    05_usb_camera
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/t04glovern/azure-iot-trashe/tree/master/instructions/02_iot/06_camera_capture.md" rel="nofollow">
                                    06_camera_capture
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/t04glovern/azure-iot-trashe/tree/master/instructions/02_iot/07_image_classifier_service.md" rel="nofollow">
                                    07_image_classifier_service
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="https://github.com/t04glovern/azure-iot-trashe/tree/master/instructions/03_web/README.md" rel="nofollow">
                            03_web
                        </a>
                        <ul>
                            <li>
                                <a href="https://github.com/t04glovern/azure-iot-trashe/tree/master/instructions/03_web/01_service_bus.md" rel="nofollow">
                                    01_service_bus
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/t04glovern/azure-iot-trashe/tree/master/instructions/03_web/02_queue_process.md" rel="nofollow">
                                    02_queue_process
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/t04glovern/azure-iot-trashe/tree/master/instructions/03_web/03_cosmos_db_webapp.md" rel="nofollow">
                                    03_cosmos_db_webapp
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/t04glovern/azure-iot-trashe/tree/master/instructions/03_web/04_queue_processing_revisited.md" rel="nofollow">
                                    04_queue_processing_revisited
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
                <h2>
                    What we learned
                </h2>
                <hr>
                <p>
                    This was the first time using Azure and it was great to experience some of the details in using the platform.
                </p>
                <p>
                    We particularly found it surprisingly easy to create a containerised machine learning model using the Azure Cognitive Vision service. Not having to worry about manually deciding a neural network architecture (or reading papers on architectures that are well suited to our specific task) allowed us to remove distractions and focus on how to get to our goal of an end to end system faster.
                </p>
                <h3>
                    Azure Resource Manager
                </h3>
                <p>
                    We loved being able to use Azure Resource Manager in order to repeatably deploy the entire backend stack. It really helped when co-working on this project as it meant that both of us knew with certainty that we had the same setups.
                </p>
                <h3>
                    Azure IoT Edge
                </h3>
                <p>
                    We learnt that Azure IoT Edge was a great platform to work with in respects to managing containerised deployments to the edge.
                </p>
                <p>
                    It was fantastic to be able to setup the Raspberry Pi on the bin with IoT Edge and then fully manage deployments to it using VSCode and deployment templates.
                </p>
                <h2>
                    What's next for Trash&eacute;
                </h2>
                <p>
                    The big next technical step for a proper production system is to investigate how to use gathered predictions to further improve the vision model and how to automatically train the model using new data and push to the IoT device if our desired metric has increased.
                </p>
                <p>
                    We would like to increase the number of labels and dataset that we use to do a better job of detecting things that people constantly get wrong when recycling. Eg plastic bags often aren't accepted as recycling, bottles need to have their lids taken off.
                </p>
                <p>
                    It would also be useful to have Trash&eacute; be more of standalone unit. We see it being useful for recycling centers to be able to get a better idea of what the composition from each truck is to get a better idea of specific areas where councils can target education programs. It could also be more useful to monitor the metrics of the kinds of materials coming in vs the materials that are actually recycled to monitor things like contamination rates for specific classes of materials.
                </p>
                <hr>
                <h3>
                    Further Training Model
                </h3>
                <p>
                    As mention above, the model currently has a reasonable accuracy that works fine for this proof of concept, however incorporating more and more annotated data would only further better the product.
                </p>
                <p>
                    The
                    <a href="http://tacodataset.org/" rel="nofollow">
                        TACO dataset
                    </a>
                    will be a good group to work with as we can leverage their crowd sourced data, whilst also feeding back in the work we do on annotation.
                </p>
                <h3>
                    Frontend &amp; Mobile Experience
                </h3>
                <p>
                    We would like to improve on in the frontend and mobile experience of the system. Most of the work around this project initially has been on the IoT Edge system, and the model for inference; however if we are to productionise this it will need a better user experience for monitoring and resolving recycling events.
                </p>
                <p>
                    We would also like to build in some dash-boarding and stats to help users understand what they are throwing away and the impact they can have by recycling.
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/azure">
                                azure
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/azure-iot-suite">
                                azure-iot-suite
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/docker">
                                docker
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/raspberry-pi">
                                raspberry-pi
                            </a>
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/t04glovern/azure-iot-trashe" rel="nofollow" target="_blank" title="https://github.com/t04glovern/azure-iot-trashe">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
