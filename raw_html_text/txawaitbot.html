<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li>
                        <div class="flex-video">
                            <iframe allowfullscreen="allowfullscreen" allowscriptaccess="always" class="video-embed" frameborder="0" height="371" mode="transparent" src="https://www.youtube.com/embed/blgqFO4v4V8?enablejsapi=1&amp;hl=en_US&amp;rel=0&amp;start=&amp;version=3&amp;wmode=transparent" type="text/html" webkitallowfullscreen="true" width="660" wmode="transparent">
                            </iframe>
                        </div>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="889771" data-title="bot intro page" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/889/771/datas/original.jpeg">
                            <img alt="txawaitbot &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/889/771/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                bot intro page
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="889772" data-title="translating a normal invoice into an awaitable invoice" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/889/772/datas/original.jpeg">
                            <img alt="txawaitbot &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/889/772/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                translating a normal invoice into an awaitable invoice
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <p>
                    This was inspired by my
                    <a href="https://devpost.com/software/fakechannels" rel="nofollow">
                        shadows c-lightning plugin
                    </a>
                    .
                </p>
                <p>
                    It's a way for people on noncustodial mobile wallets to receive payments asynchronously and trustlessly.
                </p>
                <p>
                    Imagine there's an user Bob who uses a Lightning mobile wallet such as
                    <a href="https://lightning-wallet.com/" rel="nofollow">
                        BLW
                    </a>
                    . Bob wants to receive a payment from Alice, so he's going to send her an invoice. But he doesn't know when will Alice see his message or if she's going to pay immediately. If he doesn't keep his mobile wallet open her payment will fail.
                </p>
                <p>
                    On my c-lightning node I have a plugin that controls a
                    <a href="https://t.me/txawaitbot" rel="nofollow">
                        Telegram bot
                    </a>
                    .
                </p>
                <p>
                    Bob can then generate an invoice on this wallet, open a chat with that bot and send the invoice.
                </p>
                <p>
                    The bot will generate a new invoice passing through it
                    <strong>
                        using the same hash
                    </strong>
                    (this is important because this means the bot can't steal the payment from Bob). Let's call that an
                    <em>
                        awaitable invoice
                    </em>
                    . Bob sends the awaitable invoice to Alice and can close his wallet.
                </p>
                <p>
                    5 hours later Alice decides to pay Bob. She sends a payment from her wallet. The c-lightning plugin will intercept that payment and send a message to Bob through the bot. Bob will get a notification on his Telegram.
                </p>
                <p>
                    The bot will wait up to 30 minutes for Bob to see the notification, open his wallet and press "ok" at the bot. Then the bot will pay Bob's original invoice, get the preimage for the hash and release it to Alice.
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag">
                            c-lightning
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/go">
                                go
                            </a>
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://t.me/txawaitbot" rel="nofollow" target="_blank" title="https://t.me/txawaitbot">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                t.me
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
