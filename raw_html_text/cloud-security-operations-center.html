<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li>
                        <div class="flex-video">
                            <iframe allowfullscreen="allowfullscreen" allowscriptaccess="always" class="video-embed" frameborder="0" height="371" mode="transparent" src="https://www.youtube.com/embed/hJR_22YoQbM?enablejsapi=1&amp;hl=en_US&amp;rel=0&amp;start=&amp;version=3&amp;wmode=transparent" type="text/html" webkitallowfullscreen="true" width="660" wmode="transparent">
                            </iframe>
                        </div>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="767947" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/767/947/datas/original.png">
                            <img alt="Cloud Security Operations Center &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/767/947/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="767945" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/767/945/datas/original.jpg">
                            <img alt="Cloud Security Operations Center &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/767/945/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="767937" data-title="Our Vision" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/767/937/datas/original.png">
                            <img alt="Cloud Security Operations Center &ndash; screenshot 3" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/767/937/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Our Vision
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="767938" data-title="Cloud Native SOC" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/767/938/datas/original.png">
                            <img alt="Cloud Security Operations Center &ndash; screenshot 4" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/767/938/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Cloud Native SOC
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Inspiration
                </h2>
                <p>
                    The problem with our managed SOC (called Cloud Security Center) was the use of different dashboards and mailboxes to get the security alerts. This information that was fragmented and we needed to consolidate and correlate the information (e.g. which user used which workstation). Our SecOps department was very busy consolidating all the information from the different Security &amp; Compliance products and we needed to operate in a multi-tenant environment.
                </p>
                <p>
                    We needed to optimize our information gathering in a safe and secure environment which supported automation. The Protect solutions were implemented by our SecAdmins via the Security Baseline. The SecOps workload is Detect, investigate and Respond to the Security alerts and to minimize the number of false-positives (our security baseline helps with that).
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    We leveraged the Security Graph API to read the security alerts, first via a pull mechanism and in the next version in a push mechanism via notifications. We built the solution to connect any ticketing system possible via the API of the ticketing system, in our case we used FreshService.
                </p>
                <p>
                    We read alerts from all Security providers supported by the graph API and present them via the user chain objects Identity, Devices, Apps &amp; Data by leveraging the security providers like e.g. Azure Security Center, Identity Protection Center, Windows Defender Advance Threat Protection, Microsoft Cloud App Security. The same approach applies to the Infrastructure solution.
                </p>
                <p>
                    The solution supports multi-tenancy and we safely store the data to enrich the tickets (e.g. classify the object like the user, device or data of the c-level management).
                </p>
                <p>
                    To elaborate on that, we gather information about security from the following sources:
                </p>
                <ul>
                    <li>
                        Graph API - Security
                        <ul>
                            <li>
                                Alerts
                            </li>
                            <li>
                                Secure Score
                            </li>
                            <li>
                                Secure Score Control Profiles (for recommendations on raising secure score)
                            </li>
                        </ul>
                    </li>
                    <li>
                        Graph API - Sign-In
                        <ul>
                            <li>
                                Retrieving the last sign-ins of a user to determine if authentication was with MFA enforced. If so automatically closing the security alert.
                            </li>
                        </ul>
                    </li>
                    <li>
                        Graph API - Directory Audit
                        <ul>
                            <li>
                                Monitor users for strange behavior, especially on sign-ins from an unfamiliar location.
                            </li>
                        </ul>
                    </li>
                </ul>
                <p>
                    Next to the Graph API we also get information through Azure Resource REST API to gather:
                </p>
                <ul>
                    <li>
                        All Azure Resources
                        <ul>
                            <li>
                                We get notified on resources that are not monitored by our SOC and therefore are a possible threat for breaches. This is done by reading tags from the Azure resources.
                            </li>
                        </ul>
                    </li>
                </ul>
                <h2>
                    How we built it
                </h2>
                <p>
                    Using Azure functions for specific serverless logic like:
                </p>
                <ul>
                    <li>
                        Polling Security Alerts
                    </li>
                    <li>
                        Receiving Notifications from Graph API
                    </li>
                    <li>
                        Managing Graph API notification subscriptions
                    </li>
                    <li>
                        Processing and transforming data
                    </li>
                </ul>
                <p>
                    Using Logic Apps:
                </p>
                <ul>
                    <li>
                        Receiving Alerts from Azure Functions
                    </li>
                    <li>
                        Pushing updates of Alerts back into Azure
                    </li>
                    <li>
                        Enriching alerts with data retrieved from other above-mentioned API's
                    </li>
                    <li>
                        Posting a ticket to a third party cloud-based ticket system
                    </li>
                </ul>
                <p>
                    Other than Functions and Logic Apps we are using CosmosDB for detecting duplicate security alerts. We are also using an Azure Data Lake for storing information so we can use AI to further analyze the security alerts.
                </p>
                <h2>
                    Challenges we ran into
                </h2>
                <ul>
                    <li>
                        Not storing any sensitive data that comes out of Azure security products about users and resources on places other than our Ticket system.
                    </li>
                    <li>
                        Making it unavailable from the outside (verified via pen-testing).
                    </li>
                    <li>
                        Not storing any Secrets in configs, only Azure KeyVault is used.
                    </li>
                    <li>
                        Not every security provider through the Graph API supports notifications (only polling).
                    </li>
                </ul>
                <h2>
                    Accomplishments that we are proud of
                </h2>
                <ul>
                    <li>
                        Making a highly scalable solution.
                    </li>
                    <li>
                        Very low monthly costs by not only pulling all the alerts by a set interval but also subscribing to notifications.
                    </li>
                    <li>
                        Everything is Stateless, making is easy to resend/retry part of the solution and also to update the production environment while it's live.
                    </li>
                    <li>
                        Making data in CosmosDB only available for the tenant that the code is executing for by using the tenant id as a partition key. By making the partition key required it is virtually impossible to retrieve data from a different tenant.
                    </li>
                </ul>
                <h2>
                    What we learned
                </h2>
                <p>
                    The learning curve from day one in a Cloud world is the use of the Security Graph API itself (version control) and the output from the different providers, some providers give more in-depth information and some give basic information. Second, we needed to find a solution on duplicates from the different providers, e.g. Azure AD Identity Protection has an overlap with Microsoft Cloud App Security (Threats).
                </p>
                <h2>
                    What's next for Cloud Security Operations Center
                </h2>
                <ul>
                    <li>
                        Adding AI to correlate more data (sources) and use intelligence to reduce the number of false-positives
                    </li>
                    <li>
                        Integrate SOC services like vulnerability scanning and new(s) malware reports for our customer (CISO) to give them a peace of mind
                    </li>
                </ul>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/net">
                                .net
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            application-insights
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/azure">
                                azure
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            azure-data-lake
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            azure-functions
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            azure-logic-apps
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/c--2">
                                c#
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            cosmosdb
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            keyvault
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            service-bus
                        </span>
                    </li>
                </ul>
            </div>
        </div>
    </body>
</html>
