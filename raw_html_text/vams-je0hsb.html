<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li>
                        <div class="flex-video">
                            <iframe allowfullscreen="allowfullscreen" allowscriptaccess="always" class="video-embed" frameborder="0" height="371" mode="transparent" src="https://www.youtube.com/embed/0lrVQHDt7Mo?enablejsapi=1&amp;hl=en_US&amp;rel=0&amp;start=&amp;version=3&amp;wmode=transparent" type="text/html" webkitallowfullscreen="true" width="660" wmode="transparent">
                            </iframe>
                        </div>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="669857" data-title="VAMS" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/669/857/datas/original.JPG">
                            <img alt=" VAMS &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/669/857/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                VAMS
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="669855" data-title="IoT architecture and data flow" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/669/855/datas/original.jpg">
                            <img alt=" VAMS &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/669/855/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                IoT architecture and data flow
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="669854" data-title="OBD-2 Edge data flow" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/669/854/datas/original.jpg">
                            <img alt=" VAMS &ndash; screenshot 3" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/669/854/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                OBD-2 Edge data flow
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="669860" data-title="OBD-2 Interaction" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/669/860/datas/original.JPG">
                            <img alt=" VAMS &ndash; screenshot 4" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/669/860/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                OBD-2 Interaction
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="669861" data-title="VAMS Azure function C#" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/669/861/datas/original.png">
                            <img alt=" VAMS &ndash; screenshot 5" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/669/861/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                VAMS Azure function C#
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="669856" data-title="Screenshot of the power bi dashboard from web" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/669/856/datas/original.png">
                            <img alt=" VAMS &ndash; screenshot 6" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/669/856/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Screenshot of the power bi dashboard from web
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="669859" data-title="Screenshot of the Power Bi dashboard from Power Bi android app" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/669/859/datas/original.jpg">
                            <img alt=" VAMS &ndash; screenshot 7" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/669/859/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Screenshot of the Power Bi dashboard from Power Bi android app
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Inspiration
                </h2>
                <p>
                    In daily cases we come across situations where we have to deal with any third person driving our vehicles or we may be the owner of some renting company, renting 4-wheelers. In these situations, we may have to monitor our vehicles remotely for understanding the driving conditions of the vehicle and as well as understand the vehicle performance. In a worst-case scenario, if our vehicle meets with an accident, we may need to have a look at exactly what went wrong.
                </p>
                <p>
                    Some months back, I was driving my car and going to a quick fuel recharge and the windshield kept on fogging thus reducing my visibility. While taking a small turn, I accidently hit the divider and the car overturned. Fortunately, no one was hurt. I till date don&rsquo;t have much of an idea what went wrong. Obviously, the fog was responsible but what was the speed, rpm of the vehicle is still unknown to me. At such times, it&rsquo;s very important to know the telemetry parameter to understand the reason behind such mishaps and also create 
Thus, we came up with VAMS. Vehicle advanced monitoring system provides an all in one solution where we can monitor our vehicle&rsquo;s data remotely and at the same time the stored data can be used to assess driving conditions, terrain conditions and in case of a mishap, be used to understand what went wrong. The use-case discussed here are only the tip of the ice-berg and more can be used for further analysis.
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    It uses the OBD-2 port to interact with the vehicle&rsquo;s ECU. The ELM327 IC HANDLES all the communication between the Raspberry Pi and the OBD-2. Through a python script which is running in the Raspberry Pi, we stream in all the incoming data to the Azure IoT Hub. At this stage we are interested in three primary parameters namely speed, engine rpm and coolant temperature. These telemetry data along with the vehicle details like registration number are streamed to the IoT Hub.
                    <br>
                    Our system uses the combination of Azure IoT Hub, Azure function, Azure Cosmos DB and Microsoft Power BI to save and visualise the data live as well as save it to a Cosmos DB using Mongo DB API. The only necessary parameter as of now for our system to work is the availability of Internet. 
Once the vehicle is started, the Raspberry Pi starts streaming the data after connecting itself to the OBD-2 scanner via bluetooth.
                </p>
                <h2>
                    How I built it
                </h2>
                <p>
                    <strong>
                        Edge Device
                    </strong>
                </p>
                <p>
                    It includes the OBD-2 interface which interacts with the vehicle&rsquo;s ECU. Additionally, it also includes the Raspberry Pi which interacts with the scanner to get the data. The Raspberry Pi is model zero w which has Wi-Fi and bluetooth capability. All the data (speed, rpm and temperature in this case), are then routed to the Azure IoT hub for further processing. The Raspberry Pi can be powered by the 12V power outlet from the vehicle and the OBD-2 adapter receives power from the port.
                </p>
                <p>
                    <strong>
                        Cloud connectors
                    </strong>
                </p>
                <p>
                    The edge device streams all the data to the Azure IoT hub using device ID and the respected connection string. The IoT hub is triggering an azure function which is the main component of the entire system. The Azure function app gets triggered whenever there is an incoming message in the Azure IoT hub. The function then handles the message and routes it to other areas like Cosmos DB and Power Bi. The function is coded in C#. The data flow is shown below.
                </p>
                <p>
                    <strong>
                        Data storage and visualisation
                    </strong>
                </p>
                <p>
                    We are using Azure cosmos DB with Mongo DB API and power Bi for visualisation. The power bi uses streaming data-set and a Power BI dashboard for visualisation. A screenshot is shown in the attached image.
                </p>
                <p>
                    <strong>
                        The Dashboard
                    </strong>
                </p>
                <p>
                    The dashboard in the video is the power bi dashboard in the power bi app for ios as displayed in an ipad. The dashboard was designed using the web app for power bi.
                </p>
                <h2>
                    Challenges I ran into
                </h2>
                <p>
                    The major challenge for us was that since, we didn't had any simulator for OBD-2. Each time we tried out some features, or developed something new, we ended up coding inside the car. Getting a synchronised data from the port was also a challenge and getting a stable internet connectivity travelling was kind of challenging.
                </p>
                <h2>
                    Accomplishments that I'm proud of
                </h2>
                <p>
                    We are proud of attaining synchronous communication flow from edge to dashboard using the entire Azure stack. From ECU to IoT hub and from Function to Power BI dashboard.
                </p>
                <h2>
                    What I learned
                </h2>
                <p>
                    We learnt a lot of stuffs including the way how Azure IoT hub works using mqtt, the triggering of an azure function and ultimately the storage capability of cosmos DB and live power bi dashboard. We also learnt that how ECU functions, the CAN BUS and ultimately details of several Parameter ID(s) and Error code DTC in a car.
                </p>
                <h2>
                    What's next for VAMS
                </h2>
                <p>
                    The future of VAMS is to deploy it as a single embedded device which will require minimum configuration and will come up with a flash memory which will act as a local DB. This DB will update the global DB when internet connectivity will be established. Additionally this will include more parameters depending on the class of the vehicle. We will be able to analyse the different driving patterns and also include maps which will give us a strong conclusion about the driving patterns and conditions in different terrain(s). Also more sensors like the IMU will be integrated.
                </p>
                <h2>
                    Additional resources and testing
                </h2>
                <p>
                    Setting up Azure IoT stack including IoT Hub, Cosmos DB and Azure function may be referred to this link
                    <a href="https://medium.com/@avirup171/azure-iot-hub-azure-function-azure-cosmos-db-walkthrough-cc30d12d1055" rel="nofollow">
                        Article here
                    </a>
                </p>
                <p>
                    For device side we are using a real device rather than a simulated one.
We used the following devices for testing
                    <a href="https://www.amazon.in/Xcluma-Bluetooth-Diagnostic-Scanner-Android/dp/B073F386QJ/ref=sr_1_2?ie=UTF8&amp;qid=1533557681&amp;sr=8-2&amp;keywords=elm327+bluetooth" rel="nofollow">
                        OBD-2
                    </a>
                    <a href="https://www.amazon.in/Robocraze-Raspberry-Development-Board-Built/dp/B075Z3RRV1/ref=sr_1_4?ie=UTF8&amp;qid=1533558021&amp;sr=8-4&amp;keywords=raspberry+pi+zero+w+kit" rel="nofollow">
                        Raspberry Pi
                    </a>
                </p>
                <p>
                    An active power bi account may be required for testing
                </p>
                <p>
                    Please feel free to contact us in case of queries.
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag">
                            azure-function
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            azure-iot-hub
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/c--2">
                                c#
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            obd-2
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            power-bi
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/python">
                                python
                            </a>
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/avirup171/vams" rel="nofollow" target="_blank" title="https://github.com/avirup171/vams">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
