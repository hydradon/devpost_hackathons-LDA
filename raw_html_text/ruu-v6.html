<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li class="text-center">
                        <a data-lightbox="587787" data-title="The challenge" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/587/787/datas/original.png">
                            <img alt="Ruu-v6 &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/587/787/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                The challenge
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="587789" data-title="Hardware setup" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/587/789/datas/original.jpg">
                            <img alt="Ruu-v6 &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/587/789/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Hardware setup
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="587788" data-title="Running CoAP on the RuuviTags" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/587/788/datas/original.png">
                            <img alt="Ruu-v6 &ndash; screenshot 3" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/587/788/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Running CoAP on the RuuviTags
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="587786" data-title="This is were Nordic is hiding its alternative operating modes" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/587/786/datas/original.png">
                            <img alt="Ruu-v6 &ndash; screenshot 4" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/587/786/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                This is were Nordic is hiding its alternative operating modes
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Inspiration
                </h2>
                <p>
                    MCU vendors tend force, or at least encourage, the use of their vendor libraries for their (network) hardware, leading to things like vendor lock-in, close-source firmware and driver blobs, and preventing free use of their silicon. One way to avoid this situation is the usage of free software stacks and operation systems (like
                    <a href="https://www.riot-os.org" rel="nofollow">
                        RIOT
                    </a>
                    ), that provide hardware drivers written from scratch, in combination with free and open-source network stacks.
                </p>
                <p>
                    <a href="https://lab.ruuvi.com/" rel="nofollow">
                        RuuviLab
                    </a>
                    posted a challenge to bring native IPv6 support to the
                    <code>
                        RuuviTag
                    </code>
                    . This could be done through Nordic's 'SoftDevice' using IPv6-over-BLE, which would however mean that the IPv6 support is based on a binary blob provided by Nordic...
                </p>
                <p>
                    So why not provide the
                    <code>
                        RuuviTag
                    </code>
                    with IPv6 support in an alternative approach, utilizing RIOT and an alternative radio mode provided by the hardware? Easy :-)
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    The project demonstrates the usage of RIOT on the
                    <code>
                        RuuviTag
                    </code>
                    , utilizing RIOTs network capabilities and driver infrastructure. The project is based on an alternative driver for the
                    <code>
                        nRF52
                    </code>
                    's radio, called
                    <code>
                        nrfmin
                    </code>
                    .
                </p>
                <p>
                    On a high-level, we demonstrate two
                    <code>
                        RuuviTag
                    </code>
                    nodes that provide a CoAP server. A third
                    <code>
                        RuuviTag
                    </code>
                    is connected to a host PC via a serial debug interface (
                    <code>
                        JLink RTT
                    </code>
                    ). This third node acts as a simplified user interface allowing interaction with the other
                    <code>
                        RuuviTags
                    </code>
                    using RIOT's shell.
                </p>
                <p>
                    This setup allows reading both available sensors from each remote
                    <code>
                        RuuviTag
                    </code>
                    , acquiring the accelerometer as well as temperature, humidity, and air pressure data.
                </p>
                <h2>
                    What does
                    <code>
                        nrfmin
                    </code>
                    mean?
                </h2>
                <p>
                    "nrfmin" is a very simple link layer protocol and implementation for NRF5x chips.
If ieee802154 is too hard to implement, use nrfmin!
                </p>
                <p>
                    It features:
                </p>
                <ul>
                    <li>
                        fixed header size!
                    </li>
                    <li>
                        little endian!
                    </li>
                    <li>
                        no encryption!
                    </li>
                    <li>
                        no bullshit!
                    </li>
                </ul>
                <pre class="language-nolang"><code> byte0 | byte1 - byte2 | byte3 - byte4 | byte5 | byte7 - byteN
    ------ | ------------- | ------------- | ----- | -------------
 length |   src_addr    |   dst_addr    | proto |   payload...
</code></pre>
                <h2>
                    Contributions during the hackathon
                </h2>
                <p>
                    The
                    <a href="https://github.com/RIOT-OS/RIOT/pull/8366" rel="nofollow">
                        RIOT port
                    </a>
                    for the
                    <code>
                        RuuviTag
                    </code>
                    was already provided by us before the hackathon,
                </p>
                <p>
                    During the hackthon we implemented and merged support for the
                    <code>
                        RuuviTag's
                    </code>
                    sensors, the
                    <code>
                        lis2dh12
                    </code>
                    accelerometer and the
                    <code>
                        bme280
                    </code>
                    environmental sensor. While the
                    <code>
                        lis2dh12
                    </code>
                    sensor driver was written from scratch, the
                    <code>
                        bme280
                    </code>
                    was already part of RIOT, but in such a bad state that the fixes came close to a complete re-write...
                </p>
                <p>
                    State:
                </p>
                <ul>
                    <li>
                        the
                        <code>
                            lis2dh12
                        </code>
                        driver is merged into RIOT's master (see
                        <a href="https://github.com/RIOT-OS/RIOT/pull/8381" rel="nofollow">
                            #8381
                        </a>
                        )
                    </li>
                    <li>
                        the
                        <code>
                            bme280
                        </code>
                        driver is PRed and currently under review (see
                        <a href="https://github.com/RIOT-OS/RIOT/pull/8383" rel="nofollow">
                            #8383
                        </a>
                        )
                    </li>
                </ul>
                <h2>
                    Challenges we ran into
                </h2>
                <p>
                    We did not manage to get 6LoWPAN working. Apparently the 6LoWPAN neighbor discovery is faulty when used in conjunction with the
                    <code>
                        nrfmin
                    </code>
                    driver. As fall-back we are simply using plain IPv6 over
                    <code>
                        nrfmin
                    </code>
                    .
                </p>
                <p>
                    Also, after unsuccessfully debugging the sensor drivers for a while, we were happy to find out that the particular
                    <code>
                        RuuviTag
                    </code>
                    we had not soldered on any sensors, so the quietness on the SPI bus could be nicely explained :-)
                </p>
                <h2>
                    Accomplishments that we're proud of
                </h2>
                <p>
                    Nothing went up in smoke.
We now fully support the roundest board in RIOT.
                </p>
                <h2>
                    What we learned
                </h2>
                <p>
                    RIOT's 6LoWPAN NDP is always good for surprises.
                </p>
                <h2>
                    What's next for Ruu-v6
                </h2>
                <p>
                    Fix 6LoWPAN (NDP) in RIOT to get a border router working.
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/c">
                                c
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            coap
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            gnrc
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            ipv6
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            jlink
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            nrfmin
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            ruuvitag
                        </span>
                    </li>
                </ul>
            </div>
        </div>
    </body>
</html>
