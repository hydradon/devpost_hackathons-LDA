<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li>
                        <div class="flex-video">
                            <iframe allowfullscreen="allowfullscreen" allowscriptaccess="always" class="video-embed" frameborder="0" height="371" mode="transparent" src="https://www.youtube.com/embed/i-FQ_YoB1H8?enablejsapi=1&amp;hl=en_US&amp;rel=0&amp;start=&amp;version=3&amp;wmode=transparent" type="text/html" webkitallowfullscreen="true" width="660" wmode="transparent">
                            </iframe>
                        </div>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="909288" data-title="Eddy waiting for his results to see if he really belongs to ECE" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/288/datas/original.png">
                            <img alt="Our Faces &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/288/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Eddy waiting for his results to see if he really belongs to ECE
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="909316" data-title="Looks like Eddy chose the wrong faculty..." href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/316/datas/original.png">
                            <img alt="Our Faces &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/316/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Looks like Eddy chose the wrong faculty...
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="909150" data-title="The average CHBE student" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/150/datas/original.jpg">
                            <img alt="Our Faces &ndash; screenshot 3" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/150/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                The average CHBE student
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="909153" data-title="The average CIVL student" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/153/datas/original.jpg">
                            <img alt="Our Faces &ndash; screenshot 4" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/153/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                The average CIVL student
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="909151" data-title="The average ECE student" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/151/datas/original.jpg">
                            <img alt="Our Faces &ndash; screenshot 5" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/151/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                The average ECE student
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="909152" data-title="The average ENV student" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/152/datas/original.jpg">
                            <img alt="Our Faces &ndash; screenshot 6" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/152/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                The average ENV student
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="909145" data-title="The average FIZZ student" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/145/datas/original.jpg">
                            <img alt="Our Faces &ndash; screenshot 7" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/145/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                The average FIZZ student
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="909148" data-title="The average GEO student" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/148/datas/original.jpg">
                            <img alt="Our Faces &ndash; screenshot 8" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/148/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                The average GEO student
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="909149" data-title="The average IGEN student" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/149/datas/original.jpg">
                            <img alt="Our Faces &ndash; screenshot 9" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/149/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                The average IGEN student
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="909144" data-title="The average MECH student" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/144/datas/original.jpg">
                            <img alt="Our Faces &ndash; screenshot 10" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/144/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                The average MECH student
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="909147" data-title="The average MINE student" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/147/datas/original.jpg">
                            <img alt="Our Faces &ndash; screenshot 11" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/147/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                The average MINE student
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="909146" data-title="The average MTRL student" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/146/datas/original.jpg">
                            <img alt="Our Faces &ndash; screenshot 12" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/909/146/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                The average MTRL student
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    Inspiration
                </h2>
                <p>
                    The beginning of this project stemmed from a curiosity regarding whether each engineering faculty had a distinctively average face. Using openCV and the following library:
                    <a href="https://github.com/stekhn/average-faces-opencv" rel="nofollow">
                        https://github.com/stekhn/average-faces-opencv
                    </a>
                    we created a data set of all the faces graduating from UBC engineering using previous yearbooks and fed this information through the library to create an average face for each specialization.
                </p>
                <p>
                    Once an average face was created, we thought it would be interesting to see whether scanned faces could be matched against the average face of each faculty to and assigned a score based on distinctive facial features (eyes, jawline, etc). This score could be used to determine which engineering faculty a user is most likely to be in based on their face.
                </p>
                <h2>
                    What it does
                </h2>
                <p>
                    This is a django web application that allows users to take a picture of their face using a webcam. The picture is passed to the python back end using ajax where it is decoded and Google's Cloud Vision API is used to crop the picture so that only the user's face remains. This cropped picture is compared against the average face of each engineering faculty and assigned a score based on their facial feature similarities. A higher score means the person is more likely to be in that faculty. This data is returned and displayed to the user.
                </p>
                <h2>
                    How I built it
                </h2>
                <p>
                    This was built as a Django Web Application that utilize Google Cloud Vision libraries to detect faces in an image and do some image manipulation. The OpenCV scripts for determining the average face were based off the open source Github library
                    <a href="https://github.com/stekhn/average-faces-opencv" rel="nofollow">
                        https://github.com/stekhn/average-faces-opencv
                    </a>
                    . The library compares faces based on 64 distinctive facial feature points. Thanky To worked on modifying the script and trying to optimize it by using only 2 points (a person's eyes).
                </p>
                <p>
                    When comparing faces to the average student, we used the FLANN based Feature Matching algorithm in OpenCVs community contribution version. What this algorithm does is it takes an input image and finds the image with the most matching features. We used this algorithm to score each input from our web-app against our previously generated average faces, and returned the one with the most matching features. More about this algorithm can be read here:
                    <a href="https://docs.opencv.org/master/dc/dc3/tutorial_py_matcher.html" rel="nofollow">
                        https://docs.opencv.org/master/dc/dc3/tutorial_py_matcher.html
                    </a>
                    .
                </p>
                <p>
                    Web RTC was used for the template view for the web application:
                    <a href="https://webrtc.github.io/samples/src/content/getusermedia/canvas/" rel="nofollow">
                        https://webrtc.github.io/samples/src/content/getusermedia/canvas/
                    </a>
                </p>
                <h2>
                    Challenges I ran into
                </h2>
                <p>
                    Passing the picture from the canvas to the python back end was a challenge but Ajax helped with that.
Aligning faces to create the average face based off just 2 data points in Thanky's optimized script proved a challenge as rotating the pictures was necessary but the rotational matrix required for that sometimes distorted faces.
                </p>
                <p>
                    Having disproportionate datasets affected the scores assigned. For example, ECE has a large number of faces. This resulted in all users being matched with ECE (ECE having the highest score) for a while. This was fixed by removing some of the data from ECE and regenerating the ECE average face, but this is not an optimal solution. Ideally, our score system should take this into account. Also, this set of data was scanned earlier with a higher resolution, so that could have affected some of the statistics of our pixel distributions in this dataset. We didn't have enough time to rescan these pages and re-run all of our scripts.
                </p>
                <h2>
                    Accomplishments that I'm proud of
                </h2>
                <p>
                    Found out what average faces for each faculty looked like, and created a fun application to see where our algorithm places you.
                </p>
                <h2>
                    What I learned
                </h2>
                <p>
                    The average faces mostly look quite similar. So maybe looks aren't the best way to pick which field of engineering you should study :)
                </p>
                <h2>
                    What's next for Our Faces
                </h2>
                <p>
                    Scan year books for all faculties, not just engineering.
Make the front-end prettier.
Make the project more easily deployable.
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/ajax">
                                ajax
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/django">
                                django
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            google-cloud-vision
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/jquery">
                                jquery
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/opencv">
                                opencv
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/python">
                                python
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/webrtc">
                                webrtc
                            </a>
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/Thanh-To/our-faces" rel="nofollow" target="_blank" title="https://github.com/Thanh-To/our-faces">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
