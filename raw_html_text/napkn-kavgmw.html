<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li class="text-center">
                        <a data-lightbox="908858" data-title="https://bryanjwong.github.io/Napkn/" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/908/858/datas/original.png">
                            <img alt="Napkn &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/908/858/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                https://bryanjwong.github.io/Napkn/
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="908857" data-title="Each Napkn Module features an OLED display, a pair of Red/Green LEDS, and a speaker for satisfying visual and auditory user feedback." href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/908/857/datas/original.png">
                            <img alt="Napkn &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/908/857/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Each Napkn Module features an OLED display, a pair of Red/Green LEDS, and a speaker for satisfying visual and auditory user feedback.
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="910346" data-title="Our website provides realtime information about table occupancy and reservation time remaining." href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/910/346/datas/original.png">
                            <img alt="Napkn &ndash; screenshot 3" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/910/346/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Our website provides realtime information about table occupancy and reservation time remaining.
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="910347" data-title="Our Firebase database stores adjustable reservation variables as well as Napkn and user statuses." href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/910/347/datas/original.png">
                            <img alt="Napkn &ndash; screenshot 4" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/910/347/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Our Firebase database stores adjustable reservation variables as well as Napkn and user statuses.
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="910358" data-title="A short snippet of Napkn.ino, the program run by each Napkn module." href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/910/358/datas/original.png">
                            <img alt="Napkn &ndash; screenshot 5" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/910/358/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                A short snippet of Napkn.ino, the program run by each Napkn module.
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="908862" data-title="Napkn Schematic: Each module uses 2 communication protocols (I2C/SPI) concurrently and has an NMOS speaker-enhancing circuit." href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/908/862/datas/original.png">
                            <img alt="Napkn &ndash; screenshot 6" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/908/862/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Napkn Schematic: Each module uses 2 communication protocols (I2C/SPI) concurrently and has an NMOS speaker-enhancing circuit.
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="908865" data-title="3D Models used to 3D print the Napkn Enclosure." href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/908/865/datas/original.png">
                            <img alt="Napkn &ndash; screenshot 7" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/908/865/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                3D Models used to 3D print the Napkn Enclosure.
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="908866" data-title="Napkn's Database Communication Structure." href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/908/866/datas/original.png">
                            <img alt="Napkn &ndash; screenshot 8" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/908/866/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Napkn's Database Communication Structure.
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h1>
                    Napkn - the IDEA Hacks 2020 1st Place Winner!
                </h1>
                <h4>
                    Bryan Wong, Caleb Terrill, Fred Chu, Lucas Wolter, Caitlyn Chau
                </h4>
                <h3>
                    <a href="https://docs.google.com/presentation/d/1dGl8s7gmYrvF6xw_J4Y-Q9_lGWD_yz9ZMoIB_ys8bzU/edit?usp=sharing" rel="nofollow">
                        Slide Deck
                    </a>
                    |
                    <a href="https://drive.google.com/drive/folders/11-iaHL7j0u7RTrozLryqRc23VB2-lLvD?usp=sharing" rel="nofollow">
                        Videos
                    </a>
                    |
                    <a href="https://bryanjwong.github.io/Napkn/" rel="nofollow">
                        Website
                    </a>
                    |
                    <a href="https://github.com/bryanjwong/Napkn" rel="nofollow">
                        GitHub Repo
                    </a>
                </h3>
                <h2>
                    Intro
                </h2>
                <p>
                    Trying to find a table in a room packed full to the brim with people can be extremely stressful. Imagine you're famished after spending the entire day hard at work, only to enter a dining hall and find that there isn't a single table for you to eat at. Or say, perhaps, you finally find a table and set down a few napkins to reserve it (customary for UCLA students), but come back later to find that some clueless freshman has stolen your seat!
                </p>
                <p>
                    Well, it's time to throw away those napkins,
                    <strong>
                        Napkn is here!
                    </strong>
                </p>
                <h2>
                    About Napkn
                </h2>
                <p>
                    Napkn is a convenient and intuitive tabletop IoT table reservation device. With a simple tap of a RFID-enabled card, users can check in to a table, reserving it for a predefined duration. Once the user is finished using their reserved dining hall table, library table, etc., all it takes is another tap of their RFID card to free the table for use. This check in procedure doubles as a user verification system, ensuring that tables go to UCLA students and authorized guests. A mini OLED display, a pair of red/green LEDs, and a transistor-amplified speaker provide satisfying visual and auditory feedback for users.
                </p>
                <h2>
                    Internet of Things: Google Firebase
                </h2>
                <p>
                    Each Napkn is built with WiFi functionality, allowing it to communicate with our real-time Google Firebase Database and update information about device usage and user reservations. This information is made public through the
                    <a href="https://bryanjwong.github.io/Napkn" rel="nofollow">
                        Napkn website
                    </a>
                    , allowing users to get extremely accurate metrics on dining/study hall traffic. Additionally, during periods of high traffic, parameters such as the checkin time limit and maximum number of consecutive checkins are modified to help alleviate overcrowding and help ensure everybody can get a table.
                </p>
                <h2>
                    Hardware
                </h2>
                <p>
                    Each Napkn consists of a variety of input and output components built around a WiFi-enabled ESP32 microcontroller. With 2 different communication protocols and a NMOS transistor amplifier circuit, building the circuit proved quite the challenge!
                </p>
                <p>
                    Here are the parts we used for each Napkn:
                </p>
                <ul>
                    <li>
                        <a href="https://docs.zerynth.com/latest/official/board.zerynth.doit_esp32/docs/index.html" rel="nofollow">
                            DOIT Esp32 DevKit v1
                        </a>
                    </li>
                    <li>
                        <a href="http://wiki.sunfounder.cc/images/c/c6/MFRC522_datasheet.pdf" rel="nofollow">
                            Sunfounder MFRC522 RFID Module
                        </a>
                    </li>
                    <li>
                        <a href="https://drive.google.com/file/d/1qkexPET5MUICAarGOtlnQk4F-JEKkrHZ/view" rel="nofollow">
                            DIYMall Mini OLED Display
                        </a>
                    </li>
                    <li>
                        <a href="https://cdn-shop.adafruit.com/datasheets/P1898.pdf" rel="nofollow">
                            Magnetic Speaker
                        </a>
                    </li>
                    <li>
                        3D-Printed Chassis
                    </li>
                    <li>
                        NMOS Transistor
                    </li>
                    <li>
                        Green LED
                    </li>
                    <li>
                        Red LED
                    </li>
                    <li>
                        Perfboard
                    </li>
                    <li>
                        9V Battery and Connectors
                    </li>
                    <li>
                        Assorted Resistors
                    </li>
                </ul>
                <p>
                    The RFID module is controlled with SPI and the OLED display is controlled with I2C. The speaker is amplified with a low-side driver circuit using an NMOS transistor. The microcontroller and circuitry was soldered onto a perfboard with jumper wire connections to each component, all of which fits nicely inside the 3D-Printed Chassis.
                </p>
                <h2>
                    Software
                </h2>
                <p>
                    The code that runs on each Napkn is
                    <code>
                        Napkn.ino
                    </code>
                    , located in the
                    <code>
                        Napkn
                    </code>
                    folder. By using a Firebase library we found online, we were able to connect to our database. Upon scanning an RFID card, the Napkn will communicate with Firebase to determine the correct action to take. For example, if the user has checked out too many tables, the database will notify the Napkn to reject the checkin. These cases that could reject users are dynamically set, so that they can be modified from the database or from an external script based on dining/study hall traffic. If a user is successfully checked in, the Napkn will update the database with its status, the user's RFID number, and the number of tables the user has checked in. Since reading and writing from Firebase can have high latency, we minimized the number of reads and writes by using several local variables stored on the Napkn that are synced with the database upon startup. This way, if our Napkn crashes, it is able to recover its state from the database.
                </p>
                <p>
                    In order to program Napkn, we used several libraries, many of which were modified due to compatibility issues.
                </p>
                <p>
                    Here is a list of the libraries we used:
                </p>
                <ul>
                    <li>
                        <a href="https://github.com/ioxhop/IOXhop_FirebaseESP32" rel="nofollow">
                            IOXhop_FirebaseESP32
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/miguelbalboa/rfid" rel="nofollow">
                            MFRC522
                        </a>
                    </li>
                    <li>
                        <a href="https://arduinojson.org/" rel="nofollow">
                            ArduinoJson
                        </a>
                    </li>
                    <li>
                        Adafruit SSD1306 (for OLED)
                    </li>
                    <li>
                        Adafruit GFX (for OLED)
                    </li>
                    <li>
                        pitches (labelled notes for ease of use with speaker)
                    </li>
                </ul>
                <p>
                    <strong>
                        In order for Napkn to work properly, you must add the libraries inside the
                        <code>
                            libraries
                        </code>
                        folder into your
                        <code>
                            Arduino/libraries
                        </code>
                        folder!
                    </strong>
                </p>
                <h2>
                    Website
                </h2>
                <p>
                    We also created a
                    <a href="https://bryanjwong.github.io/Napkn/" rel="nofollow">
                        simple website
                    </a>
                    using HTML, CSS, and Javascript to display table occupancy to users.
                    <code>
                        app.js
                    </code>
                    pulls information from Firebase and
                    <code>
                        index.html
                    </code>
                    uses HTML and CSS to display it in an easy-to-understand format. In the future, we would like to add user-end functionality, such as reserving tables.
                </p>
                <h2>
                    Improvements
                </h2>
                <p>
                    In order to improve the Napkn experience, there are several designs and optimizations we could explore. From a hardware perspective, designing a PCB would allow for a much better form factor. We could also improve the durability and materials used for the exterior. On the software side, implementing a table map on the website could allow users to know exactly which tables are open. Given more Napkn modules, we would like to implement a server-side algorithm that automatically senses dining/study hall traffic and updates our database's dynamic values for checkin duration and number of tables allowed.
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/arduino">
                                arduino
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/c">
                                c
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/c--3">
                                c++
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/css">
                                css
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/firebase">
                                firebase
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/html">
                                html
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            i2c
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/javascript">
                                javascript
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            rfid
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag">
                            spi
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/bryanjwong/Napkn" rel="nofollow" target="_blank" title="https://github.com/bryanjwong/Napkn">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
