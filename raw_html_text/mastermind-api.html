<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li class="text-center">
                        <a data-lightbox="389199" data-title="Dynamo Screenshot" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/389/199/datas/original.png">
                            <img alt="AxiomZen Mastermind API &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/389/199/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Dynamo Screenshot
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h1>
                    Mastermind-API Backend
                </h1>
                <h2>
                    AxiomZen's challenge @vanhackaton
                </h2>
                <p>
                    The challenge was to build a reliable, scalable and well-tested API in which many users can play [mastermind](
                    <a href="https://en.wikipedia.org/wiki/Mastermind_(board_game)" rel="nofollow">
                        https://en.wikipedia.org/wiki/Mastermind_(board_game)
                    </a>
                    with, along with multiplayer feature and any interesting add-on that we think it could fit.
                </p>
                <h2>
                    Tech Stack
                </h2>
                <p>
                    In order to fulfill the requirements, I built my entire API in a serverless architecture within Amazon Web Services that offers a easily-scalable and well managed structure.
                </p>
                <p>
                    <strong>
                        Chosen Stack
                    </strong>
                    :
                </p>
                <ul>
                    <li>
                        Node.JS
                    </li>
                    <li>
                        AWS Lambda
                    </li>
                    <li>
                        AWS DynamoDB (NoSQL)
                    </li>
                    <li>
                        AWS API Gateway
                    </li>
                </ul>
                <p>
                    With it all set up, we have some key benefits:
                </p>
                <ul>
                    <li>
                        Scale-up is one click away, both for logic (Lambda) and for database read OR write ops (DynamoDB)
                    </li>
                    <li>
                        HTTP Codes can be fully handled with API Gateway
                    </li>
                    <li>
                        Security: Amazon takes care of CORS, authentication and throttling for us
                    </li>
                    <li>
                        Caching: You can use cache in some cases so you don't punish your backend again and again.
                    </li>
                </ul>
                <h2>
                    How to Play &amp; API Reference
                </h2>
                <p>
                    API Host:
                    <a href="https://p4392fkvs9.execute-api.us-east-1.amazonaws.com/prod" rel="nofollow">
                        https://p4392fkvs9.execute-api.us-east-1.amazonaws.com/prod
                    </a>
                </p>
                <p>
                    <strong>
                        1. Create an User
                    </strong>
                </p>
                <p>
                    You can't play, create or join games without having a user key, so that is the first thing you'll need to do so the game can keep your scores and join other games:
                </p>
                <p>
                    <strong>
                        POST /user
                    </strong>
                </p>
                <p>
                    Request:
                </p>
                <pre class="language-nolang"><code>{
    userName: John Fogerty
}
</code></pre>
                <p>
                    Response:
                </p>
                <pre class="language-nolang"><code>{
        userName: John Fogerty,
  userKey: b000f510-2064-11e6-bd1d-395810d0c754
}
</code></pre>
                <p>
                    <strong>
                        2. Create a Game
                    </strong>
                </p>
                <p>
                    If you want to create a game, call this resource giving your userkey and name:
                </p>
                <p>
                    <strong>
                        POST /new-game
                    </strong>
                </p>
                <p>
                    Request:
                </p>
                <pre class="language-nolang"><code>{
                userKey: b000f510-2064-11e6-bd1d-395810d0c754
}
</code></pre>
                <p>
                    Response:
                </p>
                <pre class="language-nolang"><code>{
        gameKey: 26f624b0-2065-11e6-b7ab-ab2f614c58,
  userKey: b000f510-2064-11e6-bd1d-395810d0c7,
  possible_colors: RBGYOPCM,
  code_length: 8
}
</code></pre>
                <p>
                    <strong>
                        3. Join an Existing Game
                    </strong>
                </p>
                <p>
                    You can join your friends in a game, all you must have is their gameKey and your userKey. You can only join games before the first guess is made (fair, isn't?) .
                </p>
                <p>
                    <strong>
                        POST /join-game
                    </strong>
                </p>
                <p>
                    Request:
                </p>
                <pre class="language-nolang"><code>{
                userKey: b000f510-2064-11e6-bd1d-395810d0c754,
    gameKey: 20a1a8f0-2065-11e6-b7ab-ab2f614c583d
}
</code></pre>
                <p>
                    Response:
                </p>
                <pre class="language-nolang"><code>{
                userKey: b000f510-2064-11e6-bd1d-395810d0c754,
    gameKey: 20a1a8f0-2065-11e6-b7ab-ab2f614c583d
}
</code></pre>
                <p>
                    <strong>
                        4. Making guesses
                    </strong>
                </p>
                <p>
                    Once you are in a game, you can make guesses to it and the API will tell you the exacts and nears, along with your past guesses. They expire 5 minutes after the first guess is made and the first user to break the code wins. Unlimited guesses.
                </p>
                <p>
                    <strong>
                        POST /guess
                    </strong>
                </p>
                <p>
                    Request:
                </p>
                <pre class="language-nolang"><code>{
                userKey: b000f510-2064-11e6-bd1d-395810d0c754,
    gameKey: 20a1a8f0-2065-11e6-b7ab-ab2f614c583d,
    code: RRGGBBRR
}
</code></pre>
                <p>
                    Response:
                </p>
                <pre class="language-nolang"><code>{
                gameKey: 4e50da60-2046-11e6-a631-a1f850bfa9f1,
    userKey: b000f510-2064-11e6-bd1d-395810d0c754,
    past_guesses: [
    {
    exact: 0,
    near: 0,
    code: RRGGBBRR
    }
    ],
    num_guesses: 1,
    solved: true,
    time: 59 secs,
    score: 598
}
</code></pre>
                <p>
                    <strong>
                        5. See the ranking
                    </strong>
                </p>
                <p>
                    Since we ask you to create an user, we can save data such as you score. It is cumulative and the faster you break the code, better!
                </p>
                <p>
                    <strong>
                        GET /ranking
                    </strong>
                </p>
                <p>
                    Response:
                </p>
                <pre class="language-nolang"><code>[
                {
                UserName: John Fogerty,
                Score: 598
    },
    {
    UserName: Other Dude,
    Score: 356
    }
]
</code></pre>
                <h2>
                    Set up the environment
                </h2>
                <p>
                    The Lambda function codes are in the github repo;
                </p>
                <p>
                    The DynamoDB Tables (screenshot in github repo):
                </p>
                <p>
                    User: Partition Key "UserKey"
                </p>
                <p>
                    Mastermind: Partition Key "GameKey"
                </p>
                <p>
                    The API Gateway resources are set up one for each lambda function.
                </p>
                <p>
                    Questions, suggestions or feedback feel free to contact me at any time
                    <a href="mailto:stefano.bourscheid@gmail.com" rel="nofollow">
                        stefano.bourscheid@gmail.com
                    </a>
                </p>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/amazon-web-services">
                                amazon-web-services
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/javascript">
                                javascript
                            </a>
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/node-js">
                                node.js
                            </a>
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/stefanoeb/mastermind-api" rel="nofollow" target="_blank" title="https://github.com/stefanoeb/mastermind-api">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
