<html>
    <head>
    </head>
    <body>
        <div class="large-9 columns" id="app-details-left">
            <div id="gallery">
                <ul>
                    <li>
                        <div class="flex-video">
                            <iframe allowfullscreen="allowfullscreen" allowscriptaccess="always" class="video-embed" frameborder="0" height="371" mode="transparent" src="https://www.youtube.com/embed/9gi2Y0Ztdkg?enablejsapi=1&amp;hl=en_US&amp;rel=0&amp;start=&amp;version=3&amp;wmode=transparent" type="text/html" webkitallowfullscreen="true" width="660" wmode="transparent">
                            </iframe>
                        </div>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="757080" data-title="Logo" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/757/080/datas/original.png">
                            <img alt="MESG3 &ndash; screenshot 1" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/757/080/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Logo
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="757082" data-title="Sample Application - Piping a receipt generated from the Stripe API to S3" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/757/082/datas/original.png">
                            <img alt="MESG3 &ndash; screenshot 2" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/757/082/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Sample Application - Piping a receipt generated from the Stripe API to S3
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="761371" data-title="Uploaded Receipts to Amazon S3" href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/761/371/datas/original.png">
                            <img alt="MESG3 &ndash; screenshot 3" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/761/371/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Uploaded Receipts to Amazon S3
                            </i>
                        </p>
                    </li>
                    <li class="text-center">
                        <a data-lightbox="761372" data-title="Uploaded Receipt " href="https://challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/761/372/datas/original.png">
                            <img alt="MESG3 &ndash; screenshot 4" class="software_photo_image image-replacement" onerror="this.onerror=null;this.src='https://devpost-challengepost.netdna-ssl.com/assets/defaults/thumbnail-placeholder-42bcab8d8178b413922ae2877d8b0868.gif';" src="//challengepost-s3-challengepost.netdna-ssl.com/photos/production/software_photos/000/761/372/datas/gallery.jpg">
                        </a>
                        <span class="expand-tag">
                            <i class="fas fa-expand">
                            </i>
                        </span>
                        <p>
                            <i>
                                Uploaded Receipt
                            </i>
                        </p>
                    </li>
                </ul>
            </div>
            <div>
                <h2>
                    MESG3
                </h2>
                <p>
                    MESG3 enables easy integration of applications with Amazon S3 using this service to upload and query files from S3 Buckets.
                </p>
                <h2>
                    Supported Resources
                </h2>
                <ul>
                    <li>
                        List Buckets
                        <code>
                            /buckets
                        </code>
                    </li>
                    <li>
                        List Objects in bucket
                        <code>
                            /objects
                        </code>
                    </li>
                    <li>
                        Upload file to bucket
                        <code>
                            /upload
                        </code>
                    </li>
                    <li>
                        Download file from bucket
                        <code>
                            /download
                        </code>
                    </li>
                </ul>
                <p>
                    Schema described below.
                </p>
                <h2>
                    Dev Notes
                </h2>
                <pre class="language-bash"><code>mesg-core service deploy https://github.com/cbonoz/mesg19
</code></pre>
                <h2>
                    Example Application
                </h2>
                <ul>
                    <li>
                        Issue and receive a payment via
                        <a href="https://github.com/mesg-foundation/service-stripe" rel="nofollow">
                            https://github.com/mesg-foundation/service-stripe
                        </a>
                    </li>
                    <li>
                        Upload a receipt to Amazon S3 via MESG3 (this repo).
                    </li>
                </ul>
                <h3>
                    Setup of Example Application
                </h3>
                <ul>
                    <li>
                        <p>
                            Deploy and start the services:
                        </p>
                        <pre>mesg-core start
mesg-core service deploy https://github.com/cbonoz/mesg19
mesg-core service start SERVICE_ID # service id that was just printed after the deploy.
mesg-core service deploy https://github.com/mesg-foundation/service-stripe
mesg-core service start SERVICE_ID # service id that was just printed after the deploy.
</pre>
                    </li>
                    <li>
                        <p>
                            Define the following environment TEST (or production) credentials:
                        </p>
                        <pre>AWS_ACCESS_TEST='YOUR_AWS_ACCESS_KEY_HERE'
AWS_SECRET_TEST='YOUR_AWS_SECRET_KEY_HERE'
STRIPE_API_KEY='YOUR_STRIPE_API_KEY'
</pre>
                    </li>
                    <li>
                        <p>
                            Call the stripe test workflow. You'll need to ensure the stripe nodejs library is installed locally to simulate a payment via the script. This example shows a simple 3 step process of processing a payment, retrieving the receipt data from the stripe API, and uploading the receipt to an S3 bucket of your choosing:
                        </p>
                        <pre>node sample_app/stripe.js
</pre>
                    </li>
                </ul>
                <p>
                    If successful, you should now see an image similar to the following in your s3 bucket.
                </p>
                <img data-canonical-url="./img/sample_receipt.png" src="https://res.cloudinary.com/devpost/image/fetch/s--TDn0x6Kz--/c_limit,f_auto,fl_lossy,q_auto:eco,w_900/v1/./img/sample_receipt.png">
                <h3>
                    Tasks / Schema
                </h3>
                <ul>
                    <li>
                        listBuckets
                    </li>
                    <li>
                        listObjects
                    </li>
                    <li>
                        upload
                    </li>
                    <li>
                        download
                    </li>
                </ul>
                <pre>  listBuckets:
                inputs:
                region:
                description: "AWS region, ex: us-east-1"
                type: String
                accessKeyId:
                description: "Access key id for AWS user"
                type: String
                secretAccessKey:
                description: "Secret access key for AWS user"
                type: String
    outputs:
    success:
    data: &amp;bucketData
    buckets:
    description: "List of buckets in the AWS user's region"
    type: Object
    error:
    data:
    code:
    type: String
</pre>
                <pre>  listObjects:
                inputs:
                region:
                description: "AWS region, ex: us-east-1"
                type: String
                accessKeyId:
                description: "Access key id for AWS user"
                type: String
                secretAccessKey:
                description: "Secret access key for AWS user"
                type: String
                bucket:
                description: "AWS Bucket for the query"
                type: String
    outputs:
    success:
    data: &amp;objectData
    objects:
    description: "List of objects in the AWS user's bucket (up to 1000 items)"
    type: Object
    error:
    data:
    code:
    type: String
</pre>
                <pre>  upload:
                inputs:
                region:
                description: "AWS region, ex: us-east-1"
                type: String
                accessKeyId:
                description: "Access key id for AWS user"
                type: String
                secretAccessKey:
                description: "Secret access key for AWS user"
                type: String
                bucket:
                description: "AWS Bucket for the upload"
                type: String
                key:
                description: "Key within the bucket"
                type: String
                data:
                description: "Binary data to upload"
                type: String
    outputs:
    success:
    data: &amp;uploadData
    result:
    description: "Upload result status"
    type: String
    error:
    data:
    code:
    type: String
</pre>
                <pre>  download:
                inputs:
                region:
                description: "AWS region, ex: us-east-1"
                type: String
                accessKeyId:
                description: "Access key id for AWS user"
                type: String
                secretAccessKey:
                description: "Secret access key for AWS user"
                type: String
                bucket:
                description: "AWS Bucket for the download"
                type: String
                key:
                description: "Key within the bucket"
                type: String
    outputs:
    success:
    data: &amp;downloadData
    result:
    description: "Downloaded data binary"
    type: String
    error:
    data:
    code:
    type: String
</pre>
            </div>
            <div class="" id="built-with">
                <h2>
                    Built With
                </h2>
                <ul class="no-bullet inline-list">
                    <li>
                        <span class="cp-tag">
                            mesg
                        </span>
                    </li>
                    <li>
                        <span class="cp-tag recognized-tag">
                            <a href="https://devpost.com/software/built-with/node-js">
                                node.js
                            </a>
                        </span>
                    </li>
                </ul>
            </div>
            <nav class="app-links section">
                <h2>
                    Try it out
                </h2>
                <ul class="no-bullet" data-role="software-urls">
                    <li>
                        <a href="https://github.com/cbonoz/mesg19" rel="nofollow" target="_blank" title="https://github.com/cbonoz/mesg19">
                            <i class="ss-icon ss-link">
                            </i>
                            <span>
                                github.com
                            </span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>
