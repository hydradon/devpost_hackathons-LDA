[
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149314037",
        "pull_request_review_id": 74686372,
        "id": 149314037,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTMxNDAzNw==",
        "diff_hunk": "@@ -817,6 +817,7 @@ contract LoopringProtocolImpl is LoopringProtocol {\n     {\n         var orders = new OrderState[](addressList.length);\n         var delegate = TokenTransferDelegate(delegateAddress);\n+        uint splitPercentage = MARGIN_SPLIT_PERCENTAGE_BASE;",
        "path": "contracts/LoopringProtocolImpl.sol",
        "position": 4,
        "original_position": 4,
        "commit_id": "db506defc66324571ff7e89ad40bec5a6a13bbdd",
        "original_commit_id": "db506defc66324571ff7e89ad40bec5a6a13bbdd",
        "user": {
            "login": "dong77",
            "id": 1710087,
            "node_id": "MDQ6VXNlcjE3MTAwODc=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/1710087?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dong77",
            "html_url": "https://github.com/dong77",
            "followers_url": "https://api.github.com/users/dong77/followers",
            "following_url": "https://api.github.com/users/dong77/following{/other_user}",
            "gists_url": "https://api.github.com/users/dong77/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dong77/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dong77/subscriptions",
            "organizations_url": "https://api.github.com/users/dong77/orgs",
            "repos_url": "https://api.github.com/users/dong77/repos",
            "events_url": "https://api.github.com/users/dong77/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dong77/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "You sure about this pattern, it doesn't seem to save gas usage for me.",
        "created_at": "2017-11-07T09:41:51Z",
        "updated_at": "2017-11-07T09:41:51Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/67#discussion_r149314037",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/67",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149314037"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/67#discussion_r149314037"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/67"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149314569",
        "pull_request_review_id": 74686936,
        "id": 149314569,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTMxNDU2OQ==",
        "diff_hunk": "@@ -817,6 +817,7 @@ contract LoopringProtocolImpl is LoopringProtocol {\n     {\n         var orders = new OrderState[](addressList.length);\n         var delegate = TokenTransferDelegate(delegateAddress);\n+        uint splitPercentage = MARGIN_SPLIT_PERCENTAGE_BASE;",
        "path": "contracts/LoopringProtocolImpl.sol",
        "position": 4,
        "original_position": 4,
        "commit_id": "db506defc66324571ff7e89ad40bec5a6a13bbdd",
        "original_commit_id": "db506defc66324571ff7e89ad40bec5a6a13bbdd",
        "user": {
            "login": "BenjaminPrice",
            "id": 3983432,
            "node_id": "MDQ6VXNlcjM5ODM0MzI=",
            "avatar_url": "https://avatars2.githubusercontent.com/u/3983432?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/BenjaminPrice",
            "html_url": "https://github.com/BenjaminPrice",
            "followers_url": "https://api.github.com/users/BenjaminPrice/followers",
            "following_url": "https://api.github.com/users/BenjaminPrice/following{/other_user}",
            "gists_url": "https://api.github.com/users/BenjaminPrice/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/BenjaminPrice/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/BenjaminPrice/subscriptions",
            "organizations_url": "https://api.github.com/users/BenjaminPrice/orgs",
            "repos_url": "https://api.github.com/users/BenjaminPrice/repos",
            "events_url": "https://api.github.com/users/BenjaminPrice/events{/privacy}",
            "received_events_url": "https://api.github.com/users/BenjaminPrice/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "The gas usage reported from test 3 in the tests was lower when I ran it with this change. Maybe we're comparing the usages differently or there was an inconsistency in my TestRPC...",
        "created_at": "2017-11-07T09:43:58Z",
        "updated_at": "2017-11-07T09:43:58Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/67#discussion_r149314569",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/67",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149314569"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/67#discussion_r149314569"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/67"
            }
        },
        "in_reply_to_id": 149314037
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149314871",
        "pull_request_review_id": 74687256,
        "id": 149314871,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTMxNDg3MQ==",
        "diff_hunk": "@@ -836,21 +837,11 @@ contract LoopringProtocolImpl is LoopringProtocol {\n                 sList[i]\n             );\n \n-            bytes32 orderHash = calculateOrderHash(order);\n-\n-            verifySignature(",
        "path": "contracts/LoopringProtocolImpl.sol",
        "position": 14,
        "original_position": 14,
        "commit_id": "db506defc66324571ff7e89ad40bec5a6a13bbdd",
        "original_commit_id": "db506defc66324571ff7e89ad40bec5a6a13bbdd",
        "user": {
            "login": "dong77",
            "id": 1710087,
            "node_id": "MDQ6VXNlcjE3MTAwODc=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/1710087?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dong77",
            "html_url": "https://github.com/dong77",
            "followers_url": "https://api.github.com/users/dong77/followers",
            "following_url": "https://api.github.com/users/dong77/following{/other_user}",
            "gists_url": "https://api.github.com/users/dong77/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dong77/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dong77/subscriptions",
            "organizations_url": "https://api.github.com/users/dong77/orgs",
            "repos_url": "https://api.github.com/users/dong77/repos",
            "events_url": "https://api.github.com/users/dong77/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dong77/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "why remove order signature checing?",
        "created_at": "2017-11-07T09:45:06Z",
        "updated_at": "2017-11-07T09:45:06Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/67#discussion_r149314871",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/67",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149314871"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/67#discussion_r149314871"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/67"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149315690",
        "pull_request_review_id": 74688167,
        "id": 149315690,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTMxNTY5MA==",
        "diff_hunk": "@@ -836,21 +837,11 @@ contract LoopringProtocolImpl is LoopringProtocol {\n                 sList[i]\n             );\n \n-            bytes32 orderHash = calculateOrderHash(order);\n-\n-            verifySignature(",
        "path": "contracts/LoopringProtocolImpl.sol",
        "position": 14,
        "original_position": 14,
        "commit_id": "db506defc66324571ff7e89ad40bec5a6a13bbdd",
        "original_commit_id": "db506defc66324571ff7e89ad40bec5a6a13bbdd",
        "user": {
            "login": "BenjaminPrice",
            "id": 3983432,
            "node_id": "MDQ6VXNlcjM5ODM0MzI=",
            "avatar_url": "https://avatars2.githubusercontent.com/u/3983432?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/BenjaminPrice",
            "html_url": "https://github.com/BenjaminPrice",
            "followers_url": "https://api.github.com/users/BenjaminPrice/followers",
            "following_url": "https://api.github.com/users/BenjaminPrice/following{/other_user}",
            "gists_url": "https://api.github.com/users/BenjaminPrice/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/BenjaminPrice/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/BenjaminPrice/subscriptions",
            "organizations_url": "https://api.github.com/users/BenjaminPrice/orgs",
            "repos_url": "https://api.github.com/users/BenjaminPrice/repos",
            "events_url": "https://api.github.com/users/BenjaminPrice/events{/privacy}",
            "received_events_url": "https://api.github.com/users/BenjaminPrice/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Because in the previous line, we just calculated it using a function built into Solidity. We should be safe in assuming that the function works and is tested by the Ethereum team. No real reason to confirm it on-chain. We could add a test to confirm it off-chain, prior to deployment, if it's worrying.",
        "created_at": "2017-11-07T09:48:12Z",
        "updated_at": "2017-11-07T09:48:12Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/67#discussion_r149315690",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/67",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149315690"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/67#discussion_r149315690"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/67"
            }
        },
        "in_reply_to_id": 149314871
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149315413",
        "pull_request_review_id": 74687854,
        "id": 149315413,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTMxNTQxMw==",
        "diff_hunk": "@@ -477,11 +477,12 @@ contract LoopringProtocolImpl is LoopringProtocol {\n         // Calculate each order's `lrcFee` and `lrcRewrard` and splict how much\n         // of `fillAmountS` shall be paid to matching order or miner as margin\n         // split.\n-\n-        calculateRingFees(delegate, ring);\n+        address lrcToken = lrcTokenAddress;",
        "path": "contracts/LoopringProtocolImpl.sol",
        "position": null,
        "original_position": 6,
        "commit_id": "a59dbd4c82c26f09646d19d7a5617730cba7e0b1",
        "original_commit_id": "3f1eccbb0c9d21c30f4f12e57b9a8a243ff5ccc7",
        "user": {
            "login": "dong77",
            "id": 1710087,
            "node_id": "MDQ6VXNlcjE3MTAwODc=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/1710087?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dong77",
            "html_url": "https://github.com/dong77",
            "followers_url": "https://api.github.com/users/dong77/followers",
            "following_url": "https://api.github.com/users/dong77/following{/other_user}",
            "gists_url": "https://api.github.com/users/dong77/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dong77/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dong77/subscriptions",
            "organizations_url": "https://api.github.com/users/dong77/orgs",
            "repos_url": "https://api.github.com/users/dong77/repos",
            "events_url": "https://api.github.com/users/dong77/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dong77/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "how about renaming to \"_lrcTokenAddress\"?",
        "created_at": "2017-11-07T09:47:07Z",
        "updated_at": "2017-11-08T02:48:10Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/65#discussion_r149315413",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/65",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149315413"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/65#discussion_r149315413"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/65"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149315953",
        "pull_request_review_id": 74688466,
        "id": 149315953,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTMxNTk1Mw==",
        "diff_hunk": "@@ -477,11 +477,12 @@ contract LoopringProtocolImpl is LoopringProtocol {\n         // Calculate each order's `lrcFee` and `lrcRewrard` and splict how much\n         // of `fillAmountS` shall be paid to matching order or miner as margin\n         // split.\n-\n-        calculateRingFees(delegate, ring);\n+        address lrcToken = lrcTokenAddress;",
        "path": "contracts/LoopringProtocolImpl.sol",
        "position": null,
        "original_position": 6,
        "commit_id": "a59dbd4c82c26f09646d19d7a5617730cba7e0b1",
        "original_commit_id": "3f1eccbb0c9d21c30f4f12e57b9a8a243ff5ccc7",
        "user": {
            "login": "BenjaminPrice",
            "id": 3983432,
            "node_id": "MDQ6VXNlcjM5ODM0MzI=",
            "avatar_url": "https://avatars2.githubusercontent.com/u/3983432?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/BenjaminPrice",
            "html_url": "https://github.com/BenjaminPrice",
            "followers_url": "https://api.github.com/users/BenjaminPrice/followers",
            "following_url": "https://api.github.com/users/BenjaminPrice/following{/other_user}",
            "gists_url": "https://api.github.com/users/BenjaminPrice/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/BenjaminPrice/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/BenjaminPrice/subscriptions",
            "organizations_url": "https://api.github.com/users/BenjaminPrice/orgs",
            "repos_url": "https://api.github.com/users/BenjaminPrice/repos",
            "events_url": "https://api.github.com/users/BenjaminPrice/events{/privacy}",
            "received_events_url": "https://api.github.com/users/BenjaminPrice/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "I'm not too fussed over what it's named. I have no problem with the name being changed.",
        "created_at": "2017-11-07T09:49:10Z",
        "updated_at": "2017-11-08T02:48:10Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/65#discussion_r149315953",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/65",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149315953"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/65#discussion_r149315953"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/65"
            }
        },
        "in_reply_to_id": 149315413
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149563316",
        "pull_request_review_id": 74977310,
        "id": 149563316,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTU2MzMxNg==",
        "diff_hunk": "@@ -477,11 +477,12 @@ contract LoopringProtocolImpl is LoopringProtocol {\n         // Calculate each order's `lrcFee` and `lrcRewrard` and splict how much\n         // of `fillAmountS` shall be paid to matching order or miner as margin\n         // split.\n-\n-        calculateRingFees(delegate, ring);\n+        address lrcToken = lrcTokenAddress;",
        "path": "contracts/LoopringProtocolImpl.sol",
        "position": null,
        "original_position": 6,
        "commit_id": "a59dbd4c82c26f09646d19d7a5617730cba7e0b1",
        "original_commit_id": "3f1eccbb0c9d21c30f4f12e57b9a8a243ff5ccc7",
        "user": {
            "login": "BenjaminPrice",
            "id": 3983432,
            "node_id": "MDQ6VXNlcjM5ODM0MzI=",
            "avatar_url": "https://avatars2.githubusercontent.com/u/3983432?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/BenjaminPrice",
            "html_url": "https://github.com/BenjaminPrice",
            "followers_url": "https://api.github.com/users/BenjaminPrice/followers",
            "following_url": "https://api.github.com/users/BenjaminPrice/following{/other_user}",
            "gists_url": "https://api.github.com/users/BenjaminPrice/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/BenjaminPrice/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/BenjaminPrice/subscriptions",
            "organizations_url": "https://api.github.com/users/BenjaminPrice/orgs",
            "repos_url": "https://api.github.com/users/BenjaminPrice/repos",
            "events_url": "https://api.github.com/users/BenjaminPrice/events{/privacy}",
            "received_events_url": "https://api.github.com/users/BenjaminPrice/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Renamed",
        "created_at": "2017-11-08T02:49:09Z",
        "updated_at": "2017-11-08T02:49:09Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/65#discussion_r149563316",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/65",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149563316"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/65#discussion_r149563316"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/65"
            }
        },
        "in_reply_to_id": 149315413
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149565379",
        "pull_request_review_id": 74979599,
        "id": 149565379,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTU2NTM3OQ==",
        "diff_hunk": "@@ -836,21 +837,11 @@ contract LoopringProtocolImpl is LoopringProtocol {\n                 sList[i]\n             );\n \n-            bytes32 orderHash = calculateOrderHash(order);\n-\n-            verifySignature(",
        "path": "contracts/LoopringProtocolImpl.sol",
        "position": 14,
        "original_position": 14,
        "commit_id": "db506defc66324571ff7e89ad40bec5a6a13bbdd",
        "original_commit_id": "db506defc66324571ff7e89ad40bec5a6a13bbdd",
        "user": {
            "login": "dong77",
            "id": 1710087,
            "node_id": "MDQ6VXNlcjE3MTAwODc=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/1710087?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dong77",
            "html_url": "https://github.com/dong77",
            "followers_url": "https://api.github.com/users/dong77/followers",
            "following_url": "https://api.github.com/users/dong77/following{/other_user}",
            "gists_url": "https://api.github.com/users/dong77/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dong77/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dong77/subscriptions",
            "organizations_url": "https://api.github.com/users/dong77/orgs",
            "repos_url": "https://api.github.com/users/dong77/repos",
            "events_url": "https://api.github.com/users/dong77/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dong77/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Orders are created and broadcasted offchain, so when a ring is submitted, none of the orders is signature verified.",
        "created_at": "2017-11-08T03:09:20Z",
        "updated_at": "2017-11-08T03:09:20Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/67#discussion_r149565379",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/67",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149565379"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/67#discussion_r149565379"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/67"
            }
        },
        "in_reply_to_id": 149314871
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149565416",
        "pull_request_review_id": 74979629,
        "id": 149565416,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTU2NTQxNg==",
        "diff_hunk": "@@ -817,6 +817,7 @@ contract LoopringProtocolImpl is LoopringProtocol {\n     {\n         var orders = new OrderState[](addressList.length);\n         var delegate = TokenTransferDelegate(delegateAddress);\n+        uint splitPercentage = MARGIN_SPLIT_PERCENTAGE_BASE;",
        "path": "contracts/LoopringProtocolImpl.sol",
        "position": 4,
        "original_position": 4,
        "commit_id": "db506defc66324571ff7e89ad40bec5a6a13bbdd",
        "original_commit_id": "db506defc66324571ff7e89ad40bec5a6a13bbdd",
        "user": {
            "login": "dong77",
            "id": 1710087,
            "node_id": "MDQ6VXNlcjE3MTAwODc=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/1710087?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dong77",
            "html_url": "https://github.com/dong77",
            "followers_url": "https://api.github.com/users/dong77/followers",
            "following_url": "https://api.github.com/users/dong77/following{/other_user}",
            "gists_url": "https://api.github.com/users/dong77/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dong77/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dong77/subscriptions",
            "organizations_url": "https://api.github.com/users/dong77/orgs",
            "repos_url": "https://api.github.com/users/dong77/repos",
            "events_url": "https://api.github.com/users/dong77/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dong77/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "better to rename this to _marginSplitPercentageBase",
        "created_at": "2017-11-08T03:09:35Z",
        "updated_at": "2017-11-08T03:09:36Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/67#discussion_r149565416",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/67",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149565416"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/67#discussion_r149565416"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/67"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149565538",
        "pull_request_review_id": 74979757,
        "id": 149565538,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTU2NTUzOA==",
        "diff_hunk": "@@ -817,6 +817,7 @@ contract LoopringProtocolImpl is LoopringProtocol {\n     {\n         var orders = new OrderState[](addressList.length);\n         var delegate = TokenTransferDelegate(delegateAddress);\n+        uint splitPercentage = MARGIN_SPLIT_PERCENTAGE_BASE;",
        "path": "contracts/LoopringProtocolImpl.sol",
        "position": 4,
        "original_position": 4,
        "commit_id": "db506defc66324571ff7e89ad40bec5a6a13bbdd",
        "original_commit_id": "db506defc66324571ff7e89ad40bec5a6a13bbdd",
        "user": {
            "login": "dong77",
            "id": 1710087,
            "node_id": "MDQ6VXNlcjE3MTAwODc=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/1710087?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dong77",
            "html_url": "https://github.com/dong77",
            "followers_url": "https://api.github.com/users/dong77/followers",
            "following_url": "https://api.github.com/users/dong77/following{/other_user}",
            "gists_url": "https://api.github.com/users/dong77/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dong77/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dong77/subscriptions",
            "organizations_url": "https://api.github.com/users/dong77/orgs",
            "repos_url": "https://api.github.com/users/dong77/repos",
            "events_url": "https://api.github.com/users/dong77/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dong77/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "But I really doubt this will save gas usage. If the compiler optimizer really does anything, accessing a constant variable should be really fast. It is not the same as access a storage variable.",
        "created_at": "2017-11-08T03:11:06Z",
        "updated_at": "2017-11-08T03:11:06Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/67#discussion_r149565538",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/67",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149565538"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/67#discussion_r149565538"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/67"
            }
        },
        "in_reply_to_id": 149565416
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149565161",
        "pull_request_review_id": 74979372,
        "id": 149565161,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTU2NTE2MQ==",
        "diff_hunk": "@@ -609,21 +600,23 @@ contract LoopringProtocolImpl is LoopringProtocol {\n             var state = ring.orders[i];\n             var next = ring.orders[(i + 1) % ring.size];\n \n-            if (state.feeSelection == FEE_SELECT_LRC) {\n-\n-                uint lrcSpendable = delegate.getSpendable(\n-                    lrcTokenAddress,\n-                    state.order.owner\n-                );\n-\n-                if (lrcSpendable < state.lrcFee) {\n-                    require(!ring.throwIfLRCIsInsuffcient); // \"order LRC balance insuffcient\");\n+            uint lrcSpendable = delegate.getSpendable(\n+                lrcTokenAddress,\n+                state.order.owner\n+            );\n+       \n+            // If order doesn't have enough LRC, set margin split to 100%.\n+            if (state.lrcFee == 0 || minerLrcSpendable < state.lrcFee) {",
        "path": "contracts/LoopringProtocolImpl.sol",
        "position": null,
        "original_position": 95,
        "commit_id": "92b7f693a08115e10e95b333d06c5f55781c0fbf",
        "original_commit_id": "4beaf0c0306b42197e5a7ff72c8919d774c15b22",
        "user": {
            "login": "kongliangzhong",
            "id": 1477179,
            "node_id": "MDQ6VXNlcjE0NzcxNzk=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/1477179?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/kongliangzhong",
            "html_url": "https://github.com/kongliangzhong",
            "followers_url": "https://api.github.com/users/kongliangzhong/followers",
            "following_url": "https://api.github.com/users/kongliangzhong/following{/other_user}",
            "gists_url": "https://api.github.com/users/kongliangzhong/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/kongliangzhong/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/kongliangzhong/subscriptions",
            "organizations_url": "https://api.github.com/users/kongliangzhong/orgs",
            "repos_url": "https://api.github.com/users/kongliangzhong/repos",
            "events_url": "https://api.github.com/users/kongliangzhong/events{/privacy}",
            "received_events_url": "https://api.github.com/users/kongliangzhong/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "\"minerLrcSpendable < state.lrcFee\" should be \"lrcSpendable < state.lrcFee\" ?",
        "created_at": "2017-11-08T03:07:17Z",
        "updated_at": "2017-11-08T04:17:56Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/83#discussion_r149565161",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/83",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149565161"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/83#discussion_r149565161"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/83"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149310098",
        "pull_request_review_id": 74681850,
        "id": 149310098,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTMxMDA5OA==",
        "diff_hunk": "@@ -22,35 +22,26 @@ import \"zeppelin-solidity/contracts/token/ERC20.sol\";\n import \"zeppelin-solidity/contracts/ownership/Ownable.sol\";\n \n \n-/// @title TokenTransferDelegate - Acts as a middle man to transfer ERC20 tokens\n-/// on behalf of different versioned of Loopring protocol to avoid ERC20\n+/// @title ERC20TransferDelegate - Acts as a middle man to transfer ERC20 tokens\n+/// on behalf of different versions of Loopring protocol to avoid ERC20\n /// re-authorization.\n /// @author Daniel Wang - <daniel@loopring.org>.\n-contract TokenTransferDelegate is Ownable {\n+contract ERC20TransferDelegate is Ownable {\n     using Math for uint;\n \n     ////////////////////////////////////////////////////////////////////////////\n     /// Variables                                                            ///\n     ////////////////////////////////////////////////////////////////////////////\n \n-    uint public lastVersion = 0;\n-    address[] public versions;\n-    mapping (address => uint) public versioned;\n+    mapping (address => bool) public authorizedAddresses;\n \n \n     ////////////////////////////////////////////////////////////////////////////\n     /// Modifiers                                                            ///\n     ////////////////////////////////////////////////////////////////////////////\n \n-    modifier isVersioned(address addr) {\n-        if (versioned[addr] == 0) {\n-            revert();\n-        }\n-        _;\n-    }\n-\n-    modifier notVersioned(address addr) {\n-        if (versioned[addr] > 0) {\n+    modifier onlyAuthorized() {\n+        if (authorizedAddresses[msg.sender] == false) {",
        "path": "contracts/ERC20TransferDelegate.sol",
        "position": null,
        "original_position": 38,
        "commit_id": "5b2ca233482752d6d5530ae3b8586ef0f1528830",
        "original_commit_id": "e4fa6a85cbe67236274094d0bfdb69bb8fdb92fd",
        "user": {
            "login": "dong77",
            "id": 1710087,
            "node_id": "MDQ6VXNlcjE3MTAwODc=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/1710087?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dong77",
            "html_url": "https://github.com/dong77",
            "followers_url": "https://api.github.com/users/dong77/followers",
            "following_url": "https://api.github.com/users/dong77/following{/other_user}",
            "gists_url": "https://api.github.com/users/dong77/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dong77/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dong77/subscriptions",
            "organizations_url": "https://api.github.com/users/dong77/orgs",
            "repos_url": "https://api.github.com/users/dong77/repos",
            "events_url": "https://api.github.com/users/dong77/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dong77/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "removing versioned from the delegate will make browsing protocol version impossible, which is not good. I want people able to get a list of revisions using Mist or other Ethereum wallet.",
        "created_at": "2017-11-07T09:25:36Z",
        "updated_at": "2017-11-08T08:43:04Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/66#discussion_r149310098",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/66",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149310098"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/66#discussion_r149310098"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/66"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149310923",
        "pull_request_review_id": 74681850,
        "id": 149310923,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTMxMDkyMw==",
        "diff_hunk": "@@ -501,54 +501,127 @@ contract LoopringProtocolImpl is LoopringProtocol {\n         );\n     }\n \n-    function settleRing(\n-        TokenTransferDelegate delegate,\n-        Ring ring\n-        )\n+    function calculateTransferBatchLength(OrderState[] orders)\n         internal\n+        constant\n+        returns (uint)",
        "path": "contracts/LoopringProtocolImpl.sol",
        "position": null,
        "original_position": 44,
        "commit_id": "5b2ca233482752d6d5530ae3b8586ef0f1528830",
        "original_commit_id": "e4fa6a85cbe67236274094d0bfdb69bb8fdb92fd",
        "user": {
            "login": "dong77",
            "id": 1710087,
            "node_id": "MDQ6VXNlcjE3MTAwODc=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/1710087?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dong77",
            "html_url": "https://github.com/dong77",
            "followers_url": "https://api.github.com/users/dong77/followers",
            "following_url": "https://api.github.com/users/dong77/following{/other_user}",
            "gists_url": "https://api.github.com/users/dong77/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dong77/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dong77/subscriptions",
            "organizations_url": "https://api.github.com/users/dong77/orgs",
            "repos_url": "https://api.github.com/users/dong77/repos",
            "events_url": "https://api.github.com/users/dong77/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dong77/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "how about `returns (unit batchLength); `\r\n\r\nthen remove the return statement?",
        "created_at": "2017-11-07T09:29:02Z",
        "updated_at": "2017-11-08T08:43:04Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/66#discussion_r149310923",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/66",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149310923"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/66#discussion_r149310923"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/66"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149311142",
        "pull_request_review_id": 74681850,
        "id": 149311142,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTMxMTE0Mg==",
        "diff_hunk": "@@ -501,54 +501,127 @@ contract LoopringProtocolImpl is LoopringProtocol {\n         );\n     }\n \n-    function settleRing(\n-        TokenTransferDelegate delegate,\n-        Ring ring\n-        )\n+    function calculateTransferBatchLength(OrderState[] orders)\n         internal\n+        constant\n+        returns (uint)\n     {\n-        for (uint i = 0; i < ring.size; i++) {\n+        uint ringSize = orders.length;\n+        uint batchLength = ringSize;\n+\n+        for (uint i = 0; i < ringSize; i++) {\n+            var state = orders[i];\n+            var prev = orders[(i + ringSize - 1) % ringSize];\n+            var next = orders[(i + 1) % ringSize];\n+\n+            if (prev.splitB + state.splitS > 0) {\n+                batchLength++;\n+            }\n+            if (state.lrcReward > 0) {\n+                batchLength++;\n+            }\n+            if (state.lrcFee > 0) {\n+                batchLength++;\n+            }\n+        }\n+\n+        return batchLength;\n+    }\n+\n+    function fillTransferBatchItem(\n+        bytes32[] memory batch,\n+        uint position,\n+        address token,\n+        address from,\n+        address to,\n+        uint value)\n+        internal\n+        constant",
        "path": "contracts/LoopringProtocolImpl.sol",
        "position": null,
        "original_position": 77,
        "commit_id": "5b2ca233482752d6d5530ae3b8586ef0f1528830",
        "original_commit_id": "e4fa6a85cbe67236274094d0bfdb69bb8fdb92fd",
        "user": {
            "login": "dong77",
            "id": 1710087,
            "node_id": "MDQ6VXNlcjE3MTAwODc=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/1710087?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dong77",
            "html_url": "https://github.com/dong77",
            "followers_url": "https://api.github.com/users/dong77/followers",
            "following_url": "https://api.github.com/users/dong77/following{/other_user}",
            "gists_url": "https://api.github.com/users/dong77/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dong77/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dong77/subscriptions",
            "organizations_url": "https://api.github.com/users/dong77/orgs",
            "repos_url": "https://api.github.com/users/dong77/repos",
            "events_url": "https://api.github.com/users/dong77/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dong77/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "with new compiler, `constant` can be changed to `pure` in this case.",
        "created_at": "2017-11-07T09:29:55Z",
        "updated_at": "2017-11-08T08:43:04Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/66#discussion_r149311142",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/66",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149311142"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/66#discussion_r149311142"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/66"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149312846",
        "pull_request_review_id": 74681850,
        "id": 149312846,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTMxMjg0Ng==",
        "diff_hunk": "@@ -145,13 +101,22 @@ contract TokenTransferDelegate is Ownable {\n         }\n     }\n \n-    /// @dev Gets all versioned addresses.\n-    /// @return Array of versioned addresses.\n-    function getVersions()\n+    function transferTokenBatch(bytes32[] batch)\n+        onlyAuthorized\n         public\n-        constant\n-        returns (address[])\n     {\n-        return versions;\n+        uint len = batch.length;\n+        for (uint i = 0; i < len; i += 4) {\n+            address token = address(batch[i]);\n+            address from = address(batch[i + 1]);\n+            address to = address(batch[i + 2]);\n+            uint value = uint(batch[i + 3]);\n+\n+            if (from != to) {\n+                require(\n+                    ERC20(token).transferFrom(from, to, value)",
        "path": "contracts/ERC20TransferDelegate.sol",
        "position": null,
        "original_position": 150,
        "commit_id": "5b2ca233482752d6d5530ae3b8586ef0f1528830",
        "original_commit_id": "e4fa6a85cbe67236274094d0bfdb69bb8fdb92fd",
        "user": {
            "login": "dong77",
            "id": 1710087,
            "node_id": "MDQ6VXNlcjE3MTAwODc=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/1710087?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dong77",
            "html_url": "https://github.com/dong77",
            "followers_url": "https://api.github.com/users/dong77/followers",
            "following_url": "https://api.github.com/users/dong77/following{/other_user}",
            "gists_url": "https://api.github.com/users/dong77/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dong77/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dong77/subscriptions",
            "organizations_url": "https://api.github.com/users/dong77/orgs",
            "repos_url": "https://api.github.com/users/dong77/repos",
            "events_url": "https://api.github.com/users/dong77/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dong77/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "can we skip using local variables and do \r\n```\r\n ERC20(address(batch[i])).transferFrom(\r\n    address(batch[i + 1]),\r\n    address(batch[i + 2]),\r\n    uint(batch[i + 3])\r\n\r\n```",
        "created_at": "2017-11-07T09:36:59Z",
        "updated_at": "2017-11-08T08:43:04Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/66#discussion_r149312846",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/66",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149312846"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/66#discussion_r149312846"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/66"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149536976",
        "pull_request_review_id": 74946945,
        "id": 149536976,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTUzNjk3Ng==",
        "diff_hunk": "@@ -22,35 +22,26 @@ import \"zeppelin-solidity/contracts/token/ERC20.sol\";\n import \"zeppelin-solidity/contracts/ownership/Ownable.sol\";\n \n \n-/// @title TokenTransferDelegate - Acts as a middle man to transfer ERC20 tokens\n-/// on behalf of different versioned of Loopring protocol to avoid ERC20\n+/// @title ERC20TransferDelegate - Acts as a middle man to transfer ERC20 tokens\n+/// on behalf of different versions of Loopring protocol to avoid ERC20\n /// re-authorization.\n /// @author Daniel Wang - <daniel@loopring.org>.\n-contract TokenTransferDelegate is Ownable {\n+contract ERC20TransferDelegate is Ownable {\n     using Math for uint;\n \n     ////////////////////////////////////////////////////////////////////////////\n     /// Variables                                                            ///\n     ////////////////////////////////////////////////////////////////////////////\n \n-    uint public lastVersion = 0;\n-    address[] public versions;\n-    mapping (address => uint) public versioned;\n+    mapping (address => bool) public authorizedAddresses;\n \n \n     ////////////////////////////////////////////////////////////////////////////\n     /// Modifiers                                                            ///\n     ////////////////////////////////////////////////////////////////////////////\n \n-    modifier isVersioned(address addr) {\n-        if (versioned[addr] == 0) {\n-            revert();\n-        }\n-        _;\n-    }\n-\n-    modifier notVersioned(address addr) {\n-        if (versioned[addr] > 0) {\n+    modifier onlyAuthorized() {\n+        if (authorizedAddresses[msg.sender] == false) {",
        "path": "contracts/ERC20TransferDelegate.sol",
        "position": null,
        "original_position": 38,
        "commit_id": "5b2ca233482752d6d5530ae3b8586ef0f1528830",
        "original_commit_id": "e4fa6a85cbe67236274094d0bfdb69bb8fdb92fd",
        "user": {
            "login": "rainydio",
            "id": 14178795,
            "node_id": "MDQ6VXNlcjE0MTc4Nzk1",
            "avatar_url": "https://avatars1.githubusercontent.com/u/14178795?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rainydio",
            "html_url": "https://github.com/rainydio",
            "followers_url": "https://api.github.com/users/rainydio/followers",
            "following_url": "https://api.github.com/users/rainydio/following{/other_user}",
            "gists_url": "https://api.github.com/users/rainydio/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rainydio/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rainydio/subscriptions",
            "organizations_url": "https://api.github.com/users/rainydio/orgs",
            "repos_url": "https://api.github.com/users/rainydio/repos",
            "events_url": "https://api.github.com/users/rainydio/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rainydio/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Okay, so I can just revert to your version. But I just implemented LinkedList. It is not covered with tests thou.\r\n\r\nAs an exercise I was figuring out what kind of bytecode solidity is generating. Let's just call that inefficient. What do you think about [LLLC ](https://media.readthedocs.org/pdf/lll-docs/latest/lll-docs.pdf)? Will you immediately reject pull request upon seeing lisp-style braces?",
        "created_at": "2017-11-07T23:32:37Z",
        "updated_at": "2017-11-08T08:43:04Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/66#discussion_r149536976",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/66",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149536976"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/66#discussion_r149536976"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/66"
            }
        },
        "in_reply_to_id": 149310098
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149537059",
        "pull_request_review_id": 74947036,
        "id": 149537059,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTUzNzA1OQ==",
        "diff_hunk": "@@ -145,13 +101,22 @@ contract TokenTransferDelegate is Ownable {\n         }\n     }\n \n-    /// @dev Gets all versioned addresses.\n-    /// @return Array of versioned addresses.\n-    function getVersions()\n+    function transferTokenBatch(bytes32[] batch)\n+        onlyAuthorized\n         public\n-        constant\n-        returns (address[])\n     {\n-        return versions;\n+        uint len = batch.length;\n+        for (uint i = 0; i < len; i += 4) {\n+            address token = address(batch[i]);\n+            address from = address(batch[i + 1]);\n+            address to = address(batch[i + 2]);\n+            uint value = uint(batch[i + 3]);\n+\n+            if (from != to) {\n+                require(\n+                    ERC20(token).transferFrom(from, to, value)",
        "path": "contracts/ERC20TransferDelegate.sol",
        "position": null,
        "original_position": 150,
        "commit_id": "5b2ca233482752d6d5530ae3b8586ef0f1528830",
        "original_commit_id": "e4fa6a85cbe67236274094d0bfdb69bb8fdb92fd",
        "user": {
            "login": "rainydio",
            "id": 14178795,
            "node_id": "MDQ6VXNlcjE0MTc4Nzk1",
            "avatar_url": "https://avatars1.githubusercontent.com/u/14178795?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rainydio",
            "html_url": "https://github.com/rainydio",
            "followers_url": "https://api.github.com/users/rainydio/followers",
            "following_url": "https://api.github.com/users/rainydio/following{/other_user}",
            "gists_url": "https://api.github.com/users/rainydio/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rainydio/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rainydio/subscriptions",
            "organizations_url": "https://api.github.com/users/rainydio/orgs",
            "repos_url": "https://api.github.com/users/rainydio/repos",
            "events_url": "https://api.github.com/users/rainydio/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rainydio/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "We cannot skip those variable except `token`, because of `if (from != to && value > 0)`",
        "created_at": "2017-11-07T23:33:03Z",
        "updated_at": "2017-11-08T08:43:04Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/66#discussion_r149537059",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/66",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149537059"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/66#discussion_r149537059"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/66"
            }
        },
        "in_reply_to_id": 149312846
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149537134",
        "pull_request_review_id": 74947118,
        "id": 149537134,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTUzNzEzNA==",
        "diff_hunk": "@@ -501,54 +501,127 @@ contract LoopringProtocolImpl is LoopringProtocol {\n         );\n     }\n \n-    function settleRing(\n-        TokenTransferDelegate delegate,\n-        Ring ring\n-        )\n+    function calculateTransferBatchLength(OrderState[] orders)\n         internal\n+        constant\n+        returns (uint)",
        "path": "contracts/LoopringProtocolImpl.sol",
        "position": null,
        "original_position": 44,
        "commit_id": "5b2ca233482752d6d5530ae3b8586ef0f1528830",
        "original_commit_id": "e4fa6a85cbe67236274094d0bfdb69bb8fdb92fd",
        "user": {
            "login": "rainydio",
            "id": 14178795,
            "node_id": "MDQ6VXNlcjE0MTc4Nzk1",
            "avatar_url": "https://avatars1.githubusercontent.com/u/14178795?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rainydio",
            "html_url": "https://github.com/rainydio",
            "followers_url": "https://api.github.com/users/rainydio/followers",
            "following_url": "https://api.github.com/users/rainydio/following{/other_user}",
            "gists_url": "https://api.github.com/users/rainydio/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rainydio/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rainydio/subscriptions",
            "organizations_url": "https://api.github.com/users/rainydio/orgs",
            "repos_url": "https://api.github.com/users/rainydio/repos",
            "events_url": "https://api.github.com/users/rainydio/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rainydio/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Done",
        "created_at": "2017-11-07T23:33:31Z",
        "updated_at": "2017-11-08T08:43:04Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/66#discussion_r149537134",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/66",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149537134"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/66#discussion_r149537134"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/66"
            }
        },
        "in_reply_to_id": 149310923
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149537178",
        "pull_request_review_id": 74947161,
        "id": 149537178,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTUzNzE3OA==",
        "diff_hunk": "@@ -501,54 +501,127 @@ contract LoopringProtocolImpl is LoopringProtocol {\n         );\n     }\n \n-    function settleRing(\n-        TokenTransferDelegate delegate,\n-        Ring ring\n-        )\n+    function calculateTransferBatchLength(OrderState[] orders)\n         internal\n+        constant\n+        returns (uint)\n     {\n-        for (uint i = 0; i < ring.size; i++) {\n+        uint ringSize = orders.length;\n+        uint batchLength = ringSize;\n+\n+        for (uint i = 0; i < ringSize; i++) {\n+            var state = orders[i];\n+            var prev = orders[(i + ringSize - 1) % ringSize];\n+            var next = orders[(i + 1) % ringSize];\n+\n+            if (prev.splitB + state.splitS > 0) {\n+                batchLength++;\n+            }\n+            if (state.lrcReward > 0) {\n+                batchLength++;\n+            }\n+            if (state.lrcFee > 0) {\n+                batchLength++;\n+            }\n+        }\n+\n+        return batchLength;\n+    }\n+\n+    function fillTransferBatchItem(\n+        bytes32[] memory batch,\n+        uint position,\n+        address token,\n+        address from,\n+        address to,\n+        uint value)\n+        internal\n+        constant",
        "path": "contracts/LoopringProtocolImpl.sol",
        "position": null,
        "original_position": 77,
        "commit_id": "5b2ca233482752d6d5530ae3b8586ef0f1528830",
        "original_commit_id": "e4fa6a85cbe67236274094d0bfdb69bb8fdb92fd",
        "user": {
            "login": "rainydio",
            "id": 14178795,
            "node_id": "MDQ6VXNlcjE0MTc4Nzk1",
            "avatar_url": "https://avatars1.githubusercontent.com/u/14178795?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rainydio",
            "html_url": "https://github.com/rainydio",
            "followers_url": "https://api.github.com/users/rainydio/followers",
            "following_url": "https://api.github.com/users/rainydio/following{/other_user}",
            "gists_url": "https://api.github.com/users/rainydio/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rainydio/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rainydio/subscriptions",
            "organizations_url": "https://api.github.com/users/rainydio/orgs",
            "repos_url": "https://api.github.com/users/rainydio/repos",
            "events_url": "https://api.github.com/users/rainydio/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rainydio/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "... and `private`",
        "created_at": "2017-11-07T23:33:50Z",
        "updated_at": "2017-11-08T08:43:04Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/66#discussion_r149537178",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/66",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149537178"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/66#discussion_r149537178"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/66"
            }
        },
        "in_reply_to_id": 149311142
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149855106",
        "pull_request_review_id": 75316912,
        "id": 149855106,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTg1NTEwNg==",
        "diff_hunk": "@@ -109,10 +109,10 @@ contract TokenTransferDelegate is Ownable {\n         onlyOwner\n         public\n     {\n-        AddressInfo storage addrInfo = addressInfos[addr];\n-        if (addrInfo.index != 0) {\n-            addrInfo.authorized = false;\n-            AddressDeauthorized(addr, addrInfo.index);\n+        var index = addressInfos[addr].index;",
        "path": "contracts/TokenTransferDelegate.sol",
        "position": null,
        "original_position": 8,
        "commit_id": "f9d39cacd7f7748a60e3fd4b314ae36e0e117950",
        "original_commit_id": "e75acca73cbb8e918197ba064039d0524a53fabc",
        "user": {
            "login": "dong77",
            "id": 1710087,
            "node_id": "MDQ6VXNlcjE3MTAwODc=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/1710087?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dong77",
            "html_url": "https://github.com/dong77",
            "followers_url": "https://api.github.com/users/dong77/followers",
            "following_url": "https://api.github.com/users/dong77/following{/other_user}",
            "gists_url": "https://api.github.com/users/dong77/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dong77/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dong77/subscriptions",
            "organizations_url": "https://api.github.com/users/dong77/orgs",
            "repos_url": "https://api.github.com/users/dong77/repos",
            "events_url": "https://api.github.com/users/dong77/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dong77/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "var => uint",
        "created_at": "2017-11-09T02:43:58Z",
        "updated_at": "2017-11-09T02:48:48Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/99#discussion_r149855106",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/99",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149855106"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/99#discussion_r149855106"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/99"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149855624",
        "pull_request_review_id": 75317497,
        "id": 149855624,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTg1NTYyNA==",
        "diff_hunk": "@@ -109,10 +109,10 @@ contract TokenTransferDelegate is Ownable {\n         onlyOwner\n         public\n     {\n-        AddressInfo storage addrInfo = addressInfos[addr];\n-        if (addrInfo.index != 0) {\n-            addrInfo.authorized = false;\n-            AddressDeauthorized(addr, addrInfo.index);\n+        var index = addressInfos[addr].index;",
        "path": "contracts/TokenTransferDelegate.sol",
        "position": null,
        "original_position": 8,
        "commit_id": "f9d39cacd7f7748a60e3fd4b314ae36e0e117950",
        "original_commit_id": "e75acca73cbb8e918197ba064039d0524a53fabc",
        "user": {
            "login": "BenjaminPrice",
            "id": 3983432,
            "node_id": "MDQ6VXNlcjM5ODM0MzI=",
            "avatar_url": "https://avatars2.githubusercontent.com/u/3983432?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/BenjaminPrice",
            "html_url": "https://github.com/BenjaminPrice",
            "followers_url": "https://api.github.com/users/BenjaminPrice/followers",
            "following_url": "https://api.github.com/users/BenjaminPrice/following{/other_user}",
            "gists_url": "https://api.github.com/users/BenjaminPrice/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/BenjaminPrice/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/BenjaminPrice/subscriptions",
            "organizations_url": "https://api.github.com/users/BenjaminPrice/orgs",
            "repos_url": "https://api.github.com/users/BenjaminPrice/repos",
            "events_url": "https://api.github.com/users/BenjaminPrice/events{/privacy}",
            "received_events_url": "https://api.github.com/users/BenjaminPrice/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "fixed",
        "created_at": "2017-11-09T02:49:01Z",
        "updated_at": "2017-11-09T02:49:01Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/99#discussion_r149855624",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/99",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149855624"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/99#discussion_r149855624"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/99"
            }
        },
        "in_reply_to_id": 149855106
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149854895",
        "pull_request_review_id": 75316671,
        "id": 149854895,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTg1NDg5NQ==",
        "diff_hunk": "@@ -881,12 +881,12 @@ contract LoopringProtocolImpl is LoopringProtocol {\n         returns (uint)\n     {\n         var token = ERC20(tokenAddress);\n-        return token.allowance(\n+        var allowance = token.allowance(",
        "path": "contracts/LoopringProtocolImpl.sol",
        "position": null,
        "original_position": 14,
        "commit_id": "71e4f459d5dc9632162cb21f4f4095850eb6b8ed",
        "original_commit_id": "96151d61526064382294e21069b37442bb6838ef",
        "user": {
            "login": "dong77",
            "id": 1710087,
            "node_id": "MDQ6VXNlcjE3MTAwODc=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/1710087?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dong77",
            "html_url": "https://github.com/dong77",
            "followers_url": "https://api.github.com/users/dong77/followers",
            "following_url": "https://api.github.com/users/dong77/following{/other_user}",
            "gists_url": "https://api.github.com/users/dong77/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dong77/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dong77/subscriptions",
            "organizations_url": "https://api.github.com/users/dong77/orgs",
            "repos_url": "https://api.github.com/users/dong77/repos",
            "events_url": "https://api.github.com/users/dong77/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dong77/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "change var to uint?",
        "created_at": "2017-11-09T02:41:58Z",
        "updated_at": "2017-11-09T02:52:51Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/104#discussion_r149854895",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/104",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149854895"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/104#discussion_r149854895"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/104"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149854991",
        "pull_request_review_id": 75316790,
        "id": 149854991,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTg1NDk5MQ==",
        "diff_hunk": "@@ -85,14 +81,14 @@ library MathUint {\n         }\n \n         uint cvs = 0;\n+        uint s = 0;\n         for (i = 0; i < len; i++) {\n-            uint sub = 0;\n             if (arr[i] > avg) {\n-                sub = arr[i] - avg;\n+                s = arr[i] - avg;",
        "path": "contracts/lib/MathUint.sol",
        "position": null,
        "original_position": 20,
        "commit_id": "71e4f459d5dc9632162cb21f4f4095850eb6b8ed",
        "original_commit_id": "96151d61526064382294e21069b37442bb6838ef",
        "user": {
            "login": "dong77",
            "id": 1710087,
            "node_id": "MDQ6VXNlcjE3MTAwODc=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/1710087?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dong77",
            "html_url": "https://github.com/dong77",
            "followers_url": "https://api.github.com/users/dong77/followers",
            "following_url": "https://api.github.com/users/dong77/following{/other_user}",
            "gists_url": "https://api.github.com/users/dong77/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dong77/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dong77/subscriptions",
            "organizations_url": "https://api.github.com/users/dong77/orgs",
            "repos_url": "https://api.github.com/users/dong77/repos",
            "events_url": "https://api.github.com/users/dong77/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dong77/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "how about `s = arr[i] > avg ? arr[i] - avg : avg - arr[i];`",
        "created_at": "2017-11-09T02:42:51Z",
        "updated_at": "2017-11-09T02:52:51Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/104#discussion_r149854991",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/104",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149854991"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/104#discussion_r149854991"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/104"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149855048",
        "pull_request_review_id": 75316842,
        "id": 149855048,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTg1NTA0OA==",
        "diff_hunk": "@@ -866,7 +866,7 @@ contract LoopringProtocolImpl is LoopringProtocol {\n             require(order.amountS > 0); // \"amountS is zero\");\n             require(order.amountB > 0); // \"amountB is zero\");\n \n-            state.fillAmountS = order.amountS.min(state.availableAmountS);\n+            state.fillAmountS = (order.amountS < state.availableAmountS ? order.amountS : state.availableAmountS);",
        "path": "contracts/LoopringProtocolImpl.sol",
        "position": null,
        "original_position": 5,
        "commit_id": "71e4f459d5dc9632162cb21f4f4095850eb6b8ed",
        "original_commit_id": "96151d61526064382294e21069b37442bb6838ef",
        "user": {
            "login": "dong77",
            "id": 1710087,
            "node_id": "MDQ6VXNlcjE3MTAwODc=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/1710087?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dong77",
            "html_url": "https://github.com/dong77",
            "followers_url": "https://api.github.com/users/dong77/followers",
            "following_url": "https://api.github.com/users/dong77/following{/other_user}",
            "gists_url": "https://api.github.com/users/dong77/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dong77/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dong77/subscriptions",
            "organizations_url": "https://api.github.com/users/dong77/orgs",
            "repos_url": "https://api.github.com/users/dong77/repos",
            "events_url": "https://api.github.com/users/dong77/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dong77/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "please try to wrap at or before 80 chars.",
        "created_at": "2017-11-09T02:43:23Z",
        "updated_at": "2017-11-09T02:52:51Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/104#discussion_r149855048",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/104",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149855048"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/104#discussion_r149855048"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/104"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149855172",
        "pull_request_review_id": 75316984,
        "id": 149855172,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTg1NTE3Mg==",
        "diff_hunk": "@@ -881,12 +881,12 @@ contract LoopringProtocolImpl is LoopringProtocol {\n         returns (uint)\n     {\n         var token = ERC20(tokenAddress);\n-        return token.allowance(\n+        var allowance = token.allowance(",
        "path": "contracts/LoopringProtocolImpl.sol",
        "position": null,
        "original_position": 14,
        "commit_id": "71e4f459d5dc9632162cb21f4f4095850eb6b8ed",
        "original_commit_id": "96151d61526064382294e21069b37442bb6838ef",
        "user": {
            "login": "BenjaminPrice",
            "id": 3983432,
            "node_id": "MDQ6VXNlcjM5ODM0MzI=",
            "avatar_url": "https://avatars2.githubusercontent.com/u/3983432?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/BenjaminPrice",
            "html_url": "https://github.com/BenjaminPrice",
            "followers_url": "https://api.github.com/users/BenjaminPrice/followers",
            "following_url": "https://api.github.com/users/BenjaminPrice/following{/other_user}",
            "gists_url": "https://api.github.com/users/BenjaminPrice/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/BenjaminPrice/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/BenjaminPrice/subscriptions",
            "organizations_url": "https://api.github.com/users/BenjaminPrice/orgs",
            "repos_url": "https://api.github.com/users/BenjaminPrice/repos",
            "events_url": "https://api.github.com/users/BenjaminPrice/events{/privacy}",
            "received_events_url": "https://api.github.com/users/BenjaminPrice/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Sure, I'll change that. Compiler should handle that though.",
        "created_at": "2017-11-09T02:44:31Z",
        "updated_at": "2017-11-09T02:52:51Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/104#discussion_r149855172",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/104",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149855172"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/104#discussion_r149855172"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/104"
            }
        },
        "in_reply_to_id": 149854895
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149855206",
        "pull_request_review_id": 75317028,
        "id": 149855206,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTg1NTIwNg==",
        "diff_hunk": "@@ -85,14 +81,14 @@ library MathUint {\n         }\n \n         uint cvs = 0;\n+        uint s = 0;\n         for (i = 0; i < len; i++) {\n-            uint sub = 0;\n             if (arr[i] > avg) {\n-                sub = arr[i] - avg;\n+                s = arr[i] - avg;",
        "path": "contracts/lib/MathUint.sol",
        "position": null,
        "original_position": 20,
        "commit_id": "71e4f459d5dc9632162cb21f4f4095850eb6b8ed",
        "original_commit_id": "96151d61526064382294e21069b37442bb6838ef",
        "user": {
            "login": "BenjaminPrice",
            "id": 3983432,
            "node_id": "MDQ6VXNlcjM5ODM0MzI=",
            "avatar_url": "https://avatars2.githubusercontent.com/u/3983432?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/BenjaminPrice",
            "html_url": "https://github.com/BenjaminPrice",
            "followers_url": "https://api.github.com/users/BenjaminPrice/followers",
            "following_url": "https://api.github.com/users/BenjaminPrice/following{/other_user}",
            "gists_url": "https://api.github.com/users/BenjaminPrice/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/BenjaminPrice/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/BenjaminPrice/subscriptions",
            "organizations_url": "https://api.github.com/users/BenjaminPrice/orgs",
            "repos_url": "https://api.github.com/users/BenjaminPrice/repos",
            "events_url": "https://api.github.com/users/BenjaminPrice/events{/privacy}",
            "received_events_url": "https://api.github.com/users/BenjaminPrice/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "I'll see if it's any different",
        "created_at": "2017-11-09T02:44:50Z",
        "updated_at": "2017-11-09T02:52:51Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/104#discussion_r149855206",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/104",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/149855206"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/104#discussion_r149855206"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/104"
            }
        },
        "in_reply_to_id": 149854991
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/150120849",
        "pull_request_review_id": 75626491,
        "id": 150120849,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MDEyMDg0OQ==",
        "diff_hunk": "@@ -154,7 +154,7 @@ contract RinghashRegistry {\n     {\n         var submission = submissions[ringhash];\n         return (\n-            submission.block + blocksToLive >= block.number && (\n+            submission.block + blocksToLive >= uint64(block.number) && (",
        "path": "contracts/RinghashRegistry.sol",
        "position": null,
        "original_position": 46,
        "commit_id": "1a49005d19a96ac1ae11d0d2819199a1bab336ec",
        "original_commit_id": "627b7c364f2a80befc12035317c3038d24a13163",
        "user": {
            "login": "dong77",
            "id": 1710087,
            "node_id": "MDQ6VXNlcjE3MTAwODc=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/1710087?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dong77",
            "html_url": "https://github.com/dong77",
            "followers_url": "https://api.github.com/users/dong77/followers",
            "following_url": "https://api.github.com/users/dong77/following{/other_user}",
            "gists_url": "https://api.github.com/users/dong77/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dong77/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dong77/subscriptions",
            "organizations_url": "https://api.github.com/users/dong77/orgs",
            "repos_url": "https://api.github.com/users/dong77/repos",
            "events_url": "https://api.github.com/users/dong77/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dong77/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "How about converting the first part up to uint? ",
        "created_at": "2017-11-09T23:47:40Z",
        "updated_at": "2017-11-10T01:14:11Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/109#discussion_r150120849",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/109",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/150120849"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/109#discussion_r150120849"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/109"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/150131156",
        "pull_request_review_id": 75637894,
        "id": 150131156,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MDEzMTE1Ng==",
        "diff_hunk": "@@ -154,7 +154,7 @@ contract RinghashRegistry {\n     {\n         var submission = submissions[ringhash];\n         return (\n-            submission.block + blocksToLive >= block.number && (\n+            submission.block + blocksToLive >= uint64(block.number) && (",
        "path": "contracts/RinghashRegistry.sol",
        "position": null,
        "original_position": 46,
        "commit_id": "1a49005d19a96ac1ae11d0d2819199a1bab336ec",
        "original_commit_id": "627b7c364f2a80befc12035317c3038d24a13163",
        "user": {
            "login": "rainydio",
            "id": 14178795,
            "node_id": "MDQ6VXNlcjE0MTc4Nzk1",
            "avatar_url": "https://avatars1.githubusercontent.com/u/14178795?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rainydio",
            "html_url": "https://github.com/rainydio",
            "followers_url": "https://api.github.com/users/rainydio/followers",
            "following_url": "https://api.github.com/users/rainydio/following{/other_user}",
            "gists_url": "https://api.github.com/users/rainydio/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rainydio/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rainydio/subscriptions",
            "organizations_url": "https://api.github.com/users/rainydio/orgs",
            "repos_url": "https://api.github.com/users/rainydio/repos",
            "events_url": "https://api.github.com/users/rainydio/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rainydio/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "EVM has 32 byte word. Storage key? 32. Storage value? 32. Writes to storage are expensive (20000 gas). So solidity will try bit magic and pack multiple values whenever possible into a single storage slot.\r\n\r\nFor example `address`, `uint32`, `uint64` are all 32 bytes on stack. Those are just compiler hints to try and fit them into a single storage slot. Memory, stack size, arithmetic operations still use 32 byte word.\r\n\r\n`uint64` is more then enough for storing block number. It oveflows at `9,223,372,036,854,775,807`. Even if 1000 block are produced every second It will take 292 million years to overflow.",
        "created_at": "2017-11-10T00:58:46Z",
        "updated_at": "2017-11-10T01:14:11Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/109#discussion_r150131156",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/109",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/150131156"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/109#discussion_r150131156"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/109"
            }
        },
        "in_reply_to_id": 150120849
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/150131413",
        "pull_request_review_id": 75638189,
        "id": 150131413,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MDEzMTQxMw==",
        "diff_hunk": "@@ -154,7 +154,7 @@ contract RinghashRegistry {\n     {\n         var submission = submissions[ringhash];\n         return (\n-            submission.block + blocksToLive >= block.number && (\n+            submission.block + blocksToLive >= uint64(block.number) && (",
        "path": "contracts/RinghashRegistry.sol",
        "position": null,
        "original_position": 46,
        "commit_id": "1a49005d19a96ac1ae11d0d2819199a1bab336ec",
        "original_commit_id": "627b7c364f2a80befc12035317c3038d24a13163",
        "user": {
            "login": "rainydio",
            "id": 14178795,
            "node_id": "MDQ6VXNlcjE0MTc4Nzk1",
            "avatar_url": "https://avatars1.githubusercontent.com/u/14178795?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rainydio",
            "html_url": "https://github.com/rainydio",
            "followers_url": "https://api.github.com/users/rainydio/followers",
            "following_url": "https://api.github.com/users/rainydio/following{/other_user}",
            "gists_url": "https://api.github.com/users/rainydio/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rainydio/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rainydio/subscriptions",
            "organizations_url": "https://api.github.com/users/rainydio/orgs",
            "repos_url": "https://api.github.com/users/rainydio/repos",
            "events_url": "https://api.github.com/users/rainydio/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rainydio/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "First part was `uint`, I converted it to `uint64` to save 13k gas on each submission.",
        "created_at": "2017-11-10T01:00:36Z",
        "updated_at": "2017-11-10T01:14:11Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/109#discussion_r150131413",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/109",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/150131413"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/109#discussion_r150131413"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/109"
            }
        },
        "in_reply_to_id": 150120849
    },
    {
        "url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/150133774",
        "pull_request_review_id": 75640841,
        "id": 150133774,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MDEzMzc3NA==",
        "diff_hunk": "@@ -154,7 +154,7 @@ contract RinghashRegistry {\n     {\n         var submission = submissions[ringhash];\n         return (\n-            submission.block + blocksToLive >= block.number && (\n+            submission.block + blocksToLive >= uint64(block.number) && (",
        "path": "contracts/RinghashRegistry.sol",
        "position": null,
        "original_position": 46,
        "commit_id": "1a49005d19a96ac1ae11d0d2819199a1bab336ec",
        "original_commit_id": "627b7c364f2a80befc12035317c3038d24a13163",
        "user": {
            "login": "rainydio",
            "id": 14178795,
            "node_id": "MDQ6VXNlcjE0MTc4Nzk1",
            "avatar_url": "https://avatars1.githubusercontent.com/u/14178795?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rainydio",
            "html_url": "https://github.com/rainydio",
            "followers_url": "https://api.github.com/users/rainydio/followers",
            "following_url": "https://api.github.com/users/rainydio/following{/other_user}",
            "gists_url": "https://api.github.com/users/rainydio/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rainydio/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rainydio/subscriptions",
            "organizations_url": "https://api.github.com/users/rainydio/orgs",
            "repos_url": "https://api.github.com/users/rainydio/repos",
            "events_url": "https://api.github.com/users/rainydio/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rainydio/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Changed that. But compiler does not care about those casts. EVM still gonna use `ADD`, `LT`, `GT` on 32 byte words.",
        "created_at": "2017-11-10T01:18:03Z",
        "updated_at": "2017-11-10T01:18:13Z",
        "html_url": "https://github.com/LoopringSecondary/protocol/pull/109#discussion_r150133774",
        "pull_request_url": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/109",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/comments/150133774"
            },
            "html": {
                "href": "https://github.com/LoopringSecondary/protocol/pull/109#discussion_r150133774"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/LoopringSecondary/protocol/pulls/109"
            }
        },
        "in_reply_to_id": 150120849
    }
]