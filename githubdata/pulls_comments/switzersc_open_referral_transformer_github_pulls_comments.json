[
    {
        "url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259591156",
        "pull_request_review_id": 207122820,
        "id": 259591156,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTU5MTE1Ng==",
        "diff_hunk": "@@ -8,11 +8,13 @@ class OpenReferralTransformer\n   LOCATION_HEADERS = %w(id organization_id name alternate_name description transportation latitude longitude)\n   SERVICE_HEADERS = %w(id organization_id program_id name alternate_name description url email status interpretation_services application_process wait_time fees accreditations licenses)\n   PHONE_HEADERS = %w(id location_id service_id organization_id contact_id service_at_location_id number extension type language description)\n+  ADDRESS_HEADERS = %w(id location_id organization_id attention address_1 city region state_province postal_code country)\n+   \n \n   attr_reader :organizations_path, :output_organizations_path, :locations_path, :output_locations_path,\n-              :services_path, :output_services_path, :mapping, :output_phones_path\n+              :services_path, :output_services_path, :mapping, :output_phones_path, :output_address_path",
        "path": "lib/open_referral_transformer.rb",
        "position": null,
        "original_position": 9,
        "commit_id": "452cf31ae15f751bc3e70c792349df09a2bc4d04",
        "original_commit_id": "0a429ea489b93a0801b203302b4b2cd0ed9f06a7",
        "user": {
            "login": "switzersc",
            "id": 3752314,
            "node_id": "MDQ6VXNlcjM3NTIzMTQ=",
            "avatar_url": "https://avatars1.githubusercontent.com/u/3752314?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/switzersc",
            "html_url": "https://github.com/switzersc",
            "followers_url": "https://api.github.com/users/switzersc/followers",
            "following_url": "https://api.github.com/users/switzersc/following{/other_user}",
            "gists_url": "https://api.github.com/users/switzersc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/switzersc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/switzersc/subscriptions",
            "organizations_url": "https://api.github.com/users/switzersc/orgs",
            "repos_url": "https://api.github.com/users/switzersc/repos",
            "events_url": "https://api.github.com/users/switzersc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/switzersc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "It would be more consistent to use `:output_addresses_path` (plural)",
        "created_at": "2019-02-23T19:58:33Z",
        "updated_at": "2019-02-23T20:07:16Z",
        "html_url": "https://github.com/openreferral/hsds-transformer/pull/16#discussion_r259591156",
        "pull_request_url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/16",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259591156"
            },
            "html": {
                "href": "https://github.com/openreferral/hsds-transformer/pull/16#discussion_r259591156"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/16"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259591166",
        "pull_request_review_id": 207122820,
        "id": 259591166,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTU5MTE2Ng==",
        "diff_hunk": "@@ -135,8 +146,22 @@ def collect_phone_data(phone_key:, phone_hash:, input:)\n     phone_data << phone_row\n   end\n \n+  def collect_address_data(address_key:, address_hash:, input:)\n+    puts \"Testing\"",
        "path": "lib/open_referral_transformer.rb",
        "position": null,
        "original_position": 61,
        "commit_id": "452cf31ae15f751bc3e70c792349df09a2bc4d04",
        "original_commit_id": "0a429ea489b93a0801b203302b4b2cd0ed9f06a7",
        "user": {
            "login": "switzersc",
            "id": 3752314,
            "node_id": "MDQ6VXNlcjM3NTIzMTQ=",
            "avatar_url": "https://avatars1.githubusercontent.com/u/3752314?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/switzersc",
            "html_url": "https://github.com/switzersc",
            "followers_url": "https://api.github.com/users/switzersc/followers",
            "following_url": "https://api.github.com/users/switzersc/following{/other_user}",
            "gists_url": "https://api.github.com/users/switzersc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/switzersc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/switzersc/subscriptions",
            "organizations_url": "https://api.github.com/users/switzersc/orgs",
            "repos_url": "https://api.github.com/users/switzersc/repos",
            "events_url": "https://api.github.com/users/switzersc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/switzersc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Can remove this now",
        "created_at": "2019-02-23T19:58:53Z",
        "updated_at": "2019-02-23T20:07:16Z",
        "html_url": "https://github.com/openreferral/hsds-transformer/pull/16#discussion_r259591166",
        "pull_request_url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/16",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259591166"
            },
            "html": {
                "href": "https://github.com/openreferral/hsds-transformer/pull/16#discussion_r259591166"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/16"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259591169",
        "pull_request_review_id": 207122820,
        "id": 259591169,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTU5MTE2OQ==",
        "diff_hunk": "@@ -135,8 +146,22 @@ def collect_phone_data(phone_key:, phone_hash:, input:)\n     phone_data << phone_row\n   end\n \n+  def collect_address_data(address_key:, address_hash:, input:)\n+    puts \"Testing\"\n+    key = address_hash[\"field\"]\n+    address_row = {}\n+    address_row[key] = input[address_key]\n+\n+    foreign_key = address_hash[\"foreign_key_name\"]\n+    foreign_key_value = address_hash[\"foreign_key_value\"]\n+    address_row[foreign_key] = input[foreign_key_value]\n+    address_data << address_row\n+  end\n+\n   def write_collected_nested_structures\n+    puts address_data",
        "path": "lib/open_referral_transformer.rb",
        "position": null,
        "original_position": 73,
        "commit_id": "452cf31ae15f751bc3e70c792349df09a2bc4d04",
        "original_commit_id": "0a429ea489b93a0801b203302b4b2cd0ed9f06a7",
        "user": {
            "login": "switzersc",
            "id": 3752314,
            "node_id": "MDQ6VXNlcjM3NTIzMTQ=",
            "avatar_url": "https://avatars1.githubusercontent.com/u/3752314?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/switzersc",
            "html_url": "https://github.com/switzersc",
            "followers_url": "https://api.github.com/users/switzersc/followers",
            "following_url": "https://api.github.com/users/switzersc/following{/other_user}",
            "gists_url": "https://api.github.com/users/switzersc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/switzersc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/switzersc/subscriptions",
            "organizations_url": "https://api.github.com/users/switzersc/orgs",
            "repos_url": "https://api.github.com/users/switzersc/repos",
            "events_url": "https://api.github.com/users/switzersc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/switzersc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "can also remove this",
        "created_at": "2019-02-23T19:59:00Z",
        "updated_at": "2019-02-23T20:07:16Z",
        "html_url": "https://github.com/openreferral/hsds-transformer/pull/16#discussion_r259591169",
        "pull_request_url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/16",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259591169"
            },
            "html": {
                "href": "https://github.com/openreferral/hsds-transformer/pull/16#discussion_r259591169"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/16"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259600844",
        "pull_request_review_id": 207133185,
        "id": 259600844,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTYwMDg0NA==",
        "diff_hunk": "@@ -8,6 +8,12 @@ class OpenReferralTransformer\n   LOCATION_HEADERS = %w(id organization_id name alternate_name description transportation latitude longitude)\n   SERVICE_HEADERS = %w(id organization_id program_id name alternate_name description url email status interpretation_services application_process wait_time fees accreditations licenses)\n   PHONE_HEADERS = %w(id location_id service_id organization_id contact_id service_at_location_id number extension type language description)\n+<<<<<<< Updated upstream\n+  OUTPUT_DIRECTORY_PATH = \"#{ENV[\"ROOT_PATH\"]}/tmp\"\n+=======\n+  ADDRESS_HEADERS = %w(id location_id organization_id attention address_1 city region state_province postal_code country)\n+  OUTPUT_DEFAULT_DIR = \"#{ENV[\"ROOT_PATH\"]}/tmp\"\n+>>>>>>> Stashed changes",
        "path": "lib/open_referral_transformer.rb",
        "position": null,
        "original_position": 9,
        "commit_id": "4c41cb219c4bf1070e4cc987d9a87ceffa5f1a78",
        "original_commit_id": "c03a169133360b35884afded957c7c943437b994",
        "user": {
            "login": "switzersc",
            "id": 3752314,
            "node_id": "MDQ6VXNlcjM3NTIzMTQ=",
            "avatar_url": "https://avatars1.githubusercontent.com/u/3752314?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/switzersc",
            "html_url": "https://github.com/switzersc",
            "followers_url": "https://api.github.com/users/switzersc/followers",
            "following_url": "https://api.github.com/users/switzersc/following{/other_user}",
            "gists_url": "https://api.github.com/users/switzersc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/switzersc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/switzersc/subscriptions",
            "organizations_url": "https://api.github.com/users/switzersc/orgs",
            "repos_url": "https://api.github.com/users/switzersc/repos",
            "events_url": "https://api.github.com/users/switzersc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/switzersc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "gotta fix the merge conflict! \ud83d\ude04 ",
        "created_at": "2019-02-24T02:40:23Z",
        "updated_at": "2019-02-24T03:17:31Z",
        "html_url": "https://github.com/openreferral/hsds-transformer/pull/19#discussion_r259600844",
        "pull_request_url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/19",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259600844"
            },
            "html": {
                "href": "https://github.com/openreferral/hsds-transformer/pull/19#discussion_r259600844"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/19"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259600857",
        "pull_request_review_id": 207133185,
        "id": 259600857,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTYwMDg1Nw==",
        "diff_hunk": "@@ -23,12 +29,22 @@ def initialize(args)\n     @organizations_path = args[:organizations]\n     @locations_path = args[:locations]\n     @services_path = args[:services]\n-    @output_organizations_path = \"#{ENV[\"ROOT_PATH\"]}/tmp/organizations.csv\"\n-    @output_locations_path = \"#{ENV[\"ROOT_PATH\"]}/tmp/locations.csv\"\n-    @output_services_path = \"#{ENV[\"ROOT_PATH\"]}/tmp/services.csv\"\n-    @output_phones_path = \"#{ENV[\"ROOT_PATH\"]}/tmp/phones.csv\"\n-\n+    @output_dir = args[:output_dir]",
        "path": "lib/open_referral_transformer.rb",
        "position": null,
        "original_position": 22,
        "commit_id": "4c41cb219c4bf1070e4cc987d9a87ceffa5f1a78",
        "original_commit_id": "c03a169133360b35884afded957c7c943437b994",
        "user": {
            "login": "switzersc",
            "id": 3752314,
            "node_id": "MDQ6VXNlcjM3NTIzMTQ=",
            "avatar_url": "https://avatars1.githubusercontent.com/u/3752314?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/switzersc",
            "html_url": "https://github.com/switzersc",
            "followers_url": "https://api.github.com/users/switzersc/followers",
            "following_url": "https://api.github.com/users/switzersc/following{/other_user}",
            "gists_url": "https://api.github.com/users/switzersc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/switzersc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/switzersc/subscriptions",
            "organizations_url": "https://api.github.com/users/switzersc/orgs",
            "repos_url": "https://api.github.com/users/switzersc/repos",
            "events_url": "https://api.github.com/users/switzersc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/switzersc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "I would change this to be:\r\n\r\n`@output_dir = args[:output_dir] || OUTPUT_DIRECTORY_PATH`\r\n\r\nso that if the user doesn't provide an `output_dir` argument, the instance variable will still be set with the default.",
        "created_at": "2019-02-24T02:41:29Z",
        "updated_at": "2019-02-24T03:17:31Z",
        "html_url": "https://github.com/openreferral/hsds-transformer/pull/19#discussion_r259600857",
        "pull_request_url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/19",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259600857"
            },
            "html": {
                "href": "https://github.com/openreferral/hsds-transformer/pull/19#discussion_r259600857"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/19"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259600859",
        "pull_request_review_id": 207133185,
        "id": 259600859,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTYwMDg1OQ==",
        "diff_hunk": "@@ -23,12 +29,22 @@ def initialize(args)\n     @organizations_path = args[:organizations]\n     @locations_path = args[:locations]\n     @services_path = args[:services]\n-    @output_organizations_path = \"#{ENV[\"ROOT_PATH\"]}/tmp/organizations.csv\"\n-    @output_locations_path = \"#{ENV[\"ROOT_PATH\"]}/tmp/locations.csv\"\n-    @output_services_path = \"#{ENV[\"ROOT_PATH\"]}/tmp/services.csv\"\n-    @output_phones_path = \"#{ENV[\"ROOT_PATH\"]}/tmp/phones.csv\"\n-\n+    @output_dir = args[:output_dir]\n+    @output_organizations_path = @output_dir + \"/organizations.csv\"\n+<<<<<<< Updated upstream\n+    @output_locations_path = @output_dir + \"/locations.csv\"\n+    @output_services_path = @output_dir + \"/services.csv\"\n+    @output_phones_path = @output_dir + \"/phones.csv\"\n+    @phone_data = []\n+=======\n+    @output_locations_path =  @output_dir + \"/locations.csv\"\n+    @output_services_path =  @output_dir + \"/services.csv\"\n+    @output_phones_path =  @output_dir + \"/phones.csv\"\n     @phone_data = []\n+    @output_addresses_path = \"#{ENV[\"ROOT_PATH\"]}/tmp/addresses.csv\"\n+    @address_data = []\n+    \n+>>>>>>> Stashed changes",
        "path": "lib/open_referral_transformer.rb",
        "position": null,
        "original_position": 37,
        "commit_id": "4c41cb219c4bf1070e4cc987d9a87ceffa5f1a78",
        "original_commit_id": "c03a169133360b35884afded957c7c943437b994",
        "user": {
            "login": "switzersc",
            "id": 3752314,
            "node_id": "MDQ6VXNlcjM3NTIzMTQ=",
            "avatar_url": "https://avatars1.githubusercontent.com/u/3752314?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/switzersc",
            "html_url": "https://github.com/switzersc",
            "followers_url": "https://api.github.com/users/switzersc/followers",
            "following_url": "https://api.github.com/users/switzersc/following{/other_user}",
            "gists_url": "https://api.github.com/users/switzersc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/switzersc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/switzersc/subscriptions",
            "organizations_url": "https://api.github.com/users/switzersc/orgs",
            "repos_url": "https://api.github.com/users/switzersc/repos",
            "events_url": "https://api.github.com/users/switzersc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/switzersc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "merge conflicts! \ud83d\ude40 ",
        "created_at": "2019-02-24T02:41:42Z",
        "updated_at": "2019-02-24T03:17:31Z",
        "html_url": "https://github.com/openreferral/hsds-transformer/pull/19#discussion_r259600859",
        "pull_request_url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/19",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259600859"
            },
            "html": {
                "href": "https://github.com/openreferral/hsds-transformer/pull/19#discussion_r259600859"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/19"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259601043",
        "pull_request_review_id": 207133401,
        "id": 259601043,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTYwMTA0Mw==",
        "diff_hunk": "@@ -94,6 +97,23 @@ def transform_locations\n           collect_phone_data(phone_key: k, phone_hash: v, input: input)\n         elsif v[\"model\"] == \"postal_address\"\n           collect_address_data(address_key: k, address_hash: v, input: input)\n+        elsif v[\"model\"] == \"regular_schedule\"\n+          if input[\"Hours of operation\"] != nil",
        "path": "lib/open_referral_transformer.rb",
        "position": null,
        "original_position": 34,
        "commit_id": "c9974b43f2c079e8dcbbd90abbd410f8c52fda05",
        "original_commit_id": "079ac0e00d750fb679661a04599f986e07c4e0e9",
        "user": {
            "login": "switzersc",
            "id": 3752314,
            "node_id": "MDQ6VXNlcjM3NTIzMTQ=",
            "avatar_url": "https://avatars1.githubusercontent.com/u/3752314?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/switzersc",
            "html_url": "https://github.com/switzersc",
            "followers_url": "https://api.github.com/users/switzersc/followers",
            "following_url": "https://api.github.com/users/switzersc/following{/other_user}",
            "gists_url": "https://api.github.com/users/switzersc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/switzersc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/switzersc/subscriptions",
            "organizations_url": "https://api.github.com/users/switzersc/orgs",
            "repos_url": "https://api.github.com/users/switzersc/repos",
            "events_url": "https://api.github.com/users/switzersc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/switzersc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "In Ruby, you don't need the `!= nil` -- you can just do: `if input[\"Hours of operation\"]`. Presence (opposite of `nil`) evaluates to `true` \ud83d\ude38 ",
        "created_at": "2019-02-24T02:53:20Z",
        "updated_at": "2019-02-24T05:50:33Z",
        "html_url": "https://github.com/openreferral/hsds-transformer/pull/22#discussion_r259601043",
        "pull_request_url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/22",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259601043"
            },
            "html": {
                "href": "https://github.com/openreferral/hsds-transformer/pull/22#discussion_r259601043"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/22"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259601182",
        "pull_request_review_id": 207133401,
        "id": 259601182,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTYwMTE4Mg==",
        "diff_hunk": "@@ -94,6 +97,23 @@ def transform_locations\n           collect_phone_data(phone_key: k, phone_hash: v, input: input)\n         elsif v[\"model\"] == \"postal_address\"\n           collect_address_data(address_key: k, address_hash: v, input: input)\n+        elsif v[\"model\"] == \"regular_schedule\"\n+          if input[\"Hours of operation\"] != nil\n+            regex_list = input[\"Hours of operation\"].scan(/\\S*day: \\S*/)\n+            for regex in regex_list do\n+              day = regex.split(': ')[0]\n+              hours = regex.split(': ')[1]\n+              if hours == \"Closed\"\n+                opens_at = nil\n+                closes_at = nil\n+              else\n+                opens_at = hours.split('-')[0]\n+                closes_at = hours.split('-')[1]\n+              end\n+              collect_schedule_data(schedule_key: k, schedule_hash: v, input: input,\n+                  day: day, opens_at: opens_at, closes_at: closes_at)\n+            end\n+          end",
        "path": "lib/open_referral_transformer.rb",
        "position": null,
        "original_position": 49,
        "commit_id": "c9974b43f2c079e8dcbbd90abbd410f8c52fda05",
        "original_commit_id": "079ac0e00d750fb679661a04599f986e07c4e0e9",
        "user": {
            "login": "switzersc",
            "id": 3752314,
            "node_id": "MDQ6VXNlcjM3NTIzMTQ=",
            "avatar_url": "https://avatars1.githubusercontent.com/u/3752314?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/switzersc",
            "html_url": "https://github.com/switzersc",
            "followers_url": "https://api.github.com/users/switzersc/followers",
            "following_url": "https://api.github.com/users/switzersc/following{/other_user}",
            "gists_url": "https://api.github.com/users/switzersc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/switzersc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/switzersc/subscriptions",
            "organizations_url": "https://api.github.com/users/switzersc/orgs",
            "repos_url": "https://api.github.com/users/switzersc/repos",
            "events_url": "https://api.github.com/users/switzersc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/switzersc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Let's go ahead and pull lines 101-116 in its own method to make this `transform` method more readable. You could call it `process_regular_schedule_text`",
        "created_at": "2019-02-24T02:57:50Z",
        "updated_at": "2019-02-24T05:50:33Z",
        "html_url": "https://github.com/openreferral/hsds-transformer/pull/22#discussion_r259601182",
        "pull_request_url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/22",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259601182"
            },
            "html": {
                "href": "https://github.com/openreferral/hsds-transformer/pull/22#discussion_r259601182"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/22"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259601186",
        "pull_request_review_id": 207133401,
        "id": 259601186,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTYwMTE4Ng==",
        "diff_hunk": "@@ -157,9 +177,26 @@ def collect_address_data(address_key:, address_hash:, input:)\n     address_data << address_row\n   end\n \n+  def collect_schedule_data(schedule_key:, schedule_hash:, input:,\n+      day:, opens_at:, closes_at:)\n+    # key = schedule_hash[\"field\"]",
        "path": "lib/open_referral_transformer.rb",
        "position": null,
        "original_position": 59,
        "commit_id": "c9974b43f2c079e8dcbbd90abbd410f8c52fda05",
        "original_commit_id": "079ac0e00d750fb679661a04599f986e07c4e0e9",
        "user": {
            "login": "switzersc",
            "id": 3752314,
            "node_id": "MDQ6VXNlcjM3NTIzMTQ=",
            "avatar_url": "https://avatars1.githubusercontent.com/u/3752314?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/switzersc",
            "html_url": "https://github.com/switzersc",
            "followers_url": "https://api.github.com/users/switzersc/followers",
            "following_url": "https://api.github.com/users/switzersc/following{/other_user}",
            "gists_url": "https://api.github.com/users/switzersc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/switzersc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/switzersc/subscriptions",
            "organizations_url": "https://api.github.com/users/switzersc/orgs",
            "repos_url": "https://api.github.com/users/switzersc/repos",
            "events_url": "https://api.github.com/users/switzersc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/switzersc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Can remove this comment line",
        "created_at": "2019-02-24T02:58:01Z",
        "updated_at": "2019-02-24T05:50:33Z",
        "html_url": "https://github.com/openreferral/hsds-transformer/pull/22#discussion_r259601186",
        "pull_request_url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/22",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259601186"
            },
            "html": {
                "href": "https://github.com/openreferral/hsds-transformer/pull/22#discussion_r259601186"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/22"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259601192",
        "pull_request_review_id": 207133401,
        "id": 259601192,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTYwMTE5Mg==",
        "diff_hunk": "@@ -157,9 +177,26 @@ def collect_address_data(address_key:, address_hash:, input:)\n     address_data << address_row\n   end\n \n+  def collect_schedule_data(schedule_key:, schedule_hash:, input:,\n+      day:, opens_at:, closes_at:)\n+    # key = schedule_hash[\"field\"]\n+    schedule_row = {}\n+    # schedule_row[key] = input[schedule_key]",
        "path": "lib/open_referral_transformer.rb",
        "position": null,
        "original_position": 61,
        "commit_id": "c9974b43f2c079e8dcbbd90abbd410f8c52fda05",
        "original_commit_id": "079ac0e00d750fb679661a04599f986e07c4e0e9",
        "user": {
            "login": "switzersc",
            "id": 3752314,
            "node_id": "MDQ6VXNlcjM3NTIzMTQ=",
            "avatar_url": "https://avatars1.githubusercontent.com/u/3752314?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/switzersc",
            "html_url": "https://github.com/switzersc",
            "followers_url": "https://api.github.com/users/switzersc/followers",
            "following_url": "https://api.github.com/users/switzersc/following{/other_user}",
            "gists_url": "https://api.github.com/users/switzersc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/switzersc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/switzersc/subscriptions",
            "organizations_url": "https://api.github.com/users/switzersc/orgs",
            "repos_url": "https://api.github.com/users/switzersc/repos",
            "events_url": "https://api.github.com/users/switzersc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/switzersc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Can remove this comment line",
        "created_at": "2019-02-24T02:58:04Z",
        "updated_at": "2019-02-24T05:50:33Z",
        "html_url": "https://github.com/openreferral/hsds-transformer/pull/22#discussion_r259601192",
        "pull_request_url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/22",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259601192"
            },
            "html": {
                "href": "https://github.com/openreferral/hsds-transformer/pull/22#discussion_r259601192"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/22"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259624896",
        "pull_request_review_id": 207156144,
        "id": 259624896,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTYyNDg5Ng==",
        "diff_hunk": "@@ -0,0 +1,521 @@\n+id,service_id,location_id,description\n+,135836,135831,\n+,132741,132736,\n+,108216,131331,\n+,129441,129431,\n+,,129426,\n+,129071,129066,\n+,127461,127456,\n+,127216,127211,\n+,127206,127201,\n+,127186,127181,\n+,127176,127171,\n+,127166,127161,\n+,127156,127151,\n+,127061,127056,\n+,127051,127046,\n+,,125091,\n+,124276,124271,\n+,122701,122696,\n+,120306,120291,\n+,120061,120051,\n+,116931,116926,\n+,,116846,\n+,115961,115956,\n+,113196,113191,\n+,,111926,\n+,,111816,\n+,,111236,\n+,110956,110951,\n+,110896,110891,\n+,,107056,\n+,107096,107051,\n+,106706,106701,\n+,105921,105911,\n+,\"97546,Unnamed record\",97541,\n+,,95461,\n+,95456,95451,\n+,,93656,\n+,91721,91716,\n+,91706,91701,\n+,91691,91686,\n+,91696,91681,\n+,91051,91046,\n+,,90821,\n+,,90816,\n+,,90811,\n+,90536,90531,\n+,91326,90261,\n+,89636,89631,\n+,\"89016,89006\",88961,\n+,88501,88496,\n+,86836,86811,\n+,,85656,\n+,90346,76556,\n+,64196,64191,\n+,64186,64181,\n+,64176,63851,\n+,63846,63841,\n+,63516,63511,\n+,54736,54731,\n+,54726,54721,\n+,54716,54711,\n+,54696,54691,\n+,54681,54671,\n+,54341,54331,\n+,53951,53946,\n+,52971,52966,\n+,51961,51956,\n+,51936,51931,\n+,51906,51901,\n+,51871,51866,\n+,51846,51841,\n+,51821,51816,\n+,,51806,\n+,51751,51746,\n+,51731,51726,\n+,51716,51711,\n+,51706,51696,\n+,51671,51666,\n+,51616,51606,\n+,51536,51531,\n+,51511,51506,\n+,51501,51496,\n+,51491,51486,\n+,51466,51461,\n+,51451,51446,\n+,51456,51436,\n+,51416,51406,\n+,51401,51396,\n+,51371,51366,\n+,51341,51336,\n+,51331,51326,\n+,51291,51286,\n+,51271,51266,\n+,51251,51246,\n+,51236,51231,\n+,51196,51191,\n+,51181,51171,\n+,51156,51146,\n+,,50811,\n+,50616,50556,\n+,49931,49926,\n+,49916,49911,\n+,49901,49896,\n+,49891,49886,\n+,49881,49876,\n+,49871,49866,\n+,49861,49846,\n+,49816,49796,\n+,49771,49751,\n+,49741,49736,\n+,49726,49721,\n+,49646,49641,\n+,49636,49631,\n+,49626,49606,\n+,49591,49586,\n+,49411,49406,\n+,49416,49401,\n+,49391,49386,\n+,49381,49376,\n+,49371,49366,\n+,49361,49356,\n+,49351,49346,\n+,49336,49331,\n+,49326,49321,\n+,38446,38441,\n+,38396,38381,\n+,37816,37801,\n+,,37756,\n+,37366,37361,\n+,37356,37351,\n+,37346,37341,\n+,37281,37276,\n+,37271,37266,\n+,36856,36841,\n+,36796,36786,\n+,36776,36771,\n+,36751,36746,\n+,36721,36716,\n+,36706,36701,\n+,36691,36686,\n+,60891,36646,\n+,36636,36621,\n+,36551,36546,\n+,36536,36531,\n+,36516,36511,\n+,36506,36501,\n+,36451,36446,\n+,36436,36431,\n+,36416,36406,\n+,36181,36171,\n+,36176,36166,\n+,36161,36156,\n+,36151,36146,\n+,36141,36136,\n+,29821,36126,\n+,36116,36111,\n+,,35981,\n+,34991,34986,\n+,34976,34971,\n+,34961,34956,\n+,34926,34921,\n+,33921,33846,\n+,33871,32771,\n+,61871,32766,\n+,31751,31406,\n+,31741,31396,\n+,30246,30241,\n+,30301,30051,\n+,30046,30041,\n+,30031,30026,\n+,30016,30011,\n+,30006,30001,\n+,29991,29986,\n+,29976,29971,\n+,29966,29956,\n+,29941,29936,\n+,29906,29891,\n+,,29501,\n+,\"30116,30111,30106,29566,29561\",29391,\n+,29126,29116,\n+,28871,28866,\n+,28721,28716,\n+,\"86921,28501,28496\",28481,\n+,32166,27801,\n+,49396,27806,\n+,,27811,\n+,,27816,\n+,,27821,\n+,,27826,\n+,51596,27551,\n+,29701,27561,\n+,,27566,\n+,51646,27571,\n+,,27576,\n+,,27581,\n+,,27586,\n+,,27591,\n+,,27596,\n+,51661,27601,\n+,,27606,\n+,,27611,\n+,68066,27616,\n+,51081,27621,\n+,50661,27626,\n+,50631,27631,\n+,,27636,\n+,,27641,\n+,33881,27646,\n+,,27651,\n+,,27656,\n+,\"50346,50316,50156\",27671,\n+,,27681,\n+,,27686,\n+,,27691,\n+,,27696,\n+,,27701,\n+,,27706,\n+,36566,27711,\n+,,27716,\n+,,27721,\n+,\"94711,94706\",27726,\n+,50456,27731,\n+,,27736,\n+,,27741,\n+,49941,27746,\n+,49936,27751,\n+,33876,27756,\n+,36556,27761,\n+,,27766,\n+,67401,27771,\n+,49921,27776,\n+,49906,27781,\n+,68056,27786,\n+,36526,27791,\n+,61876,27796,\n+,51361,27301,\n+,51421,27306,\n+,51426,27311,\n+,36541,27316,\n+,34966,27321,\n+,,27326,\n+,,27331,\n+,,27336,\n+,34981,27341,\n+,51431,27346,\n+,51476,27351,\n+,,27356,\n+,,27361,\n+,\"101146,100171,31706,31686,31631,29511\",27366,\n+,,27371,\n+,,27376,\n+,68076,27381,\n+,,27386,\n+,68086,27391,\n+,,27396,\n+,,27401,\n+,,27406,\n+,,27411,\n+,51516,27416,\n+,,27421,\n+,,27426,\n+,,27431,\n+,68071,27436,\n+,51521,27441,\n+,51526,27446,\n+,,27451,\n+,51721,27456,\n+,36371,27461,\n+,51546,27466,\n+,,27476,\n+,,27481,\n+,84526,27486,\n+,,27491,\n+,,27496,\n+,51551,27501,\n+,51556,27506,\n+,,27511,\n+,51561,27516,\n+,,27521,\n+,,27526,\n+,51576,27531,\n+,51586,27536,\n+,,27546,\n+,,27051,\n+,93286,27056,\n+,,27061,\n+,,27066,\n+,68081,27071,\n+,,27081,\n+,,27086,\n+,50781,27091,\n+,51136,27096,\n+,50861,27101,\n+,\"32796,30066,30061,30056,30036,30021,29926,29866,29856,29801,29791\",27106,\n+,68096,27111,\n+,50931,27116,\n+,50981,27131,\n+,,27136,\n+,,27141,\n+,,27151,\n+,51036,27156,\n+,\"83176,83171\",27161,\n+,92921,27166,\n+,,27171,\n+,51226,27176,\n+,,27181,\n+,\"99161,28856,28851,28846,28841,28836,28831,28776\",27186,\n+,,27191,\n+,68091,27196,\n+,,27201,\n+,51241,27206,\n+,,27211,\n+,51281,27216,\n+,,27221,\n+,,27226,\n+,,27231,\n+,,27236,\n+,,27241,\n+,,27246,\n+,,27251,\n+,51301,27256,\n+,51306,27261,\n+,51316,27266,\n+,,27271,\n+,51321,27276,\n+,,27281,\n+,51346,27286,\n+,51351,27291,\n+,51356,27296,\n+,36426,26801,\n+,,26806,\n+,36441,26811,\n+,36346,26816,\n+,36376,26821,\n+,36571,26826,\n+,,26831,\n+,,26836,\n+,,26841,\n+,,26846,\n+,36351,26851,\n+,36356,26856,\n+,,26861,\n+,36361,26866,\n+,,26871,\n+,,26876,\n+,37711,26881,\n+,37736,26886,\n+,,26891,\n+,,26896,\n+,,26901,\n+,,26906,\n+,,26911,\n+,,26916,\n+,,26921,\n+,,26926,\n+,,26931,\n+,,26936,\n+,,26946,\n+,,26956,\n+,76936,26961,\n+,,26966,\n+,,26971,\n+,,26976,\n+,,26981,\n+,,26986,\n+,,26991,\n+,38291,26996,\n+,77271,27001,\n+,50206,27011,\n+,50226,27016,\n+,50241,27021,\n+,,27026,\n+,,27031,\n+,,27036,\n+,,27041,\n+,50281,27046,\n+,,26551,\n+,,26556,\n+,34951,26561,\n+,,26566,\n+,,26571,\n+,,26576,\n+,36006,26581,\n+,36096,26586,\n+,36186,26596,\n+,111176,26601,\n+,,26606,\n+,,26611,\n+,68426,26616,\n+,,26621,\n+,,26626,\n+,,26631,\n+,36421,26636,\n+,36711,26641,\n+,,26646,\n+,,26651,\n+,,26656,\n+,36731,26661,\n+,,26666,\n+,36341,26671,\n+,,26676,\n+,,26681,\n+,\"32201,32191,32186\",26686,\n+,,26691,\n+,37261,26696,\n+,,26701,\n+,\"37651,37636\",26706,\n+,68101,26711,\n+,,26716,\n+,37291,26721,\n+,37316,26726,\n+,,26731,\n+,37321,26736,\n+,,26741,\n+,,26746,\n+,\"101806,53301,53296\",26751,\n+,86981,26756,\n+,\"49961,49956,49951,49946\",26761,\n+,,26766,\n+,,26771,\n+,,26776,\n+,37331,26781,\n+,,26786,\n+,93946,26791,\n+,37336,26796,\n+,,26301,\n+,,26306,\n+,,26311,\n+,,26321,\n+,,26326,\n+,29416,26331,\n+,34901,26336,\n+,,26341,\n+,29421,26346,\n+,,26351,\n+,,26356,\n+,,26361,\n+,,26366,\n+,,26371,\n+,,26376,\n+,,26381,\n+,,26386,\n+,34916,26391,\n+,35071,26396,\n+,35081,26406,\n+,,26411,\n+,,26416,\n+,\"51911,36001\",26421,\n+,,26426,\n+,36326,26431,\n+,29201,26436,\n+,36331,26441,\n+,,26446,\n+,\"84361,84321\",26451,\n+,,26456,\n+,37111,26461,\n+,,26466,\n+,,26471,\n+,,26476,\n+,,26481,\n+,36336,26486,\n+,,26491,\n+,,26496,\n+,,26501,\n+,\"35076,35066,29436\",26506,\n+,,26511,\n+,\"91161,37436\",26516,\n+,\"38491,33851\",26521,\n+,,26526,\n+,\"49316,49311,49306,28706\",26531,\n+,,26536,\n+,,26541,\n+,,26546,\n+,\"30101,29631,29551,29546\",26206,\n+,\"30146,30141,30136\",26211,\n+,\"30211,30186,29601\",26216,\n+,\"30226,29611\",26221,\n+,\"30181,30176,29596,29591\",26226,\n+,\"30156,30151,29581\",26231,\n+,\"30131,30126,30121\",26236,\n+,\"30171,30166,29586\",26241,\n+,\"30256,30251,29556,29396\",26246,\n+,\"30236,30231,28806\",26251,\n+,\"51276,51261,51256,30096,30091,29541,29531\",26261,",
        "path": "tmp/service_at_location.csv",
        "position": 485,
        "original_position": 485,
        "commit_id": "d16dcd6502a1e8328a336fd6ad394f1c62b8a361",
        "original_commit_id": "d16dcd6502a1e8328a336fd6ad394f1c62b8a361",
        "user": {
            "login": "switzersc",
            "id": 3752314,
            "node_id": "MDQ6VXNlcjM3NTIzMTQ=",
            "avatar_url": "https://avatars1.githubusercontent.com/u/3752314?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/switzersc",
            "html_url": "https://github.com/switzersc",
            "followers_url": "https://api.github.com/users/switzersc/followers",
            "following_url": "https://api.github.com/users/switzersc/following{/other_user}",
            "gists_url": "https://api.github.com/users/switzersc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/switzersc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/switzersc/subscriptions",
            "organizations_url": "https://api.github.com/users/switzersc/orgs",
            "repos_url": "https://api.github.com/users/switzersc/repos",
            "events_url": "https://api.github.com/users/switzersc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/switzersc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "We should add a way to split these up into multiple rows in the future, but this works for now :)",
        "created_at": "2019-02-24T15:04:06Z",
        "updated_at": "2019-02-24T15:05:48Z",
        "html_url": "https://github.com/openreferral/hsds-transformer/pull/27#discussion_r259624896",
        "pull_request_url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/27",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259624896"
            },
            "html": {
                "href": "https://github.com/openreferral/hsds-transformer/pull/27#discussion_r259624896"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/27"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259589876",
        "pull_request_review_id": 207121525,
        "id": 259589876,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTU4OTg3Ng==",
        "diff_hunk": "@@ -152,4 +155,34 @@ def write_csv(path, headers, data)\n     end\n   end\n \n+  def validate(filename, type)\n+    filename = \"C:#{filename}\"\n+    puts filename\n+    file = File.new(filename, 'rb')",
        "path": "lib/open_referral_transformer.rb",
        "position": 41,
        "original_position": 42,
        "commit_id": "d87a5b9d86e6afd869dedb19ebde07b6d8e8ba5e",
        "original_commit_id": "f58da7ab073f01fdc6ededbedbbe69adb6334185",
        "user": {
            "login": "switzersc",
            "id": 3752314,
            "node_id": "MDQ6VXNlcjM3NTIzMTQ=",
            "avatar_url": "https://avatars1.githubusercontent.com/u/3752314?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/switzersc",
            "html_url": "https://github.com/switzersc",
            "followers_url": "https://api.github.com/users/switzersc/followers",
            "following_url": "https://api.github.com/users/switzersc/following{/other_user}",
            "gists_url": "https://api.github.com/users/switzersc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/switzersc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/switzersc/subscriptions",
            "organizations_url": "https://api.github.com/users/switzersc/orgs",
            "repos_url": "https://api.github.com/users/switzersc/repos",
            "events_url": "https://api.github.com/users/switzersc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/switzersc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Let's remove this `puts` now that we're not troubleshooting.",
        "created_at": "2019-02-23T19:19:10Z",
        "updated_at": "2019-02-24T16:05:40Z",
        "html_url": "https://github.com/openreferral/hsds-transformer/pull/15#discussion_r259589876",
        "pull_request_url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/15",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259589876"
            },
            "html": {
                "href": "https://github.com/openreferral/hsds-transformer/pull/15#discussion_r259589876"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/15"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259589883",
        "pull_request_review_id": 207121525,
        "id": 259589883,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTU4OTg4Mw==",
        "diff_hunk": "@@ -152,4 +155,34 @@ def write_csv(path, headers, data)\n     end\n   end\n \n+  def validate(filename, type)\n+    filename = \"C:#{filename}\"\n+    puts filename\n+    file = File.new(filename, 'rb')\n+    RestClient.post('http://localhost:1400/validate/csv',\n+      {\"file\" => file,\n+      \"type\" => type})\n+    return true\n+  rescue RestClient::BadRequest\n+    @valid = false\n+    return false\n+  end\n+\n+  def validate_output\n+    unless validate(output_organizations_path, \"organization\")\n+      puts \"Organization data not valid\"\n+    end\n+    unless res2 = validate(output_locations_path, \"location\")",
        "path": "lib/open_referral_transformer.rb",
        "position": null,
        "original_position": 56,
        "commit_id": "d87a5b9d86e6afd869dedb19ebde07b6d8e8ba5e",
        "original_commit_id": "f58da7ab073f01fdc6ededbedbbe69adb6334185",
        "user": {
            "login": "switzersc",
            "id": 3752314,
            "node_id": "MDQ6VXNlcjM3NTIzMTQ=",
            "avatar_url": "https://avatars1.githubusercontent.com/u/3752314?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/switzersc",
            "html_url": "https://github.com/switzersc",
            "followers_url": "https://api.github.com/users/switzersc/followers",
            "following_url": "https://api.github.com/users/switzersc/following{/other_user}",
            "gists_url": "https://api.github.com/users/switzersc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/switzersc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/switzersc/subscriptions",
            "organizations_url": "https://api.github.com/users/switzersc/orgs",
            "repos_url": "https://api.github.com/users/switzersc/repos",
            "events_url": "https://api.github.com/users/switzersc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/switzersc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Can remove `res2 = `",
        "created_at": "2019-02-23T19:19:22Z",
        "updated_at": "2019-02-24T16:05:40Z",
        "html_url": "https://github.com/openreferral/hsds-transformer/pull/15#discussion_r259589883",
        "pull_request_url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/15",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259589883"
            },
            "html": {
                "href": "https://github.com/openreferral/hsds-transformer/pull/15#discussion_r259589883"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/15"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259589890",
        "pull_request_review_id": 207121525,
        "id": 259589890,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTU4OTg5MA==",
        "diff_hunk": "@@ -152,4 +155,34 @@ def write_csv(path, headers, data)\n     end\n   end\n \n+  def validate(filename, type)\n+    filename = \"C:#{filename}\"\n+    puts filename\n+    file = File.new(filename, 'rb')\n+    RestClient.post('http://localhost:1400/validate/csv',\n+      {\"file\" => file,\n+      \"type\" => type})\n+    return true\n+  rescue RestClient::BadRequest\n+    @valid = false\n+    return false\n+  end\n+\n+  def validate_output\n+    unless validate(output_organizations_path, \"organization\")\n+      puts \"Organization data not valid\"\n+    end\n+    unless res2 = validate(output_locations_path, \"location\")\n+      puts \"Location data not valid\"\n+    end\n+    unless res3 = validate(output_services_path, \"service\")",
        "path": "lib/open_referral_transformer.rb",
        "position": null,
        "original_position": 59,
        "commit_id": "d87a5b9d86e6afd869dedb19ebde07b6d8e8ba5e",
        "original_commit_id": "f58da7ab073f01fdc6ededbedbbe69adb6334185",
        "user": {
            "login": "switzersc",
            "id": 3752314,
            "node_id": "MDQ6VXNlcjM3NTIzMTQ=",
            "avatar_url": "https://avatars1.githubusercontent.com/u/3752314?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/switzersc",
            "html_url": "https://github.com/switzersc",
            "followers_url": "https://api.github.com/users/switzersc/followers",
            "following_url": "https://api.github.com/users/switzersc/following{/other_user}",
            "gists_url": "https://api.github.com/users/switzersc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/switzersc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/switzersc/subscriptions",
            "organizations_url": "https://api.github.com/users/switzersc/orgs",
            "repos_url": "https://api.github.com/users/switzersc/repos",
            "events_url": "https://api.github.com/users/switzersc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/switzersc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Can remove `res3 = `",
        "created_at": "2019-02-23T19:19:31Z",
        "updated_at": "2019-02-24T16:05:40Z",
        "html_url": "https://github.com/openreferral/hsds-transformer/pull/15#discussion_r259589890",
        "pull_request_url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/15",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259589890"
            },
            "html": {
                "href": "https://github.com/openreferral/hsds-transformer/pull/15#discussion_r259589890"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/15"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259589902",
        "pull_request_review_id": 207121525,
        "id": 259589902,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTU4OTkwMg==",
        "diff_hunk": "@@ -152,4 +155,34 @@ def write_csv(path, headers, data)\n     end\n   end\n \n+  def validate(filename, type)\n+    filename = \"C:#{filename}\"\n+    puts filename\n+    file = File.new(filename, 'rb')\n+    RestClient.post('http://localhost:1400/validate/csv',\n+      {\"file\" => file,\n+      \"type\" => type})\n+    return true\n+  rescue RestClient::BadRequest\n+    @valid = false\n+    return false\n+  end\n+\n+  def validate_output\n+    unless validate(output_organizations_path, \"organization\")\n+      puts \"Organization data not valid\"\n+    end\n+    unless res2 = validate(output_locations_path, \"location\")\n+      puts \"Location data not valid\"\n+    end\n+    unless res3 = validate(output_services_path, \"service\")\n+      puts \"Service data not valid\"\n+    end\n+    unless res4 = validate(output_phones_path, \"phone\")",
        "path": "lib/open_referral_transformer.rb",
        "position": null,
        "original_position": 62,
        "commit_id": "d87a5b9d86e6afd869dedb19ebde07b6d8e8ba5e",
        "original_commit_id": "f58da7ab073f01fdc6ededbedbbe69adb6334185",
        "user": {
            "login": "switzersc",
            "id": 3752314,
            "node_id": "MDQ6VXNlcjM3NTIzMTQ=",
            "avatar_url": "https://avatars1.githubusercontent.com/u/3752314?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/switzersc",
            "html_url": "https://github.com/switzersc",
            "followers_url": "https://api.github.com/users/switzersc/followers",
            "following_url": "https://api.github.com/users/switzersc/following{/other_user}",
            "gists_url": "https://api.github.com/users/switzersc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/switzersc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/switzersc/subscriptions",
            "organizations_url": "https://api.github.com/users/switzersc/orgs",
            "repos_url": "https://api.github.com/users/switzersc/repos",
            "events_url": "https://api.github.com/users/switzersc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/switzersc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Can remove `res4 = `",
        "created_at": "2019-02-23T19:19:44Z",
        "updated_at": "2019-02-24T16:05:40Z",
        "html_url": "https://github.com/openreferral/hsds-transformer/pull/15#discussion_r259589902",
        "pull_request_url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/15",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/259589902"
            },
            "html": {
                "href": "https://github.com/openreferral/hsds-transformer/pull/15#discussion_r259589902"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/15"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/366125093",
        "pull_request_review_id": 342258129,
        "id": 366125093,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjEyNTA5Mw==",
        "diff_hunk": "@@ -1,650 +0,0 @@\n-id,organization_id,program_id,name,alternate_name,description,url,email,status,interpretation_services,application_process,wait_time,fees,accreditations,licenses",
        "path": "spec/fixtures/base_transformer/output/valid_services.csv",
        "position": 1,
        "original_position": 1,
        "commit_id": "9bf7ff10bf3f8b949b2b3c0fa96532265af075fe",
        "original_commit_id": "9bf7ff10bf3f8b949b2b3c0fa96532265af075fe",
        "user": {
            "login": "switzersc",
            "id": 3752314,
            "node_id": "MDQ6VXNlcjM3NTIzMTQ=",
            "avatar_url": "https://avatars1.githubusercontent.com/u/3752314?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/switzersc",
            "html_url": "https://github.com/switzersc",
            "followers_url": "https://api.github.com/users/switzersc/followers",
            "following_url": "https://api.github.com/users/switzersc/following{/other_user}",
            "gists_url": "https://api.github.com/users/switzersc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/switzersc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/switzersc/subscriptions",
            "organizations_url": "https://api.github.com/users/switzersc/orgs",
            "repos_url": "https://api.github.com/users/switzersc/repos",
            "events_url": "https://api.github.com/users/switzersc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/switzersc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Deleting this because we don't use it as far as I can tell.",
        "created_at": "2020-01-14T02:20:16Z",
        "updated_at": "2020-01-14T02:20:16Z",
        "html_url": "https://github.com/openreferral/hsds-transformer/pull/48#discussion_r366125093",
        "pull_request_url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/48",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/366125093"
            },
            "html": {
                "href": "https://github.com/openreferral/hsds-transformer/pull/48#discussion_r366125093"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/48"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/366125302",
        "pull_request_review_id": 342258382,
        "id": 366125302,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjEyNTMwMg==",
        "diff_hunk": "@@ -0,0 +1 @@\n+{\"profile\":\"tabular-data-package\",\"resources\":[{\"format\":\"csv\",\"mediatype\":\"text/csv\",\"name\":\"regular_schedules\",\"path\":\"tmp/datapackage/data/regular_schedules.csv\",\"schema\":{\"fields\":[{\"name\":\"id\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"service_id\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"location_id\",\"type\":\"integer\",\"format\":\"default\"},{\"name\":\"service_at_location_id\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"weekday\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"opens_at\",\"type\":\"time\",\"format\":\"default\"},{\"name\":\"closes_at\",\"type\":\"time\",\"format\":\"default\"}],\"missingValues\":[\"\"]},\"profile\":\"tabular-data-resource\",\"encoding\":\"utf-8\"},{\"format\":\"csv\",\"mediatype\":\"text/csv\",\"name\":\"phones\",\"path\":\"tmp/datapackage/data/phones.csv\",\"schema\":{\"fields\":[{\"name\":\"id\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"location_id\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"service_id\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"organization_id\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"contact_id\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"service_at_location_id\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"number\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"extension\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"type\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"language\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"description\",\"type\":\"any\",\"format\":\"default\"}],\"missingValues\":[\"\"]},\"profile\":\"tabular-data-resource\",\"encoding\":\"utf-8\"},{\"format\":\"csv\",\"mediatype\":\"text/csv\",\"name\":\"eligibility\",\"path\":\"tmp/datapackage/data/eligibility.csv\",\"schema\":{\"fields\":[{\"name\":\"id\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"service_id\",\"type\":\"integer\",\"format\":\"default\"},{\"name\":\"eligibility\",\"type\":\"any\",\"format\":\"default\"}],\"missingValues\":[\"\"]},\"profile\":\"tabular-data-resource\",\"encoding\":\"utf-8\"},{\"format\":\"csv\",\"mediatype\":\"text/csv\",\"name\":\"postal_addresses\",\"path\":\"tmp/datapackage/data/postal_addresses.csv\",\"schema\":{\"fields\":[{\"name\":\"id\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"location_id\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"organization_id\",\"type\":\"integer\",\"format\":\"default\"},{\"name\":\"attention\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"address_1\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"city\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"region\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"state_province\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"postal_code\",\"type\":\"integer\",\"format\":\"default\"},{\"name\":\"country\",\"type\":\"any\",\"format\":\"default\"}],\"missingValues\":[\"\"]},\"profile\":\"tabular-data-resource\",\"encoding\":\"utf-8\"},{\"format\":\"csv\",\"mediatype\":\"text/csv\",\"name\":\"organizations\",\"path\":\"tmp/datapackage/data/organizations.csv\",\"schema\":{\"fields\":[{\"name\":\"id\",\"type\":\"integer\",\"format\":\"default\"},{\"name\":\"name\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"alternate_name\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"description\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"email\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"url\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"tax_status\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"tax_id\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"year_incorporated\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"legal_status\",\"type\":\"any\",\"format\":\"default\"}],\"missingValues\":[\"\"]},\"profile\":\"tabular-data-resource\",\"encoding\":\"utf-8\"},{\"format\":\"csv\",\"mediatype\":\"text/csv\",\"name\":\"services_at_location\",\"path\":\"tmp/datapackage/data/services_at_location.csv\",\"schema\":{\"fields\":[{\"name\":\"id\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"service_id\",\"type\":\"integer\",\"format\":\"default\"},{\"name\":\"location_id\",\"type\":\"integer\",\"format\":\"default\"},{\"name\":\"description\",\"type\":\"any\",\"format\":\"default\"}],\"missingValues\":[\"\"]},\"profile\":\"tabular-data-resource\",\"encoding\":\"utf-8\"},{\"format\":\"csv\",\"mediatype\":\"text/csv\",\"name\":\"locations\",\"path\":\"tmp/datapackage/data/locations.csv\",\"schema\":{\"fields\":[{\"name\":\"id\",\"type\":\"integer\",\"format\":\"default\"},{\"name\":\"organization_id\",\"type\":\"integer\",\"format\":\"default\"},{\"name\":\"name\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"alternate_name\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"description\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"transportation\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"latitude\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"longitude\",\"type\":\"any\",\"format\":\"default\"}],\"missingValues\":[\"\"]},\"profile\":\"tabular-data-resource\",\"encoding\":\"utf-8\"},{\"format\":\"csv\",\"mediatype\":\"text/csv\",\"name\":\"services\",\"path\":\"tmp/datapackage/data/services.csv\",\"schema\":{\"fields\":[{\"name\":\"id\",\"type\":\"integer\",\"format\":\"default\"},{\"name\":\"organization_id\",\"type\":\"integer\",\"format\":\"default\"},{\"name\":\"program_id\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"name\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"alternate_name\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"description\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"url\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"email\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"status\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"interpretation_services\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"application_process\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"wait_time\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"fees\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"accreditations\",\"type\":\"any\",\"format\":\"default\"},{\"name\":\"licenses\",\"type\":\"any\",\"format\":\"default\"}],\"missingValues\":[\"\"]},\"profile\":\"tabular-data-resource\",\"encoding\":\"utf-8\"}]}",
        "path": "spec/fixtures/base_transformer/output/datapackage.json",
        "position": 1,
        "original_position": 1,
        "commit_id": "9bf7ff10bf3f8b949b2b3c0fa96532265af075fe",
        "original_commit_id": "9bf7ff10bf3f8b949b2b3c0fa96532265af075fe",
        "user": {
            "login": "switzersc",
            "id": 3752314,
            "node_id": "MDQ6VXNlcjM3NTIzMTQ=",
            "avatar_url": "https://avatars1.githubusercontent.com/u/3752314?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/switzersc",
            "html_url": "https://github.com/switzersc",
            "followers_url": "https://api.github.com/users/switzersc/followers",
            "following_url": "https://api.github.com/users/switzersc/following{/other_user}",
            "gists_url": "https://api.github.com/users/switzersc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/switzersc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/switzersc/subscriptions",
            "organizations_url": "https://api.github.com/users/switzersc/orgs",
            "repos_url": "https://api.github.com/users/switzersc/repos",
            "events_url": "https://api.github.com/users/switzersc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/switzersc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Would like to pretty print this but didn't know how to get the tests to ignore whitespace when comparing this with the actual output file.",
        "created_at": "2020-01-14T02:21:20Z",
        "updated_at": "2020-01-14T02:21:20Z",
        "html_url": "https://github.com/openreferral/hsds-transformer/pull/48#discussion_r366125302",
        "pull_request_url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/48",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/366125302"
            },
            "html": {
                "href": "https://github.com/openreferral/hsds-transformer/pull/48#discussion_r366125302"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/48"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/366125596",
        "pull_request_review_id": 342258779,
        "id": 366125596,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjEyNTU5Ng==",
        "diff_hunk": "@@ -27,37 +27,56 @@\n       transformer.transform\n \n       output_phones = CSV.read transformer.output_phones_path\n-      phones_fixture = CSV.read \"#{ENV[\"ROOT_PATH\"]}/spec/fixtures/base_transformer/output/phones.csv\"\n+      phones_fixture = CSV.read \"#{ENV[\"ROOT_PATH\"]}/spec/fixtures/base_transformer/output/data/phones.csv\"\n       expect(output_phones).to eq(phones_fixture)\n \n       output_organizations = CSV.read transformer.output_organizations_path\n-      organizations_fixture = CSV.read \"#{ENV[\"ROOT_PATH\"]}/spec/fixtures/base_transformer/output/organizations.csv\"\n+      organizations_fixture = CSV.read \"#{ENV[\"ROOT_PATH\"]}/spec/fixtures/base_transformer/output/data/organizations.csv\"\n       expect(output_organizations).to eq(organizations_fixture)\n \n       output_locations = CSV.read transformer.output_locations_path\n-      locations_fixture = CSV.read \"#{ENV[\"ROOT_PATH\"]}/spec/fixtures/base_transformer/output/locations.csv\"\n+      locations_fixture = CSV.read \"#{ENV[\"ROOT_PATH\"]}/spec/fixtures/base_transformer/output/data/locations.csv\"\n       expect(output_locations).to eq(locations_fixture)\n \n       # TODO implement required fields\n       output_services = CSV.read transformer.output_services_path\n-      services_fixture = CSV.read \"#{ENV[\"ROOT_PATH\"]}/spec/fixtures/base_transformer/output/services.csv\"\n+      services_fixture = CSV.read \"#{ENV[\"ROOT_PATH\"]}/spec/fixtures/base_transformer/output/data/services.csv\"\n       expect(output_services).to eq(services_fixture)\n \n       output_postal_addresses = CSV.read transformer.output_postal_addresses_path\n-      postal_addresses_fixture = CSV.read \"#{ENV[\"ROOT_PATH\"]}/spec/fixtures/base_transformer/output/postal_addresses.csv\"\n+      postal_addresses_fixture = CSV.read \"#{ENV[\"ROOT_PATH\"]}/spec/fixtures/base_transformer/output/data/postal_addresses.csv\"\n       expect(output_postal_addresses).to eq(postal_addresses_fixture)\n \n       output_regular_schedules = CSV.read transformer.output_regular_schedules_path\n-      regular_schedules_fixture = CSV.read \"#{ENV[\"ROOT_PATH\"]}/spec/fixtures/base_transformer/output/regular_schedules.csv\"\n+      regular_schedules_fixture = CSV.read \"#{ENV[\"ROOT_PATH\"]}/spec/fixtures/base_transformer/output/data/regular_schedules.csv\"\n       expect(output_regular_schedules).to eq(regular_schedules_fixture)\n \n       output_services_at_location = CSV.read transformer.output_services_at_locations_path\n-      services_at_location_fixture = CSV.read \"#{ENV[\"ROOT_PATH\"]}/spec/fixtures/base_transformer/output/services_at_location.csv\"\n+      services_at_location_fixture = CSV.read \"#{ENV[\"ROOT_PATH\"]}/spec/fixtures/base_transformer/output/data/services_at_location.csv\"\n       expect(output_services_at_location).to eq(services_at_location_fixture)\n \n       output_eligibility = CSV.read transformer.output_eligibilities_path\n-      eligibility_fixture = CSV.read \"#{ENV[\"ROOT_PATH\"]}/spec/fixtures/base_transformer/output/eligibility.csv\"\n+      eligibility_fixture = CSV.read \"#{ENV[\"ROOT_PATH\"]}/spec/fixtures/base_transformer/output/data/eligibility.csv\"\n       expect(output_eligibility).to eq(eligibility_fixture)\n     end\n+\n+    it \"infers datapackage.json from input data when path is safe\" do\n+      input_path = \"#{ENV[\"ROOT_PATH\"]}/spec/fixtures/base_transformer/input/\"\n+      mapping_path = \"#{ENV[\"ROOT_PATH\"]}/spec/fixtures/base_transformer/mapping.yaml\"\n+      transformer = HsdsTransformer::BaseTransformer.new(\n+          input_path: input_path,\n+          mapping: mapping_path\n+      )\n+\n+      transformer.transform\n+\n+      output_datapackage_json = File.read transformer.output_datapackage_file_path\n+      datapackage_json_fixture = File.read \"#{ENV[\"ROOT_PATH\"]}/spec/fixtures/base_transformer/output/datapackage.json\"\n+      expect(output_datapackage_json).to eq(datapackage_json_fixture)\n+    end\n+\n+    xit \"uses default datapackage.json when path is unsafe\" do",
        "path": "spec/lib/hsds_transformer/base_transformer_spec.rb",
        "position": 69,
        "original_position": 69,
        "commit_id": "9bf7ff10bf3f8b949b2b3c0fa96532265af075fe",
        "original_commit_id": "9bf7ff10bf3f8b949b2b3c0fa96532265af075fe",
        "user": {
            "login": "switzersc",
            "id": 3752314,
            "node_id": "MDQ6VXNlcjM3NTIzMTQ=",
            "avatar_url": "https://avatars1.githubusercontent.com/u/3752314?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/switzersc",
            "html_url": "https://github.com/switzersc",
            "followers_url": "https://api.github.com/users/switzersc/followers",
            "following_url": "https://api.github.com/users/switzersc/following{/other_user}",
            "gists_url": "https://api.github.com/users/switzersc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/switzersc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/switzersc/subscriptions",
            "organizations_url": "https://api.github.com/users/switzersc/orgs",
            "repos_url": "https://api.github.com/users/switzersc/repos",
            "events_url": "https://api.github.com/users/switzersc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/switzersc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "TODO",
        "created_at": "2020-01-14T02:22:50Z",
        "updated_at": "2020-01-14T02:22:50Z",
        "html_url": "https://github.com/openreferral/hsds-transformer/pull/48#discussion_r366125596",
        "pull_request_url": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/48",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/comments/366125596"
            },
            "html": {
                "href": "https://github.com/openreferral/hsds-transformer/pull/48#discussion_r366125596"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/openreferral/hsds-transformer/pulls/48"
            }
        }
    }
]