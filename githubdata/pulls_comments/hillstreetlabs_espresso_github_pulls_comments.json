[
    {
        "url": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/comments/169564835",
        "pull_request_review_id": 98108547,
        "id": 169564835,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2OTU2NDgzNQ==",
        "diff_hunk": "@@ -12,6 +12,7 @@ program\n   .option(\"-w, --watch\", \"Watch tests\")\n   .option(\"-v, --verbose\", \"Verbose tests\")\n   .option(\"-f, --fun\", \"Fun tests\")\n+  .option(\"-p, --port [port]\", \"Port number to launch test RPC on\")",
        "path": "src/cli.js",
        "position": 4,
        "original_position": 4,
        "commit_id": "a00afb7181dd403cff9a7ea2ad8009f0a43503ef",
        "original_commit_id": "9bbdf7a5eaa5e66b68147bec364a6ed4e14069d5",
        "user": {
            "login": "pfletcherhill",
            "id": 1607180,
            "node_id": "MDQ6VXNlcjE2MDcxODA=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/1607180?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pfletcherhill",
            "html_url": "https://github.com/pfletcherhill",
            "followers_url": "https://api.github.com/users/pfletcherhill/followers",
            "following_url": "https://api.github.com/users/pfletcherhill/following{/other_user}",
            "gists_url": "https://api.github.com/users/pfletcherhill/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pfletcherhill/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pfletcherhill/subscriptions",
            "organizations_url": "https://api.github.com/users/pfletcherhill/orgs",
            "repos_url": "https://api.github.com/users/pfletcherhill/repos",
            "events_url": "https://api.github.com/users/pfletcherhill/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pfletcherhill/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "I think just `\"-p, --port\"` here",
        "created_at": "2018-02-21T08:39:47Z",
        "updated_at": "2018-02-21T19:12:02Z",
        "html_url": "https://github.com/hillstreetlabs/espresso/pull/39#discussion_r169564835",
        "pull_request_url": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/39",
        "author_association": "MEMBER",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/comments/169564835"
            },
            "html": {
                "href": "https://github.com/hillstreetlabs/espresso/pull/39#discussion_r169564835"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/39"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/comments/169565338",
        "pull_request_review_id": 98108547,
        "id": 169565338,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2OTU2NTMzOA==",
        "diff_hunk": "@@ -26,6 +26,7 @@ export default class Espresso {\n     this.reporter = options.reporter;\n     this.server = new Server();\n     this.mocha = new MochaParallel();\n+    this.port = options.port || 8545;",
        "path": "src/espresso.js",
        "position": null,
        "original_position": 4,
        "commit_id": "a00afb7181dd403cff9a7ea2ad8009f0a43503ef",
        "original_commit_id": "9bbdf7a5eaa5e66b68147bec364a6ed4e14069d5",
        "user": {
            "login": "pfletcherhill",
            "id": 1607180,
            "node_id": "MDQ6VXNlcjE2MDcxODA=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/1607180?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pfletcherhill",
            "html_url": "https://github.com/pfletcherhill",
            "followers_url": "https://api.github.com/users/pfletcherhill/followers",
            "following_url": "https://api.github.com/users/pfletcherhill/following{/other_user}",
            "gists_url": "https://api.github.com/users/pfletcherhill/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pfletcherhill/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pfletcherhill/subscriptions",
            "organizations_url": "https://api.github.com/users/pfletcherhill/orgs",
            "repos_url": "https://api.github.com/users/pfletcherhill/repos",
            "events_url": "https://api.github.com/users/pfletcherhill/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pfletcherhill/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Instead of storing this on the `Espresso` instance, can you store it on the `Server` instance? So pass it into the `Server` constructor.",
        "created_at": "2018-02-21T08:42:01Z",
        "updated_at": "2018-02-21T19:12:02Z",
        "html_url": "https://github.com/hillstreetlabs/espresso/pull/39#discussion_r169565338",
        "pull_request_url": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/39",
        "author_association": "MEMBER",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/comments/169565338"
            },
            "html": {
                "href": "https://github.com/hillstreetlabs/espresso/pull/39#discussion_r169565338"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/39"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/comments/169565613",
        "pull_request_review_id": 98108547,
        "id": 169565613,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2OTU2NTYxMw==",
        "diff_hunk": "@@ -102,7 +103,7 @@ export default class Espresso {\n   }\n \n   async run() {\n-    await this.server.start();\n+    await this.server.start(this.port);",
        "path": "src/espresso.js",
        "position": null,
        "original_position": 13,
        "commit_id": "a00afb7181dd403cff9a7ea2ad8009f0a43503ef",
        "original_commit_id": "9bbdf7a5eaa5e66b68147bec364a6ed4e14069d5",
        "user": {
            "login": "pfletcherhill",
            "id": 1607180,
            "node_id": "MDQ6VXNlcjE2MDcxODA=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/1607180?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pfletcherhill",
            "html_url": "https://github.com/pfletcherhill",
            "followers_url": "https://api.github.com/users/pfletcherhill/followers",
            "following_url": "https://api.github.com/users/pfletcherhill/following{/other_user}",
            "gists_url": "https://api.github.com/users/pfletcherhill/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pfletcherhill/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pfletcherhill/subscriptions",
            "organizations_url": "https://api.github.com/users/pfletcherhill/orgs",
            "repos_url": "https://api.github.com/users/pfletcherhill/repos",
            "events_url": "https://api.github.com/users/pfletcherhill/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pfletcherhill/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "And then instead of passing `this.port` here, the `Server` instance would already know what port to start on.",
        "created_at": "2018-02-21T08:42:51Z",
        "updated_at": "2018-02-21T19:12:02Z",
        "html_url": "https://github.com/hillstreetlabs/espresso/pull/39#discussion_r169565613",
        "pull_request_url": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/39",
        "author_association": "MEMBER",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/comments/169565613"
            },
            "html": {
                "href": "https://github.com/hillstreetlabs/espresso/pull/39#discussion_r169565613"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/39"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/comments/169566341",
        "pull_request_review_id": 98108547,
        "id": 169566341,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2OTU2NjM0MQ==",
        "diff_hunk": "@@ -11,12 +12,16 @@ export default class Server {\n     this.accounts = [];\n   }\n \n-  async start() {\n-    await this.ganache.listen(8545, (err, chain) => {\n-      if (err) {\n-        console.log(\"Error: \", err);\n-      }\n-    });\n+  async start(_port) {\n+    portfinder.basePort = _port;",
        "path": "src/server.js",
        "position": null,
        "original_position": 19,
        "commit_id": "a00afb7181dd403cff9a7ea2ad8009f0a43503ef",
        "original_commit_id": "9bbdf7a5eaa5e66b68147bec364a6ed4e14069d5",
        "user": {
            "login": "pfletcherhill",
            "id": 1607180,
            "node_id": "MDQ6VXNlcjE2MDcxODA=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/1607180?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pfletcherhill",
            "html_url": "https://github.com/pfletcherhill",
            "followers_url": "https://api.github.com/users/pfletcherhill/followers",
            "following_url": "https://api.github.com/users/pfletcherhill/following{/other_user}",
            "gists_url": "https://api.github.com/users/pfletcherhill/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pfletcherhill/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pfletcherhill/subscriptions",
            "organizations_url": "https://api.github.com/users/pfletcherhill/orgs",
            "repos_url": "https://api.github.com/users/pfletcherhill/repos",
            "events_url": "https://api.github.com/users/pfletcherhill/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pfletcherhill/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Can you store the port that the server ends up listening on in state as well? So both `server.startingPort` and `server.port` are accessible. Maybe refactor these lines into another method that sets the port?",
        "created_at": "2018-02-21T08:45:45Z",
        "updated_at": "2018-02-21T19:12:02Z",
        "html_url": "https://github.com/hillstreetlabs/espresso/pull/39#discussion_r169566341",
        "pull_request_url": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/39",
        "author_association": "MEMBER",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/comments/169566341"
            },
            "html": {
                "href": "https://github.com/hillstreetlabs/espresso/pull/39#discussion_r169566341"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/39"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/comments/169718173",
        "pull_request_review_id": 98290235,
        "id": 169718173,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2OTcxODE3Mw==",
        "diff_hunk": "@@ -12,6 +12,7 @@ program\n   .option(\"-w, --watch\", \"Watch tests\")\n   .option(\"-v, --verbose\", \"Verbose tests\")\n   .option(\"-f, --fun\", \"Fun tests\")\n+  .option(\"-p, --port [port]\", \"Port number to launch test RPC on\")",
        "path": "src/cli.js",
        "position": 4,
        "original_position": 4,
        "commit_id": "a00afb7181dd403cff9a7ea2ad8009f0a43503ef",
        "original_commit_id": "9bbdf7a5eaa5e66b68147bec364a6ed4e14069d5",
        "user": {
            "login": "mykelp",
            "id": 370218,
            "node_id": "MDQ6VXNlcjM3MDIxOA==",
            "avatar_url": "https://avatars0.githubusercontent.com/u/370218?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mykelp",
            "html_url": "https://github.com/mykelp",
            "followers_url": "https://api.github.com/users/mykelp/followers",
            "following_url": "https://api.github.com/users/mykelp/following{/other_user}",
            "gists_url": "https://api.github.com/users/mykelp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mykelp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mykelp/subscriptions",
            "organizations_url": "https://api.github.com/users/mykelp/orgs",
            "repos_url": "https://api.github.com/users/mykelp/repos",
            "events_url": "https://api.github.com/users/mykelp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mykelp/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "The `[port]` needs to be there to accept the passed in port number",
        "created_at": "2018-02-21T17:35:52Z",
        "updated_at": "2018-02-21T19:12:02Z",
        "html_url": "https://github.com/hillstreetlabs/espresso/pull/39#discussion_r169718173",
        "pull_request_url": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/39",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/comments/169718173"
            },
            "html": {
                "href": "https://github.com/hillstreetlabs/espresso/pull/39#discussion_r169718173"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/39"
            }
        },
        "in_reply_to_id": 169564835
    },
    {
        "url": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/comments/169718371",
        "pull_request_review_id": 98290473,
        "id": 169718371,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2OTcxODM3MQ==",
        "diff_hunk": "@@ -102,7 +103,7 @@ export default class Espresso {\n   }\n \n   async run() {\n-    await this.server.start();\n+    await this.server.start(this.port);",
        "path": "src/espresso.js",
        "position": null,
        "original_position": 13,
        "commit_id": "a00afb7181dd403cff9a7ea2ad8009f0a43503ef",
        "original_commit_id": "9bbdf7a5eaa5e66b68147bec364a6ed4e14069d5",
        "user": {
            "login": "mykelp",
            "id": 370218,
            "node_id": "MDQ6VXNlcjM3MDIxOA==",
            "avatar_url": "https://avatars0.githubusercontent.com/u/370218?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mykelp",
            "html_url": "https://github.com/mykelp",
            "followers_url": "https://api.github.com/users/mykelp/followers",
            "following_url": "https://api.github.com/users/mykelp/following{/other_user}",
            "gists_url": "https://api.github.com/users/mykelp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mykelp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mykelp/subscriptions",
            "organizations_url": "https://api.github.com/users/mykelp/orgs",
            "repos_url": "https://api.github.com/users/mykelp/repos",
            "events_url": "https://api.github.com/users/mykelp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mykelp/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Updated. Check out changes",
        "created_at": "2018-02-21T17:36:22Z",
        "updated_at": "2018-02-21T19:12:02Z",
        "html_url": "https://github.com/hillstreetlabs/espresso/pull/39#discussion_r169718371",
        "pull_request_url": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/39",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/comments/169718371"
            },
            "html": {
                "href": "https://github.com/hillstreetlabs/espresso/pull/39#discussion_r169718371"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/39"
            }
        },
        "in_reply_to_id": 169565613
    },
    {
        "url": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/comments/169745679",
        "pull_request_review_id": 98322395,
        "id": 169745679,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2OTc0NTY3OQ==",
        "diff_hunk": "@@ -1,22 +1,28 @@\n import Ganache from \"ganache-core\";\n import Web3 from \"web3\";\n import { Profiler, Contracts, Migrate } from \"./truffle/external\";\n+import portfinder from \"portfinder\";\n \n export default class Server {\n-  constructor() {\n+  constructor(options = {}) {\n     this.ganache = Ganache.server({\n       default_balance_ether: 1000\n     });\n     this.web3 = new Web3();\n     this.accounts = [];\n+    this.startingPort = options.port || 8545;",
        "path": "src/server.js",
        "position": null,
        "original_position": 14,
        "commit_id": "a00afb7181dd403cff9a7ea2ad8009f0a43503ef",
        "original_commit_id": "ccd93183dd447f9ff6c8b498cd31c82081fd1c3f",
        "user": {
            "login": "mertcelebi",
            "id": 2692053,
            "node_id": "MDQ6VXNlcjI2OTIwNTM=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/2692053?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mertcelebi",
            "html_url": "https://github.com/mertcelebi",
            "followers_url": "https://api.github.com/users/mertcelebi/followers",
            "following_url": "https://api.github.com/users/mertcelebi/following{/other_user}",
            "gists_url": "https://api.github.com/users/mertcelebi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mertcelebi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mertcelebi/subscriptions",
            "organizations_url": "https://api.github.com/users/mertcelebi/orgs",
            "repos_url": "https://api.github.com/users/mertcelebi/repos",
            "events_url": "https://api.github.com/users/mertcelebi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mertcelebi/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Is `this.startingPort` only used for the next line?",
        "created_at": "2018-02-21T19:09:30Z",
        "updated_at": "2018-02-21T19:12:02Z",
        "html_url": "https://github.com/hillstreetlabs/espresso/pull/39#discussion_r169745679",
        "pull_request_url": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/39",
        "author_association": "MEMBER",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/comments/169745679"
            },
            "html": {
                "href": "https://github.com/hillstreetlabs/espresso/pull/39#discussion_r169745679"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/39"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/comments/169746001",
        "pull_request_review_id": 98322806,
        "id": 169746001,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2OTc0NjAwMQ==",
        "diff_hunk": "@@ -1,22 +1,28 @@\n import Ganache from \"ganache-core\";\n import Web3 from \"web3\";\n import { Profiler, Contracts, Migrate } from \"./truffle/external\";\n+import portfinder from \"portfinder\";\n \n export default class Server {\n-  constructor() {\n+  constructor(options = {}) {\n     this.ganache = Ganache.server({\n       default_balance_ether: 1000\n     });\n     this.web3 = new Web3();\n     this.accounts = [];\n+    this.startingPort = options.port || 8545;",
        "path": "src/server.js",
        "position": null,
        "original_position": 14,
        "commit_id": "a00afb7181dd403cff9a7ea2ad8009f0a43503ef",
        "original_commit_id": "ccd93183dd447f9ff6c8b498cd31c82081fd1c3f",
        "user": {
            "login": "mykelp",
            "id": 370218,
            "node_id": "MDQ6VXNlcjM3MDIxOA==",
            "avatar_url": "https://avatars0.githubusercontent.com/u/370218?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mykelp",
            "html_url": "https://github.com/mykelp",
            "followers_url": "https://api.github.com/users/mykelp/followers",
            "following_url": "https://api.github.com/users/mykelp/following{/other_user}",
            "gists_url": "https://api.github.com/users/mykelp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mykelp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mykelp/subscriptions",
            "organizations_url": "https://api.github.com/users/mykelp/orgs",
            "repos_url": "https://api.github.com/users/mykelp/repos",
            "events_url": "https://api.github.com/users/mykelp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mykelp/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "I am removing it. Only had it because Paul had mentioned in one of the comments he wanted it.",
        "created_at": "2018-02-21T19:10:45Z",
        "updated_at": "2018-02-21T19:12:02Z",
        "html_url": "https://github.com/hillstreetlabs/espresso/pull/39#discussion_r169746001",
        "pull_request_url": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/39",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/comments/169746001"
            },
            "html": {
                "href": "https://github.com/hillstreetlabs/espresso/pull/39#discussion_r169746001"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/hillstreetlabs/espresso/pulls/39"
            }
        },
        "in_reply_to_id": 169745679
    }
]