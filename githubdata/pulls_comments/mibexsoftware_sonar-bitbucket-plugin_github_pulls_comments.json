[
    {
        "url": "https://api.github.com/repos/mibexsoftware/sonar-bitbucket-plugin/pulls/comments/150184936",
        "pull_request_review_id": 75698349,
        "id": 150184936,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MDE4NDkzNg==",
        "diff_hunk": "@@ -116,6 +117,13 @@ object SonarBBPlugin {\n       description = \"If enabled, the plug-in will update the build status of the pull request depending on the \" +\n         \"Sonar analysis result. The analysis and also the build is failed if there are any critical or blocker issues.\",\n       global = true\n+    ),\n+    new Property(\n+      key = SonarBBPlugin.SonarApprovalSeverityLevel,\n+      name = \"The issue level to look for to determine to Auto-Approve\",\n+      defaultValue = Severity.CRITICAL,\n+      description = \"If any issues of this level or higher are found, it will un approve a PR \",",
        "path": "src/main/scala/ch/mibex/bitbucket/sonar/SonarBBPlugin.scala",
        "position": 17,
        "original_position": 17,
        "commit_id": "3a71ecb03566febfee68525b4cf63b2a2937e83d",
        "original_commit_id": "3a71ecb03566febfee68525b4cf63b2a2937e83d",
        "user": {
            "login": "nfalco79",
            "id": 4160180,
            "node_id": "MDQ6VXNlcjQxNjAxODA=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/4160180?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/nfalco79",
            "html_url": "https://github.com/nfalco79",
            "followers_url": "https://api.github.com/users/nfalco79/followers",
            "following_url": "https://api.github.com/users/nfalco79/following{/other_user}",
            "gists_url": "https://api.github.com/users/nfalco79/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/nfalco79/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/nfalco79/subscriptions",
            "organizations_url": "https://api.github.com/users/nfalco79/orgs",
            "repos_url": "https://api.github.com/users/nfalco79/repos",
            "events_url": "https://api.github.com/users/nfalco79/events{/privacy}",
            "received_events_url": "https://api.github.com/users/nfalco79/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "the description should be end with point and without trailing spaces.",
        "created_at": "2017-11-10T09:16:34Z",
        "updated_at": "2017-11-10T09:16:34Z",
        "html_url": "https://github.com/mibexsoftware/sonar-bitbucket-plugin/pull/54#discussion_r150184936",
        "pull_request_url": "https://api.github.com/repos/mibexsoftware/sonar-bitbucket-plugin/pulls/54",
        "author_association": "NONE",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/mibexsoftware/sonar-bitbucket-plugin/pulls/comments/150184936"
            },
            "html": {
                "href": "https://github.com/mibexsoftware/sonar-bitbucket-plugin/pull/54#discussion_r150184936"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/mibexsoftware/sonar-bitbucket-plugin/pulls/54"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/mibexsoftware/sonar-bitbucket-plugin/pulls/comments/150185292",
        "pull_request_review_id": 75698737,
        "id": 150185292,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MDE4NTI5Mg==",
        "diff_hunk": "@@ -49,10 +52,19 @@ class PullRequestReviewResults(pluginConfiguration: SonarBBPluginConfig) {\n     )\n   }\n \n-  def canBeApproved: Boolean =\n-    // there does not seam to be a way to check the quality gates in preview mode, so we make an assumption about\n-    // what users would consider good quality here :-)\n-    newIssuesBySeverity(Severity.CRITICAL) == 0 && newIssuesBySeverity(Severity.BLOCKER) == 0\n+  def canBeApproved: Boolean = {\n+    val levelString = pluginConfiguration.sonarApprovalSeverityLevel();\n+    val level = Severity.valueOf(levelString);\n+    val allLevels = Severity.values();\n+    val index = allLevels.indexOf(level);\n+\n+    newIssuesBySeverity.keys.filter((severity)=> {",
        "path": "src/main/scala/ch/mibex/bitbucket/sonar/review/PullRequestReviewResults.scala",
        "position": 28,
        "original_position": 28,
        "commit_id": "3a71ecb03566febfee68525b4cf63b2a2937e83d",
        "original_commit_id": "3a71ecb03566febfee68525b4cf63b2a2937e83d",
        "user": {
            "login": "nfalco79",
            "id": 4160180,
            "node_id": "MDQ6VXNlcjQxNjAxODA=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/4160180?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/nfalco79",
            "html_url": "https://github.com/nfalco79",
            "followers_url": "https://api.github.com/users/nfalco79/followers",
            "following_url": "https://api.github.com/users/nfalco79/following{/other_user}",
            "gists_url": "https://api.github.com/users/nfalco79/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/nfalco79/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/nfalco79/subscriptions",
            "organizations_url": "https://api.github.com/users/nfalco79/orgs",
            "repos_url": "https://api.github.com/users/nfalco79/repos",
            "events_url": "https://api.github.com/users/nfalco79/events{/privacy}",
            "received_events_url": "https://api.github.com/users/nfalco79/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "In this portion of code miss code formatting",
        "created_at": "2017-11-10T09:18:20Z",
        "updated_at": "2017-11-10T09:18:20Z",
        "html_url": "https://github.com/mibexsoftware/sonar-bitbucket-plugin/pull/54#discussion_r150185292",
        "pull_request_url": "https://api.github.com/repos/mibexsoftware/sonar-bitbucket-plugin/pulls/54",
        "author_association": "NONE",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/mibexsoftware/sonar-bitbucket-plugin/pulls/comments/150185292"
            },
            "html": {
                "href": "https://github.com/mibexsoftware/sonar-bitbucket-plugin/pull/54#discussion_r150185292"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/mibexsoftware/sonar-bitbucket-plugin/pulls/54"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/mibexsoftware/sonar-bitbucket-plugin/pulls/comments/150214257",
        "pull_request_review_id": 75732340,
        "id": 150214257,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MDIxNDI1Nw==",
        "diff_hunk": "@@ -116,6 +117,13 @@ object SonarBBPlugin {\n       description = \"If enabled, the plug-in will update the build status of the pull request depending on the \" +\n         \"Sonar analysis result. The analysis and also the build is failed if there are any critical or blocker issues.\",\n       global = true\n+    ),\n+    new Property(\n+      key = SonarBBPlugin.SonarApprovalSeverityLevel,",
        "path": "src/main/scala/ch/mibex/bitbucket/sonar/SonarBBPlugin.scala",
        "position": 14,
        "original_position": 14,
        "commit_id": "3a71ecb03566febfee68525b4cf63b2a2937e83d",
        "original_commit_id": "3a71ecb03566febfee68525b4cf63b2a2937e83d",
        "user": {
            "login": "nfalco79",
            "id": 4160180,
            "node_id": "MDQ6VXNlcjQxNjAxODA=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/4160180?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/nfalco79",
            "html_url": "https://github.com/nfalco79",
            "followers_url": "https://api.github.com/users/nfalco79/followers",
            "following_url": "https://api.github.com/users/nfalco79/following{/other_user}",
            "gists_url": "https://api.github.com/users/nfalco79/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/nfalco79/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/nfalco79/subscriptions",
            "organizations_url": "https://api.github.com/users/nfalco79/orgs",
            "repos_url": "https://api.github.com/users/nfalco79/repos",
            "events_url": "https://api.github.com/users/nfalco79/events{/privacy}",
            "received_events_url": "https://api.github.com/users/nfalco79/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "name and description of `SonarBBPlugin.BitbucketApproveUnapprove` property should be corrected according to this new behavior.",
        "created_at": "2017-11-10T11:36:54Z",
        "updated_at": "2017-11-10T11:36:54Z",
        "html_url": "https://github.com/mibexsoftware/sonar-bitbucket-plugin/pull/54#discussion_r150214257",
        "pull_request_url": "https://api.github.com/repos/mibexsoftware/sonar-bitbucket-plugin/pulls/54",
        "author_association": "NONE",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/mibexsoftware/sonar-bitbucket-plugin/pulls/comments/150214257"
            },
            "html": {
                "href": "https://github.com/mibexsoftware/sonar-bitbucket-plugin/pull/54#discussion_r150214257"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/mibexsoftware/sonar-bitbucket-plugin/pulls/54"
            }
        }
    }
]