[
    {
        "url": "https://api.github.com/repos/mantika/whaleprint/issues/17",
        "repository_url": "https://api.github.com/repos/mantika/whaleprint",
        "labels_url": "https://api.github.com/repos/mantika/whaleprint/issues/17/labels{/name}",
        "comments_url": "https://api.github.com/repos/mantika/whaleprint/issues/17/comments",
        "events_url": "https://api.github.com/repos/mantika/whaleprint/issues/17/events",
        "html_url": "https://github.com/mantika/whaleprint/issues/17",
        "id": 281532446,
        "node_id": "MDU6SXNzdWUyODE1MzI0NDY=",
        "number": 17,
        "title": "no networks on export",
        "user": {
            "login": "scher200",
            "id": 9550429,
            "node_id": "MDQ6VXNlcjk1NTA0Mjk=",
            "avatar_url": "https://avatars0.githubusercontent.com/u/9550429?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/scher200",
            "html_url": "https://github.com/scher200",
            "followers_url": "https://api.github.com/users/scher200/followers",
            "following_url": "https://api.github.com/users/scher200/following{/other_user}",
            "gists_url": "https://api.github.com/users/scher200/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/scher200/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/scher200/subscriptions",
            "organizations_url": "https://api.github.com/users/scher200/orgs",
            "repos_url": "https://api.github.com/users/scher200/repos",
            "events_url": "https://api.github.com/users/scher200/events{/privacy}",
            "received_events_url": "https://api.github.com/users/scher200/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2017-12-12T20:49:34Z",
        "updated_at": "2017-12-13T05:30:36Z",
        "closed_at": null,
        "author_association": "NONE",
        "body": "docker-compose.yml\r\n```\r\nversion: '3.2'\r\n\r\nnetworks:\r\n  lb_default:\r\n    external: true\r\n\r\nservices:\r\n  lb:\r\n    image: traefik:1.3\r\n    networks:\r\n      lb_default:\r\n    command: -c --docker=true\r\n      --web=true\r\n      --debug=true\r\n      --docker.swarmmode\r\n      --docker.watch\r\n      --docker.domain=mydomain.com\r\n      --docker.exposedbydefault=false\r\n      --accesslogsfile=/dev/stdout \r\n      --logLevel=ERROR\r\n      --graceTimeOut=600 \r\n      --maxIdleConnsPerHost=4000\r\n      --acme=true\r\n      --acme.email=email@mydomain.com\r\n      --acme.entryPoint=https\r\n      --entryPoints='Name:http Address::80'\r\n      --entryPoints='Name:https Address::443 TLS'\r\n      --acme.ondemand=true\r\n      --acme.storage=/encrypt/acme.json\r\n      --defaultEntryPoints=https,http\r\n    volumes:\r\n      - /var/run/docker.sock:/var/run/docker.sock\r\n      - ./acme/:/encrypt/\r\n      - /dev/null:/traefik.toml\r\n    ports:\r\n      - \"80:80\"\r\n      - \"443:443\"\r\n      - \"5344:8080\"\r\n    deploy:\r\n      placement:\r\n        constraints:\r\n          - node.arc == x64\r\n          - node.role == manager\r\n\r\n```\r\n\r\nas you can see whaleprint 0.3 export does not export any networks\r\ntraefik.dab\r\n```\r\n{\r\n  \"Version\": \"0.1\",\r\n  \"Services\": {\r\n    \"lb\": {\r\n      \"Image\": \"traefik:1.3@sha256:90697fb79a104520f350a3a1db6402584f473301ab6d1a71d264758b65fa232e\",\r\n      \"Args\": [\r\n        \"-c\",\r\n        \"--docker=true\",\r\n        \"--web=true\",\r\n        \"--debug=true\",\r\n        \"--docker.swarmmode\",\r\n        \"--docker.watch\",\r\n        \"--docker.domain=mydomain.com\",\r\n        \"--docker.exposedbydefault=false\",\r\n        \"--accesslogsfile=/dev/stdout\",\r\n        \"--logLevel=ERROR\",\r\n        \"--graceTimeOut=600\",\r\n        \"--maxIdleConnsPerHost=4000\",\r\n        \"--acme=true\",\r\n        \"--acme.email='my@email.com\",\r\n        \"--acme.entryPoint=https\",\r\n        \"--entryPoints=Name:http Address::80\",\r\n        \"--entryPoints=Name:https Address::443 TLS\",\r\n        \"--acme.ondemand=true\",\r\n        \"--acme.storage=/encrypt/acme.json\",\r\n        \"--defaultEntryPoints=https,http\"\r\n      ],\r\n      \"Labels\": {\r\n        \"com.docker.stack.image\": \"traefik:1.3\",\r\n        \"com.docker.stack.namespace\": \"traefik\"\r\n      },\r\n      \"ServiceLabels\": {\r\n        \"com.docker.stack.namespace\": \"traefik\"\r\n      },\r\n      \"Ports\": [\r\n        {\r\n          \"Protocol\": \"tcp\",\r\n          \"Port\": 80,\r\n          \"PublishedPort\": 80\r\n        },\r\n        {\r\n          \"Protocol\": \"tcp\",\r\n          \"Port\": 443,\r\n          \"PublishedPort\": 443\r\n        },\r\n        {\r\n          \"Protocol\": \"tcp\",\r\n          \"Port\": 8080,\r\n          \"PublishedPort\": 5344\r\n        }\r\n      ],\r\n      \"WorkingDir\": \"\",\r\n      \"User\": \"\",\r\n      \"Replicas\": 1\r\n    }\r\n  }\r\n}\r\n\r\n```\r\ndocker version\r\n```\r\nClient:\r\n Version:      17.10.0-ce\r\n API version:  1.33\r\n Go version:   go1.9.1\r\n Git commit:   f4ffd2511c\r\n Built:        Wed Oct 18 23:08:56 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      17.10.0-ce\r\n API version:  1.33 (minimum version 1.12)\r\n Go version:   go1.9.1\r\n Git commit:   f4ffd2511c\r\n Built:        Wed Oct 18 23:09:11 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false/true\r\n```"
    },
    {
        "url": "https://api.github.com/repos/mantika/whaleprint/issues/16",
        "repository_url": "https://api.github.com/repos/mantika/whaleprint",
        "labels_url": "https://api.github.com/repos/mantika/whaleprint/issues/16/labels{/name}",
        "comments_url": "https://api.github.com/repos/mantika/whaleprint/issues/16/comments",
        "events_url": "https://api.github.com/repos/mantika/whaleprint/issues/16/events",
        "html_url": "https://github.com/mantika/whaleprint/pull/16",
        "id": 218722955,
        "node_id": "MDExOlB1bGxSZXF1ZXN0MTEzNzk0NTQ5",
        "number": 16,
        "title": "Upgrade to use compose 3.1 spec",
        "user": {
            "login": "marcosnils",
            "id": 1578458,
            "node_id": "MDQ6VXNlcjE1Nzg0NTg=",
            "avatar_url": "https://avatars2.githubusercontent.com/u/1578458?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/marcosnils",
            "html_url": "https://github.com/marcosnils",
            "followers_url": "https://api.github.com/users/marcosnils/followers",
            "following_url": "https://api.github.com/users/marcosnils/following{/other_user}",
            "gists_url": "https://api.github.com/users/marcosnils/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/marcosnils/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/marcosnils/subscriptions",
            "organizations_url": "https://api.github.com/users/marcosnils/orgs",
            "repos_url": "https://api.github.com/users/marcosnils/repos",
            "events_url": "https://api.github.com/users/marcosnils/events{/privacy}",
            "received_events_url": "https://api.github.com/users/marcosnils/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2017-04-01T21:04:19Z",
        "updated_at": "2017-04-19T05:36:20Z",
        "closed_at": null,
        "author_association": "COLLABORATOR",
        "pull_request": {
            "url": "https://api.github.com/repos/mantika/whaleprint/pulls/16",
            "html_url": "https://github.com/mantika/whaleprint/pull/16",
            "diff_url": "https://github.com/mantika/whaleprint/pull/16.diff",
            "patch_url": "https://github.com/mantika/whaleprint/pull/16.patch"
        },
        "body": "@xetorthio @bvis willing to try it out?"
    },
    {
        "url": "https://api.github.com/repos/mantika/whaleprint/issues/15",
        "repository_url": "https://api.github.com/repos/mantika/whaleprint",
        "labels_url": "https://api.github.com/repos/mantika/whaleprint/issues/15/labels{/name}",
        "comments_url": "https://api.github.com/repos/mantika/whaleprint/issues/15/comments",
        "events_url": "https://api.github.com/repos/mantika/whaleprint/issues/15/events",
        "html_url": "https://github.com/mantika/whaleprint/issues/15",
        "id": 204313386,
        "node_id": "MDU6SXNzdWUyMDQzMTMzODY=",
        "number": 15,
        "title": "Ghost networks appears after export apply a stack",
        "user": {
            "login": "joskfg",
            "id": 524887,
            "node_id": "MDQ6VXNlcjUyNDg4Nw==",
            "avatar_url": "https://avatars1.githubusercontent.com/u/524887?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/joskfg",
            "html_url": "https://github.com/joskfg",
            "followers_url": "https://api.github.com/users/joskfg/followers",
            "following_url": "https://api.github.com/users/joskfg/following{/other_user}",
            "gists_url": "https://api.github.com/users/joskfg/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/joskfg/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/joskfg/subscriptions",
            "organizations_url": "https://api.github.com/users/joskfg/orgs",
            "repos_url": "https://api.github.com/users/joskfg/repos",
            "events_url": "https://api.github.com/users/joskfg/events{/privacy}",
            "received_events_url": "https://api.github.com/users/joskfg/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2017-01-31T14:27:40Z",
        "updated_at": "2017-02-01T21:32:41Z",
        "closed_at": null,
        "author_association": "NONE",
        "body": "Currantly when you export and import a complete stack the network between the different containers dissapears and appear a new independent network per container.\r\n\r\nWe can reproduce it following this steps:\r\n\r\ndocker-compose.yml\r\n```yml\r\nversion: \"3\"\r\n\r\nnetworks:\r\n  app-network:\r\n\r\nservices:\r\n  memcached:\r\n    image: memcached\r\n    networks:\r\n      - app-network\r\n  nginx:\r\n    image: nginx:1.11.6-alpine\r\n    volumes:\r\n      - ./provision/files/nginx:/etc/nginx:ro\r\n    networks:\r\n      - app-network\r\n    depends_on:\r\n      - memcached\r\n```\r\n\r\nDeploying the stack\r\n```bash\r\ndocker stack deploy app-test -c docker-compose.yml\r\n```\r\n\r\nGetting the DAB\r\n```bash\r\nwhaleprint export\r\n```\r\n\r\nDAB obtained\r\n```json\r\n{  \r\n   \"Version\":\"0.1\",\r\n   \"Services\":{  \r\n      \"memcached\":{  \r\n         \"Image\":\"memcached:latest@sha256:2f5402d8f6f8b359f186e211448b857b6b715a87b2879b9b68aee8fb0e44c164\",\r\n         \"Labels\":{  \r\n            \"com.docker.stack.namespace\":\"app-test\"\r\n         },\r\n         \"ServiceLabels\":{  \r\n            \"com.docker.stack.namespace\":\"app-test\"\r\n         },\r\n         \"WorkingDir\":\"\",\r\n         \"User\":\"\",\r\n         \"Networks\":[  \r\n            \"memcached\"\r\n         ],\r\n         \"Replicas\":1\r\n      },\r\n      \"nginx\":{  \r\n         \"Image\":\"nginx:1.11.6-alpine@sha256:aee97412fee873bd3d8fc2331b80862d7bd58913f7b12740cae8515edc1a66e4\",\r\n         \"Labels\":{  \r\n            \"com.docker.stack.namespace\":\"app-test\"\r\n         },\r\n         \"ServiceLabels\":{  \r\n            \"com.docker.stack.namespace\":\"app-test\"\r\n         },\r\n         \"WorkingDir\":\"\",\r\n         \"User\":\"\",\r\n         \"Networks\":[  \r\n            \"nginx\"\r\n         ],\r\n         \"Replicas\":1\r\n      }\r\n   }\r\n}\r\n```\r\n\r\nWe can see here the unknown networks `nginx` and `memcached`, actually we have no `app-test` network that is the defined in the `docker-compose.yml`.\r\n\r\nWe can check the service running in the cluster.\r\n```bash\r\ndocker service inspect app-test_memcached\r\n```\r\n```json\r\n \"Networks\": [\r\n                {\r\n                    \"Target\": \"m5xyqqv44mx0jwfpsoruts0gh\",\r\n                    \"Aliases\": [\r\n                        \"memcached\"\r\n                    ]\r\n                }\r\n            ],\r\n```\r\n\r\nWe can see that the network has a *memcached alias*, but if we check the output of network list that network corresponds to the app-test_app-network.\r\n```\r\nm5xyqqv44mx0        app-test_app-network                          overlay             swarm\r\n```\r\n\r\nSeems that the whaleprint export just uses the names and not the identifier to know the network, so when you tries to apply the DAB it generates one *different* network for container instead of use one for all the containers."
    },
    {
        "url": "https://api.github.com/repos/mantika/whaleprint/issues/9",
        "repository_url": "https://api.github.com/repos/mantika/whaleprint",
        "labels_url": "https://api.github.com/repos/mantika/whaleprint/issues/9/labels{/name}",
        "comments_url": "https://api.github.com/repos/mantika/whaleprint/issues/9/comments",
        "events_url": "https://api.github.com/repos/mantika/whaleprint/issues/9/events",
        "html_url": "https://github.com/mantika/whaleprint/issues/9",
        "id": 168221744,
        "node_id": "MDU6SXNzdWUxNjgyMjE3NDQ=",
        "number": 9,
        "title": "Add different status codes for plan",
        "user": {
            "login": "marcosnils",
            "id": 1578458,
            "node_id": "MDQ6VXNlcjE1Nzg0NTg=",
            "avatar_url": "https://avatars2.githubusercontent.com/u/1578458?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/marcosnils",
            "html_url": "https://github.com/marcosnils",
            "followers_url": "https://api.github.com/users/marcosnils/followers",
            "following_url": "https://api.github.com/users/marcosnils/following{/other_user}",
            "gists_url": "https://api.github.com/users/marcosnils/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/marcosnils/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/marcosnils/subscriptions",
            "organizations_url": "https://api.github.com/users/marcosnils/orgs",
            "repos_url": "https://api.github.com/users/marcosnils/repos",
            "events_url": "https://api.github.com/users/marcosnils/events{/privacy}",
            "received_events_url": "https://api.github.com/users/marcosnils/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 9,
        "created_at": "2016-07-28T23:45:13Z",
        "updated_at": "2016-08-02T19:35:02Z",
        "closed_at": null,
        "author_association": "COLLABORATOR",
        "body": "If there's nothing to do we could return 0 meaning \"everything is ok\" and otherwise, some other code that means \"there are changes pending in your services\"\n\nRight now we're returning 0 for both. \n\n@xetorthio WDYT?\n"
    },
    {
        "url": "https://api.github.com/repos/mantika/whaleprint/issues/7",
        "repository_url": "https://api.github.com/repos/mantika/whaleprint",
        "labels_url": "https://api.github.com/repos/mantika/whaleprint/issues/7/labels{/name}",
        "comments_url": "https://api.github.com/repos/mantika/whaleprint/issues/7/comments",
        "events_url": "https://api.github.com/repos/mantika/whaleprint/issues/7/events",
        "html_url": "https://github.com/mantika/whaleprint/issues/7",
        "id": 165820392,
        "node_id": "MDU6SXNzdWUxNjU4MjAzOTI=",
        "number": 7,
        "title": "Extend current DAB with more features",
        "user": {
            "login": "marcosnils",
            "id": 1578458,
            "node_id": "MDQ6VXNlcjE1Nzg0NTg=",
            "avatar_url": "https://avatars2.githubusercontent.com/u/1578458?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/marcosnils",
            "html_url": "https://github.com/marcosnils",
            "followers_url": "https://api.github.com/users/marcosnils/followers",
            "following_url": "https://api.github.com/users/marcosnils/following{/other_user}",
            "gists_url": "https://api.github.com/users/marcosnils/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/marcosnils/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/marcosnils/subscriptions",
            "organizations_url": "https://api.github.com/users/marcosnils/orgs",
            "repos_url": "https://api.github.com/users/marcosnils/repos",
            "events_url": "https://api.github.com/users/marcosnils/events{/privacy}",
            "received_events_url": "https://api.github.com/users/marcosnils/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2016-07-15T15:55:30Z",
        "updated_at": "2016-09-14T18:11:28Z",
        "closed_at": null,
        "author_association": "COLLABORATOR",
        "body": "Maybe we could add the following attributes as these seem relevant:\n- [x] Replicas\n- [ ] Mounts\n- [x] Constraints\n- [ ] Restart conditions\n- [x] Endpoint Mode\n- [x] PublishedPorts\n- [x] Service mode\n"
    },
    {
        "url": "https://api.github.com/repos/mantika/whaleprint/issues/2",
        "repository_url": "https://api.github.com/repos/mantika/whaleprint",
        "labels_url": "https://api.github.com/repos/mantika/whaleprint/issues/2/labels{/name}",
        "comments_url": "https://api.github.com/repos/mantika/whaleprint/issues/2/comments",
        "events_url": "https://api.github.com/repos/mantika/whaleprint/issues/2/events",
        "html_url": "https://github.com/mantika/whaleprint/issues/2",
        "id": 163398640,
        "node_id": "MDU6SXNzdWUxNjMzOTg2NDA=",
        "number": 2,
        "title": "Add JSON schema por DAB file.",
        "user": {
            "login": "marcosnils",
            "id": 1578458,
            "node_id": "MDQ6VXNlcjE1Nzg0NTg=",
            "avatar_url": "https://avatars2.githubusercontent.com/u/1578458?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/marcosnils",
            "html_url": "https://github.com/marcosnils",
            "followers_url": "https://api.github.com/users/marcosnils/followers",
            "following_url": "https://api.github.com/users/marcosnils/following{/other_user}",
            "gists_url": "https://api.github.com/users/marcosnils/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/marcosnils/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/marcosnils/subscriptions",
            "organizations_url": "https://api.github.com/users/marcosnils/orgs",
            "repos_url": "https://api.github.com/users/marcosnils/repos",
            "events_url": "https://api.github.com/users/marcosnils/events{/privacy}",
            "received_events_url": "https://api.github.com/users/marcosnils/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2016-07-01T13:44:24Z",
        "updated_at": "2016-07-01T13:44:24Z",
        "closed_at": null,
        "author_association": "COLLABORATOR",
        "body": ""
    },
    {
        "url": "https://api.github.com/repos/mantika/whaleprint/issues/1",
        "repository_url": "https://api.github.com/repos/mantika/whaleprint",
        "labels_url": "https://api.github.com/repos/mantika/whaleprint/issues/1/labels{/name}",
        "comments_url": "https://api.github.com/repos/mantika/whaleprint/issues/1/comments",
        "events_url": "https://api.github.com/repos/mantika/whaleprint/issues/1/events",
        "html_url": "https://github.com/mantika/whaleprint/issues/1",
        "id": 163385676,
        "node_id": "MDU6SXNzdWUxNjMzODU2NzY=",
        "number": 1,
        "title": "Add support for remote DAB files.",
        "user": {
            "login": "marcosnils",
            "id": 1578458,
            "node_id": "MDQ6VXNlcjE1Nzg0NTg=",
            "avatar_url": "https://avatars2.githubusercontent.com/u/1578458?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/marcosnils",
            "html_url": "https://github.com/marcosnils",
            "followers_url": "https://api.github.com/users/marcosnils/followers",
            "following_url": "https://api.github.com/users/marcosnils/following{/other_user}",
            "gists_url": "https://api.github.com/users/marcosnils/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/marcosnils/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/marcosnils/subscriptions",
            "organizations_url": "https://api.github.com/users/marcosnils/orgs",
            "repos_url": "https://api.github.com/users/marcosnils/repos",
            "events_url": "https://api.github.com/users/marcosnils/events{/privacy}",
            "received_events_url": "https://api.github.com/users/marcosnils/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2016-07-01T12:29:18Z",
        "updated_at": "2016-07-01T12:29:18Z",
        "closed_at": null,
        "author_association": "COLLABORATOR",
        "body": ""
    }
]